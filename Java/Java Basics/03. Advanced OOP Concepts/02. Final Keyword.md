# üîê Final Keyword

## üìñ Overview

The **final** keyword in Java is used to restrict the user from modifying variables, methods, or classes. Once declared final, they cannot be changed or overridden.

**Key Uses:**
- **final variable** ‚Üí Constant (cannot be reassigned)
- **final method** ‚Üí Cannot be overridden
- **final class** ‚Üí Cannot be inherited
- **final parameter** ‚Üí Cannot be modified in method

---

## üéØ Final Variable Types

```
1. Final instance variable (must be initialized)
2. Final static variable (constant)
3. Final local variable
4. Final parameter
5. Blank final variable (initialized in constructor)
```

---

## üíª Example 1: Final Variables

```java
class FinalVariableDemo {
    // Final instance variable - must initialize
    final int MAX_VALUE = 100;
    
    // Static final - constant
    static final double PI = 3.14159;
    static final String COMPANY_NAME = "TechCorp";
    
    void method() {
        // Final local variable
        final int x = 10;
        System.out.println("x = " + x);
        // x = 20;  // ERROR: Cannot reassign
        
        // Can initialize final local later
        final int y;
        y = 30;  // First and only assignment
        System.out.println("y = " + y);
        // y = 40;  // ERROR: Already assigned
    }
    
    public static void main(String[] args) {
        FinalVariableDemo obj = new FinalVariableDemo();
        
        System.out.println("MAX_VALUE: " + obj.MAX_VALUE);
        System.out.println("PI: " + PI);
        System.out.println("COMPANY: " + COMPANY_NAME);
        
        // obj.MAX_VALUE = 200;  // ERROR: Cannot modify
        
        obj.method();
    }
}
```

**Output:**
```
MAX_VALUE: 100
PI: 3.14159
COMPANY: TechCorp
x = 10
y = 30
```

---

## üíª Example 2: Blank Final Variable

```java
class Student {
    final int rollNo;      // Blank final
    final String name;     // Blank final
    static final String UNIVERSITY;  // Blank static final
    
    // Static block to initialize static final
    static {
        UNIVERSITY = "MIT";
    }
    
    // Constructor to initialize blank final
    Student(int rollNo, String name) {
        this.rollNo = rollNo;
        this.name = name;
    }
    
    // Another constructor
    Student(int rollNo) {
        this.rollNo = rollNo;
        this.name = "Unknown";
    }
    
    void display() {
        System.out.println("Roll No: " + rollNo);
        System.out.println("Name: " + name);
        System.out.println("University: " + UNIVERSITY);
    }
}

public class BlankFinalDemo {
    public static void main(String[] args) {
        Student s1 = new Student(101, "Alice");
        s1.display();
        
        System.out.println();
        
        Student s2 = new Student(102);
        s2.display();
        
        // s1.rollNo = 103;  // ERROR: Cannot modify final
    }
}
```

---

## üíª Example 3: Final Methods

```java
class Parent {
    // Final method - cannot be overridden
    final void display() {
        System.out.println("Parent display method");
    }
    
    void show() {
        System.out.println("Parent show method");
    }
}

class Child extends Parent {
    // Cannot override final method
    // void display() {  // ERROR!
    //     System.out.println("Child display");
    // }
    
    // Can override non-final method
    @Override
    void show() {
        System.out.println("Child show method");
    }
}

public class FinalMethodDemo {
    public static void main(String[] args) {
        Child child = new Child();
        child.display();  // Parent's final method
        child.show();     // Child's overridden method
    }
}
```

**Output:**
```
Parent display method
Child show method
```

---

## üíª Example 4: Final Class

```java
// Final class - cannot be extended
final class ImmutableClass {
    private final int value;
    private final String name;
    
    ImmutableClass(int value, String name) {
        this.value = value;
        this.name = name;
    }
    
    int getValue() {
        return value;
    }
    
    String getName() {
        return name;
    }
}

// Cannot extend final class
// class SubClass extends ImmutableClass {  // ERROR!
// }

// Real-world examples of final classes
// final class String { }
// final class Integer { }
// final class Math { }

public class FinalClassDemo {
    public static void main(String[] args) {
        ImmutableClass obj = new ImmutableClass(100, "Test");
        System.out.println("Value: " + obj.getValue());
        System.out.println("Name: " + obj.getName());
    }
}
```

---

## üíª Example 5: Final Parameters

```java
class Calculator {
    // Final parameters cannot be modified inside method
    int add(final int a, final int b) {
        // a = a + 10;  // ERROR: Cannot modify final parameter
        // b = b + 10;  // ERROR
        
        return a + b;
    }
    
    void printArray(final int[] arr) {
        // Can modify array elements (reference is final, not content)
        arr[0] = 100;
        System.out.println("Modified array[0]: " + arr[0]);
        
        // Cannot reassign reference
        // arr = new int[5];  // ERROR!
    }
    
    void processString(final String str) {
        // str = str.toUpperCase();  // ERROR: Cannot reassign
        
        // But can use it to create new String
        String upper = str.toUpperCase();
        System.out.println("Uppercase: " + upper);
    }
}

public class FinalParameterDemo {
    public static void main(String[] args) {
        Calculator calc = new Calculator();
        
        System.out.println("Add: " + calc.add(5, 3));
        
        int[] numbers = {1, 2, 3};
        calc.printArray(numbers);
        
        calc.processString("hello");
    }
}
```

---

## üíª Example 6: Final with Collections

```java
import java.util.ArrayList;
import java.util.List;

class CollectionDemo {
    // Final reference - cannot change reference
    final List<String> names = new ArrayList<>();
    
    void addName(String name) {
        // Can modify collection
        names.add(name);
    }
    
    void display() {
        System.out.println("Names: " + names);
    }
    
    void reassign() {
        // Cannot reassign reference
        // names = new ArrayList<>();  // ERROR!
        
        // But can clear and add new elements
        names.clear();
        System.out.println("Cleared: " + names);
    }
}

public class FinalCollectionDemo {
    public static void main(String[] args) {
        CollectionDemo demo = new CollectionDemo();
        
        demo.addName("Alice");
        demo.addName("Bob");
        demo.addName("Charlie");
        demo.display();
        
        demo.reassign();
        demo.addName("David");
        demo.display();
    }
}
```

---

## üíª Example 7: Final Static Constants

```java
class Configuration {
    // Constants using final static
    static final int MAX_USERS = 1000;
    static final int MIN_PASSWORD_LENGTH = 8;
    static final double TAX_RATE = 0.15;
    static final String DEFAULT_LANGUAGE = "English";
    
    // Good practice: Use uppercase with underscores
    static final String DATABASE_URL = "jdbc:mysql://localhost:3306/mydb";
    static final int CONNECTION_TIMEOUT = 30;
    
    static void displayConfig() {
        System.out.println("=== Configuration ===");
        System.out.println("Max Users: " + MAX_USERS);
        System.out.println("Min Password Length: " + MIN_PASSWORD_LENGTH);
        System.out.println("Tax Rate: " + (TAX_RATE * 100) + "%");
        System.out.println("Default Language: " + DEFAULT_LANGUAGE);
        System.out.println("Database URL: " + DATABASE_URL);
        System.out.println("Connection Timeout: " + CONNECTION_TIMEOUT + "s");
    }
}

public class ConstantsDemo {
    public static void main(String[] args) {
        Configuration.displayConfig();
        
        // Cannot modify constants
        // Configuration.MAX_USERS = 2000;  // ERROR!
        
        // Use constants
        int users = 500;
        if (users < Configuration.MAX_USERS) {
            System.out.println("\nCan add " + 
                (Configuration.MAX_USERS - users) + " more users");
        }
    }
}
```

---

## üíª Example 8: Immutable Class Using Final

```java
final class Person {
    private final String name;
    private final int age;
    private final String address;
    
    Person(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }
    
    // Only getters, no setters
    String getName() {
        return name;
    }
    
    int getAge() {
        return age;
    }
    
    String getAddress() {
        return address;
    }
    
    @Override
    public String toString() {
        return "Person{name='" + name + "', age=" + age + 
               ", address='" + address + "'}";
    }
}

public class ImmutableDemo {
    public static void main(String[] args) {
        Person person = new Person("Alice", 25, "New York");
        
        System.out.println(person);
        System.out.println("Name: " + person.getName());
        
        // Cannot modify - no setters available
        // person.setName("Bob");  // ERROR: Method doesn't exist
        
        // Must create new object for changes
        Person updated = new Person(person.getName(), 26, person.getAddress());
        System.out.println("Updated: " + updated);
    }
}
```

---

## üíª Example 9: Final with Inheritance

```java
class Vehicle {
    final String brand;
    int year;
    
    Vehicle(String brand, int year) {
        this.brand = brand;
        this.year = year;
    }
    
    final void displayBrand() {
        System.out.println("Brand: " + brand);
    }
    
    void displayYear() {
        System.out.println("Year: " + year);
    }
}

class Car extends Vehicle {
    String model;
    
    Car(String brand, int year, String model) {
        super(brand, year);
        this.model = model;
    }
    
    // Cannot override final method
    // void displayBrand() { }  // ERROR!
    
    // Can override non-final method
    @Override
    void displayYear() {
        System.out.println("Car manufactured in: " + year);
    }
    
    void displayInfo() {
        displayBrand();  // Final method from parent
        displayYear();   // Overridden method
        System.out.println("Model: " + model);
    }
}

public class InheritanceFinalDemo {
    public static void main(String[] args) {
        Car car = new Car("Toyota", 2023, "Camry");
        car.displayInfo();
        
        // car.brand = "Honda";  // ERROR: final field
    }
}
```

---

## üíª Example 10: Performance Optimization

```java
class MathOperations {
    // Final methods can be inlined by compiler for better performance
    final int square(int n) {
        return n * n;
    }
    
    final int cube(int n) {
        return n * n * n;
    }
    
    // Final variables are constants - compiler optimization
    static final double PI = 3.14159;
    
    final double calculateCircleArea(double radius) {
        return PI * radius * radius;
    }
    
    final double calculateCircleCircumference(double radius) {
        return 2 * PI * radius;
    }
}

public class PerformanceDemo {
    public static void main(String[] args) {
        MathOperations math = new MathOperations();
        
        System.out.println("Square of 5: " + math.square(5));
        System.out.println("Cube of 3: " + math.cube(3));
        
        double radius = 5;
        System.out.println("Circle area: " + math.calculateCircleArea(radius));
        System.out.println("Circle circumference: " + 
                         math.calculateCircleCircumference(radius));
    }
}
```

---

## üìä Final Keyword Usage

| Type | Usage | Example |
|------|-------|---------|
| **Variable** | Constant | `final int x = 10;` |
| **Method** | Cannot override | `final void method() { }` |
| **Class** | Cannot extend | `final class MyClass { }` |
| **Parameter** | Cannot modify | `void method(final int x) { }` |
| **Static** | Class constant | `static final int MAX = 100;` |

---

## üìä Final Variable Initialization

| Type | When to Initialize | Example |
|------|-------------------|---------|
| **Direct** | At declaration | `final int x = 10;` |
| **Constructor** | In constructor | `final int y; y = 20;` |
| **Static block** | In static block | `static final int z; static { z = 30; }` |
| **Instance block** | In instance block | `final int a; { a = 40; }` |

---

## üí° Best Practices

1. ‚úÖ **Use final for constants**
   ```java
   static final double PI = 3.14159;
   ```

2. ‚úÖ **Use final for immutable classes**
   ```java
   final class ImmutableData { }
   ```

3. ‚úÖ **Use final for security**
   ```java
   final void secureMethod() { }
   ```

4. ‚úÖ **Use uppercase for static final**
   ```java
   static final int MAX_VALUE = 100;
   ```

5. ‚úÖ **Use final for method parameters when appropriate**
   ```java
   void process(final String data) { }
   ```

---

## ‚ö†Ô∏è Common Pitfalls

```java
public class FinalPitfalls {
    // 1. Final reference != Immutable object
    final List<String> list = new ArrayList<>();
    void modify() {
        list.add("item");  // Allowed!
        // list = new ArrayList<>();  // ERROR!
    }
    
    // 2. Blank final must be initialized
    final int x;  // Must initialize in constructor
    
    // 3. Static final must be initialized
    static final int Y;  // Must initialize in static block or declaration
    
    // 4. Cannot have abstract final methods
    // abstract final void method();  // ERROR!
    
    // 5. Final class and final methods redundant
    final class FinalClass {
        final void method() { }  // Already cannot override
    }
    
    // 6. Cannot modify final array reference but can modify elements
    final int[] arr = {1, 2, 3};
    void change() {
        arr[0] = 10;  // Allowed
        // arr = new int[5];  // ERROR!
    }
}
```

---

## üéØ Interview Questions

1. **What is final keyword in Java?**
2. **Difference between final, finally, and finalize?**
3. **Can we change value of final variable?**
4. **What is blank final variable?**
5. **Can we override final methods?**
6. **Can we extend final class?**
7. **Why String class is final?**
8. **Can we have final abstract class?**
9. **Can final method be overloaded?**
10. **What is static final variable?**
11. **Can constructor be final?**
12. **Difference between final and immutable?**
13. **Performance benefits of final?**
14. **Can we declare interface as final?**
15. **What happens if final variable not initialized?**

---

## üìö Related Topics

- [Static Keyword](01.%20Static%20Keyword.md)
- [Access Modifiers](06.%20Access%20Modifiers.md)
- [Inheritance](../02.%20Object-Oriented%20Programming/04.%20Inheritance.md)
- [Polymorphism](../02.%20Object-Oriented%20Programming/05.%20Polymorphism.md)
- [Encapsulation](../02.%20Object-Oriented%20Programming/06.%20Encapsulation.md)
