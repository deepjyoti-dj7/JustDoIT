# üéÅ Inner Classes

## üìñ Overview

**Inner Class** (Nested Class) is a class defined within another class. Java allows defining a class within a class to logically group classes that are only used in one place.

**Types of Inner Classes:**
1. **Member Inner Class** (Non-static nested class)
2. **Local Inner Class** (Inside method/block)
3. **Anonymous Inner Class**
4. **Static Nested Class**

---

## üéØ Why Use Inner Classes?

```
‚úÖ Logical grouping of classes
‚úÖ Increased encapsulation
‚úÖ More readable and maintainable code
‚úÖ Access to outer class members (including private)
‚úÖ Implement multiple inheritance scenarios
```

---

## üíª Example 1: Member Inner Class

```java
class OuterClass {
    private int outerVar = 10;
    static int staticVar = 20;
    
    // Member inner class
    class InnerClass {
        int innerVar = 30;
        
        void display() {
            System.out.println("Outer variable: " + outerVar);
            System.out.println("Static variable: " + staticVar);
            System.out.println("Inner variable: " + innerVar);
        }
        
        void accessOuterMethod() {
            outerMethod();
        }
    }
    
    void outerMethod() {
        System.out.println("Outer class method");
    }
    
    void createInner() {
        InnerClass inner = new InnerClass();
        inner.display();
    }
}

public class MemberInnerDemo {
    public static void main(String[] args) {
        // Create outer class object
        OuterClass outer = new OuterClass();
        outer.createInner();
        
        System.out.println("\nCreating inner class from outside:");
        // Create inner class object
        OuterClass.InnerClass inner = outer.new InnerClass();
        inner.display();
        inner.accessOuterMethod();
    }
}
```

**Output:**
```
Outer variable: 10
Static variable: 20
Inner variable: 30

Creating inner class from outside:
Outer variable: 10
Static variable: 20
Inner variable: 30
Outer class method
```

---

## üíª Example 2: Accessing Private Members

```java
class BankAccount {
    private String accountNumber;
    private double balance;
    private String pin;
    
    BankAccount(String accountNumber, double balance, String pin) {
        this.accountNumber = accountNumber;
        this.balance = balance;
        this.pin = pin;
    }
    
    // Inner class can access private members
    class Transaction {
        void deposit(double amount) {
            if (amount > 0) {
                balance += amount;  // Access private balance
                System.out.println("Deposited: $" + amount);
                displayBalance();
            }
        }
        
        void withdraw(double amount, String enteredPin) {
            if (!enteredPin.equals(pin)) {  // Access private pin
                System.out.println("Invalid PIN!");
                return;
            }
            if (amount > 0 && amount <= balance) {
                balance -= amount;
                System.out.println("Withdrawn: $" + amount);
                displayBalance();
            } else {
                System.out.println("Insufficient balance!");
            }
        }
        
        private void displayBalance() {
            System.out.println("Balance: $" + balance);
        }
    }
    
    Transaction getTransaction() {
        return new Transaction();
    }
}

public class PrivateAccessDemo {
    public static void main(String[] args) {
        BankAccount account = new BankAccount("ACC001", 1000, "1234");
        BankAccount.Transaction txn = account.getTransaction();
        
        txn.deposit(500);
        System.out.println();
        txn.withdraw(200, "1234");
        System.out.println();
        txn.withdraw(300, "0000");
    }
}
```

---

## üíª Example 3: Local Inner Class

```java
class Calculator {
    void calculate(int a, int b) {
        System.out.println("=== Calculator ===");
        
        // Local inner class inside method
        class MathOperations {
            int add() {
                return a + b;
            }
            
            int multiply() {
                return a * b;
            }
            
            int subtract() {
                return a - b;
            }
            
            double divide() {
                return (double) a / b;
            }
        }
        
        // Create and use local inner class
        MathOperations ops = new MathOperations();
        System.out.println("Add: " + ops.add());
        System.out.println("Subtract: " + ops.subtract());
        System.out.println("Multiply: " + ops.multiply());
        System.out.println("Divide: " + ops.divide());
    }
    
    void processData(String data) {
        // Local inner class can access method parameters
        class DataProcessor {
            void process() {
                System.out.println("Processing: " + data.toUpperCase());
            }
        }
        
        DataProcessor processor = new DataProcessor();
        processor.process();
    }
}

public class LocalInnerDemo {
    public static void main(String[] args) {
        Calculator calc = new Calculator();
        calc.calculate(10, 5);
        
        System.out.println();
        calc.processData("hello world");
    }
}
```

---

## üíª Example 4: Static Nested Class

```java
class OuterClass {
    private int outerInstance = 10;
    private static int outerStatic = 20;
    
    // Static nested class
    static class StaticNested {
        int nestedVar = 30;
        static int nestedStatic = 40;
        
        void display() {
            System.out.println("Static nested class method");
            // Can access only static members of outer class
            System.out.println("Outer static: " + outerStatic);
            // System.out.println(outerInstance);  // ERROR!
            
            // Must create outer class object to access instance members
            OuterClass outer = new OuterClass();
            System.out.println("Outer instance via object: " + outer.outerInstance);
        }
        
        static void staticMethod() {
            System.out.println("Static method in nested class");
            System.out.println("Outer static: " + outerStatic);
        }
    }
    
    void outerMethod() {
        // Outer class can access nested class
        StaticNested nested = new StaticNested();
        nested.display();
    }
}

public class StaticNestedDemo {
    public static void main(String[] args) {
        // Create static nested class without outer class instance
        OuterClass.StaticNested nested = new OuterClass.StaticNested();
        nested.display();
        
        System.out.println("\nStatic method:");
        OuterClass.StaticNested.staticMethod();
        
        System.out.println("\nAccessing from outer:");
        OuterClass outer = new OuterClass();
        outer.outerMethod();
    }
}
```

---

## üíª Example 5: LinkedList Implementation

```java
class LinkedList {
    // Private inner class for Node
    private class Node {
        int data;
        Node next;
        
        Node(int data) {
            this.data = data;
            this.next = null;
        }
    }
    
    private Node head;
    private int size;
    
    LinkedList() {
        head = null;
        size = 0;
    }
    
    void add(int data) {
        Node newNode = new Node(data);
        if (head == null) {
            head = newNode;
        } else {
            Node current = head;
            while (current.next != null) {
                current = current.next;
            }
            current.next = newNode;
        }
        size++;
    }
    
    void display() {
        if (head == null) {
            System.out.println("List is empty");
            return;
        }
        Node current = head;
        System.out.print("List: ");
        while (current != null) {
            System.out.print(current.data + " -> ");
            current = current.next;
        }
        System.out.println("null");
    }
    
    int getSize() {
        return size;
    }
}

public class LinkedListDemo {
    public static void main(String[] args) {
        LinkedList list = new LinkedList();
        
        list.add(10);
        list.add(20);
        list.add(30);
        list.add(40);
        
        list.display();
        System.out.println("Size: " + list.getSize());
    }
}
```

---

## üíª Example 6: Iterator Pattern

```java
class MyCollection {
    private int[] items = new int[10];
    private int count = 0;
    
    void add(int item) {
        if (count < items.length) {
            items[count++] = item;
        }
    }
    
    // Inner class implementing Iterator
    class Iterator {
        private int index = 0;
        
        boolean hasNext() {
            return index < count;
        }
        
        int next() {
            if (hasNext()) {
                return items[index++];
            }
            throw new RuntimeException("No more elements");
        }
        
        void reset() {
            index = 0;
        }
    }
    
    Iterator getIterator() {
        return new Iterator();
    }
}

public class IteratorDemo {
    public static void main(String[] args) {
        MyCollection collection = new MyCollection();
        collection.add(10);
        collection.add(20);
        collection.add(30);
        collection.add(40);
        collection.add(50);
        
        MyCollection.Iterator iterator = collection.getIterator();
        
        System.out.print("Items: ");
        while (iterator.hasNext()) {
            System.out.print(iterator.next() + " ");
        }
        System.out.println();
        
        // Reset and iterate again
        iterator.reset();
        System.out.print("Again: ");
        while (iterator.hasNext()) {
            System.out.print(iterator.next() + " ");
        }
    }
}
```

---

## üíª Example 7: Event Handling Pattern

```java
class Button {
    private String label;
    
    Button(String label) {
        this.label = label;
    }
    
    // Inner interface
    interface ClickListener {
        void onClick();
    }
    
    private ClickListener listener;
    
    void setClickListener(ClickListener listener) {
        this.listener = listener;
    }
    
    void click() {
        System.out.println("Button '" + label + "' clicked");
        if (listener != null) {
            listener.onClick();
        }
    }
}

class Application {
    void setupButtons() {
        Button submitButton = new Button("Submit");
        Button cancelButton = new Button("Cancel");
        
        // Inner class implementing listener
        class SubmitListener implements Button.ClickListener {
            @Override
            public void onClick() {
                System.out.println("  -> Form submitted!");
            }
        }
        
        class CancelListener implements Button.ClickListener {
            @Override
            public void onClick() {
                System.out.println("  -> Action cancelled!");
            }
        }
        
        submitButton.setClickListener(new SubmitListener());
        cancelButton.setClickListener(new CancelListener());
        
        submitButton.click();
        cancelButton.click();
    }
}

public class EventHandlingDemo {
    public static void main(String[] args) {
        Application app = new Application();
        app.setupButtons();
    }
}
```

---

## üíª Example 8: Multiple Inner Classes

```java
class Computer {
    private String brand;
    
    Computer(String brand) {
        this.brand = brand;
    }
    
    // First inner class
    class Processor {
        String model;
        int cores;
        
        Processor(String model, int cores) {
            this.model = model;
            this.cores = cores;
        }
        
        void displayInfo() {
            System.out.println("Computer: " + brand);
            System.out.println("Processor: " + model);
            System.out.println("Cores: " + cores);
        }
    }
    
    // Second inner class
    class Memory {
        int sizeGB;
        String type;
        
        Memory(int sizeGB, String type) {
            this.sizeGB = sizeGB;
            this.type = type;
        }
        
        void displayInfo() {
            System.out.println("Computer: " + brand);
            System.out.println("Memory: " + sizeGB + "GB " + type);
        }
    }
    
    // Third inner class
    class Storage {
        int capacityGB;
        String type;
        
        Storage(int capacityGB, String type) {
            this.capacityGB = capacityGB;
            this.type = type;
        }
        
        void displayInfo() {
            System.out.println("Computer: " + brand);
            System.out.println("Storage: " + capacityGB + "GB " + type);
        }
    }
}

public class MultipleInnerDemo {
    public static void main(String[] args) {
        Computer computer = new Computer("Dell");
        
        Computer.Processor processor = computer.new Processor("Intel i7", 8);
        Computer.Memory memory = computer.new Memory(16, "DDR4");
        Computer.Storage storage = computer.new Storage(512, "SSD");
        
        processor.displayInfo();
        System.out.println();
        memory.displayInfo();
        System.out.println();
        storage.displayInfo();
    }
}
```

---

## üíª Example 9: Inner Class with this Reference

```java
class Outer {
    private int x = 10;
    
    class Inner {
        private int x = 20;
        
        void display(int x) {
            System.out.println("Parameter x: " + x);
            System.out.println("Inner class x: " + this.x);
            System.out.println("Outer class x: " + Outer.this.x);
        }
        
        void accessOuter() {
            // Access outer class members
            System.out.println("Accessing outer: " + Outer.this.x);
            Outer.this.outerMethod();
        }
    }
    
    void outerMethod() {
        System.out.println("Outer class method");
    }
    
    void test() {
        Inner inner = new Inner();
        inner.display(30);
        System.out.println();
        inner.accessOuter();
    }
}

public class ThisReferenceDemo {
    public static void main(String[] args) {
        Outer outer = new Outer();
        outer.test();
    }
}
```

---

## üíª Example 10: Real-World Example - GUI Components

```java
class Window {
    private String title;
    private int width;
    private int height;
    
    Window(String title, int width, int height) {
        this.title = title;
        this.width = width;
        this.height = height;
    }
    
    class Panel {
        private String panelName;
        
        Panel(String panelName) {
            this.panelName = panelName;
        }
        
        class Button {
            private String buttonText;
            
            Button(String buttonText) {
                this.buttonText = buttonText;
            }
            
            void display() {
                System.out.println("Window: " + title + " (" + width + "x" + height + ")");
                System.out.println("  Panel: " + panelName);
                System.out.println("    Button: " + buttonText);
            }
        }
        
        Button createButton(String text) {
            return new Button(text);
        }
    }
    
    Panel createPanel(String name) {
        return new Panel(name);
    }
}

public class GUIDemo {
    public static void main(String[] args) {
        Window window = new Window("My Application", 800, 600);
        
        Window.Panel mainPanel = window.createPanel("Main Panel");
        Window.Panel.Button submitBtn = mainPanel.createButton("Submit");
        Window.Panel.Button cancelBtn = mainPanel.createButton("Cancel");
        
        submitBtn.display();
        System.out.println();
        cancelBtn.display();
    }
}
```

---

## üìä Inner Class Types Comparison

| Feature | Member Inner | Local Inner | Static Nested | Anonymous |
|---------|-------------|-------------|---------------|-----------|
| **Where defined** | Inside class | Inside method/block | Inside class (static) | Expression |
| **Access outer instance** | ‚úÖ Yes | ‚úÖ Yes | ‚ùå No | ‚úÖ Yes |
| **Access outer static** | ‚úÖ Yes | ‚úÖ Yes | ‚úÖ Yes | ‚úÖ Yes |
| **Can be static** | ‚ùå No | ‚ùå No | ‚úÖ Yes | ‚ùå No |
| **Scope** | Class level | Method/block level | Class level | Expression level |
| **Creation** | `outer.new Inner()` | Inside method only | `new Outer.Nested()` | In-place |

---

## üí° Best Practices

1. ‚úÖ **Use inner classes for helper classes**
   ```java
   class LinkedList {
       private class Node { }
   }
   ```

2. ‚úÖ **Use static nested for grouping**
   ```java
   class Car {
       static class Engine { }
   }
   ```

3. ‚úÖ **Keep inner classes small and focused**
   ```java
   class Iterator {
       // Simple iteration logic only
   }
   ```

4. ‚úÖ **Use for event handlers**
   ```java
   button.setListener(new ClickListener() { });
   ```

5. ‚úÖ **Private inner classes for encapsulation**
   ```java
   private class InternalHelper { }
   ```

---

## ‚ö†Ô∏è Common Pitfalls

```java
public class InnerClassPitfalls {
    // 1. Non-static inner class cannot have static members
    class Inner {
        // static int x = 10;  // ERROR!
        static final int CONSTANT = 10;  // OK - constant
    }
    
    // 2. Cannot create inner class without outer instance
    // Inner inner = new Inner();  // ERROR in static context
    
    // 3. Memory leak - inner class holds outer reference
    class OuterClass {
        class InnerClass {
            // Holds implicit reference to OuterClass
        }
    }
    
    // 4. Local inner class cannot access non-final local variables (before Java 8)
    void method() {
        int x = 10;  // Effectively final
        class Local {
            void display() {
                System.out.println(x);  // OK
            }
        }
    }
}
```

---

## üéØ Interview Questions

1. **What is an inner class?**
2. **Types of inner classes in Java?**
3. **Difference between inner class and nested class?**
4. **Can inner class access outer class private members?**
5. **What is member inner class?**
6. **What is local inner class?**
7. **What is static nested class?**
8. **Can we have static members in inner class?**
9. **How to create inner class object?**
10. **What is anonymous inner class?**
11. **Why use inner classes?**
12. **Can outer class access inner class private members?**
13. **What is Outer.this reference?**
14. **Memory implications of inner classes?**
15. **Real-world use cases of inner classes?**

---

## üìö Related Topics

- [Anonymous Classes](04.%20Anonymous%20Classes.md)
- [Static Keyword](01.%20Static%20Keyword.md)
- [Access Modifiers](06.%20Access%20Modifiers.md)
- [this & super Keywords](07.%20this%20%26%20super%20Keywords.md)
- [Classes & Objects](../02.%20Object-Oriented%20Programming/01.%20Classes%20%26%20Objects.md)
