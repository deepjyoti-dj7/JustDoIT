# ğŸ”’ Static Keyword

## ğŸ“– Overview

The **static** keyword in Java is used for memory management. When a member is declared static, it belongs to the class rather than to any specific instance of the class.

**Key Points:**
- Static members are shared among all instances
- Loaded when class is loaded (before object creation)
- Can be accessed without creating object
- Memory allocated only once
- Used for: variables, methods, blocks, nested classes

---

## ğŸ¯ Static Variable (Class Variable)

```java
class Counter {
    static int count = 0;  // Static variable (shared)
    int instance = 0;       // Instance variable (per object)
    
    Counter() {
        count++;
        instance++;
    }
}
```

---

## ğŸ’» Example 1: Static vs Instance Variables

```java
class Student {
    String name;           // Instance variable
    int rollNo;            // Instance variable
    static String college = "MIT";  // Static variable (shared)
    static int totalStudents = 0;   // Static variable
    
    Student(String name, int rollNo) {
        this.name = name;
        this.rollNo = rollNo;
        totalStudents++;
    }
    
    void display() {
        System.out.println("Name: " + name);
        System.out.println("Roll No: " + rollNo);
        System.out.println("College: " + college);
    }
}

public class StaticVariableDemo {
    public static void main(String[] args) {
        System.out.println("Initial total: " + Student.totalStudents);
        
        Student s1 = new Student("Alice", 101);
        Student s2 = new Student("Bob", 102);
        Student s3 = new Student("Charlie", 103);
        
        System.out.println("\nTotal students: " + Student.totalStudents);
        
        s1.display();
        System.out.println();
        s2.display();
        
        // Changing static variable affects all objects
        Student.college = "Harvard";
        System.out.println("\nAfter changing college:");
        s1.display();
    }
}
```

**Output:**
```
Initial total: 0

Total students: 3
Name: Alice
Roll No: 101
College: MIT

Name: Bob
Roll No: 102
College: MIT

After changing college:
Name: Alice
Roll No: 101
College: Harvard
```

---

## ğŸ’» Example 2: Static Methods

```java
class Calculator {
    // Static method - no need to create object
    static int add(int a, int b) {
        return a + b;
    }
    
    static int multiply(int a, int b) {
        return a * b;
    }
    
    static double square(double n) {
        return n * n;
    }
    
    static double cube(double n) {
        return n * n * n;
    }
    
    // Static method can only access static members directly
    static int count = 0;
    
    static void incrementCount() {
        count++;
        // Cannot access instance members here
        // this.instanceVar = 10;  // ERROR!
    }
}

public class StaticMethodDemo {
    public static void main(String[] args) {
        // Call static methods without creating object
        System.out.println("5 + 3 = " + Calculator.add(5, 3));
        System.out.println("5 * 3 = " + Calculator.multiply(5, 3));
        System.out.println("Square of 4 = " + Calculator.square(4));
        System.out.println("Cube of 3 = " + Calculator.cube(3));
        
        Calculator.incrementCount();
        Calculator.incrementCount();
        System.out.println("Count: " + Calculator.count);
    }
}
```

---

## ğŸ’» Example 3: Static Block

```java
class Database {
    static String url;
    static String username;
    static String password;
    static boolean initialized;
    
    // Static block - executed when class is loaded
    static {
        System.out.println("Static block 1: Loading database configuration...");
        url = "jdbc:mysql://localhost:3306/mydb";
        username = "admin";
        password = "secret";
    }
    
    // Multiple static blocks execute in order
    static {
        System.out.println("Static block 2: Initializing connection pool...");
        initialized = true;
    }
    
    static void displayConfig() {
        System.out.println("URL: " + url);
        System.out.println("Username: " + username);
        System.out.println("Initialized: " + initialized);
    }
}

public class StaticBlockDemo {
    public static void main(String[] args) {
        System.out.println("Main method started\n");
        
        // Static blocks execute before this
        Database.displayConfig();
        
        System.out.println("\nCreating Database object...");
        Database db = new Database();
    }
}
```

**Output:**
```
Static block 1: Loading database configuration...
Static block 2: Initializing connection pool...
Main method started

URL: jdbc:mysql://localhost:3306/mydb
Username: admin
Initialized: true

Creating Database object...
```

---

## ğŸ’» Example 4: Static Context Restrictions

```java
class Demo {
    int instanceVar = 10;
    static int staticVar = 20;
    
    // Instance method - can access both static and instance members
    void instanceMethod() {
        System.out.println("Instance var: " + instanceVar);
        System.out.println("Static var: " + staticVar);
        staticMethod();  // Can call static method
    }
    
    // Static method - can only access static members directly
    static void staticMethod() {
        System.out.println("Static var: " + staticVar);
        // System.out.println("Instance var: " + instanceVar);  // ERROR!
        // instanceMethod();  // ERROR!
        
        // Must create object to access instance members
        Demo obj = new Demo();
        System.out.println("Instance var via object: " + obj.instanceVar);
        obj.instanceMethod();
    }
}

public class StaticContextDemo {
    public static void main(String[] args) {
        System.out.println("=== Calling static method ===");
        Demo.staticMethod();
        
        System.out.println("\n=== Calling instance method ===");
        Demo obj = new Demo();
        obj.instanceMethod();
    }
}
```

---

## ğŸ’» Example 5: Counter Example

```java
class PageVisit {
    String pageName;
    static int totalVisits = 0;
    static int totalPages = 0;
    int pageVisits = 0;
    
    PageVisit(String pageName) {
        this.pageName = pageName;
        totalPages++;
    }
    
    void visit() {
        pageVisits++;
        totalVisits++;
    }
    
    void displayStats() {
        System.out.println("Page: " + pageName);
        System.out.println("Page visits: " + pageVisits);
        System.out.println("Total visits: " + totalVisits);
    }
    
    static void displayGlobalStats() {
        System.out.println("Total pages: " + totalPages);
        System.out.println("Total visits: " + totalVisits);
    }
}

public class CounterDemo {
    public static void main(String[] args) {
        PageVisit home = new PageVisit("Home");
        PageVisit about = new PageVisit("About");
        PageVisit contact = new PageVisit("Contact");
        
        home.visit();
        home.visit();
        home.visit();
        
        about.visit();
        about.visit();
        
        contact.visit();
        
        System.out.println("=== Individual Page Stats ===");
        home.displayStats();
        System.out.println();
        about.displayStats();
        
        System.out.println("\n=== Global Stats ===");
        PageVisit.displayGlobalStats();
    }
}
```

---

## ğŸ’» Example 6: Singleton Pattern with Static

```java
class DatabaseConnection {
    private static DatabaseConnection instance;
    private String connectionString;
    private static int connectionCount = 0;
    
    // Private constructor prevents external instantiation
    private DatabaseConnection() {
        connectionString = "jdbc:mysql://localhost:3306/mydb";
        connectionCount++;
        System.out.println("Database connection created: " + connectionCount);
    }
    
    // Static method to get single instance
    public static DatabaseConnection getInstance() {
        if (instance == null) {
            instance = new DatabaseConnection();
        }
        return instance;
    }
    
    public void connect() {
        System.out.println("Connected to: " + connectionString);
    }
    
    public static int getConnectionCount() {
        return connectionCount;
    }
}

public class SingletonDemo {
    public static void main(String[] args) {
        // Cannot create object directly
        // DatabaseConnection db = new DatabaseConnection();  // ERROR!
        
        DatabaseConnection db1 = DatabaseConnection.getInstance();
        db1.connect();
        
        DatabaseConnection db2 = DatabaseConnection.getInstance();
        db2.connect();
        
        DatabaseConnection db3 = DatabaseConnection.getInstance();
        db3.connect();
        
        System.out.println("\nConnection count: " + DatabaseConnection.getConnectionCount());
        System.out.println("db1 == db2: " + (db1 == db2));
        System.out.println("db2 == db3: " + (db2 == db3));
    }
}
```

---

## ğŸ’» Example 7: Static Utility Class

```java
class StringUtils {
    // Private constructor to prevent instantiation
    private StringUtils() {
        throw new AssertionError("Utility class cannot be instantiated");
    }
    
    static String reverse(String str) {
        return new StringBuilder(str).reverse().toString();
    }
    
    static boolean isPalindrome(String str) {
        String reversed = reverse(str);
        return str.equals(reversed);
    }
    
    static int countVowels(String str) {
        int count = 0;
        String vowels = "aeiouAEIOU";
        for (char c : str.toCharArray()) {
            if (vowels.indexOf(c) != -1) {
                count++;
            }
        }
        return count;
    }
    
    static String capitalize(String str) {
        if (str == null || str.isEmpty()) {
            return str;
        }
        return str.substring(0, 1).toUpperCase() + str.substring(1).toLowerCase();
    }
}

public class UtilityClassDemo {
    public static void main(String[] args) {
        String text = "hello";
        
        System.out.println("Original: " + text);
        System.out.println("Reversed: " + StringUtils.reverse(text));
        System.out.println("Is palindrome: " + StringUtils.isPalindrome(text));
        System.out.println("Vowels: " + StringUtils.countVowels(text));
        System.out.println("Capitalized: " + StringUtils.capitalize(text));
        
        System.out.println();
        
        String palindrome = "madam";
        System.out.println("'" + palindrome + "' is palindrome: " + 
                         StringUtils.isPalindrome(palindrome));
    }
}
```

---

## ğŸ’» Example 8: Static Import

```java
// Using static import
import static java.lang.Math.*;
import static java.lang.System.out;

class MathOperations {
    static double calculateCircleArea(double radius) {
        return PI * radius * radius;  // No need for Math.PI
    }
    
    static double calculateDistance(double x1, double y1, double x2, double y2) {
        return sqrt(pow(x2 - x1, 2) + pow(y2 - y1, 2));
    }
}

public class StaticImportDemo {
    public static void main(String[] args) {
        // Using static import for System.out
        out.println("Circle area (radius=5): " + 
                   MathOperations.calculateCircleArea(5));
        
        // Using static import for Math methods
        out.println("Square root of 16: " + sqrt(16));
        out.println("Max of 10 and 20: " + max(10, 20));
        
        double dist = MathOperations.calculateDistance(0, 0, 3, 4);
        out.println("Distance: " + dist);
    }
}
```

---

## ğŸ’» Example 9: Static Nested Class

```java
class OuterClass {
    static String outerStatic = "Outer Static";
    String outerInstance = "Outer Instance";
    
    // Static nested class
    static class StaticNested {
        void display() {
            System.out.println("Inside static nested class");
            System.out.println("Can access: " + outerStatic);
            
            // Cannot access instance members directly
            // System.out.println(outerInstance);  // ERROR!
            
            // Must create outer class object
            OuterClass outer = new OuterClass();
            System.out.println("Via object: " + outer.outerInstance);
        }
    }
    
    void outerMethod() {
        // Create static nested class object
        StaticNested nested = new StaticNested();
        nested.display();
    }
}

public class StaticNestedDemo {
    public static void main(String[] args) {
        // Create static nested class without outer class object
        OuterClass.StaticNested nested = new OuterClass.StaticNested();
        nested.display();
        
        System.out.println();
        
        OuterClass outer = new OuterClass();
        outer.outerMethod();
    }
}
```

---

## ğŸ’» Example 10: Memory Management

```java
class Employee {
    int id;
    String name;
    static String company = "TechCorp";
    static int employeeCount = 0;
    
    Employee(int id, String name) {
        this.id = id;
        this.name = name;
        employeeCount++;
    }
    
    void display() {
        System.out.println("ID: " + id + ", Name: " + name + 
                         ", Company: " + company);
    }
    
    static void displayEmployeeCount() {
        System.out.println("Total employees: " + employeeCount);
    }
}

public class MemoryManagementDemo {
    public static void main(String[] args) {
        System.out.println("Before creating objects:");
        System.out.println("Company: " + Employee.company);
        Employee.displayEmployeeCount();
        
        System.out.println("\nCreating employees...");
        Employee e1 = new Employee(101, "Alice");
        Employee e2 = new Employee(102, "Bob");
        Employee e3 = new Employee(103, "Charlie");
        
        System.out.println("\nEmployee details:");
        e1.display();
        e2.display();
        e3.display();
        
        System.out.println();
        Employee.displayEmployeeCount();
        
        // Static variable shared - single copy in memory
        Employee.company = "MegaCorp";
        System.out.println("\nAfter company change:");
        e1.display();
        e2.display();
    }
}
```

---

## ğŸ“Š Static vs Instance Members

| Feature | Static Member | Instance Member |
|---------|--------------|-----------------|
| **Belongs to** | Class | Object |
| **Memory allocation** | Once (when class loads) | Per object |
| **Access** | ClassName.member | object.member |
| **Shared** | Yes (all objects) | No (per object) |
| **Can access** | Only static members | Both static & instance |
| **this keyword** | âŒ Not available | âœ… Available |
| **Loaded** | Class loading time | Object creation time |

---

## ğŸ“Š Memory Allocation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Method Area (Static)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - Static variables (one copy)      â”‚
â”‚  - Static methods                   â”‚
â”‚  - Class metadata                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Heap Memory              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Object 1:                          â”‚
â”‚  - Instance variables               â”‚
â”‚                                     â”‚
â”‚  Object 2:                          â”‚
â”‚  - Instance variables               â”‚
â”‚                                     â”‚
â”‚  Object 3:                          â”‚
â”‚  - Instance variables               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ Best Practices

1. âœ… **Use static for utility methods**
   ```java
   class MathUtils {
       static int max(int a, int b) { }
   }
   ```

2. âœ… **Use static for constants**
   ```java
   class Constants {
       static final double PI = 3.14159;
   }
   ```

3. âœ… **Use static blocks for complex initialization**
   ```java
   static {
       // Initialize static variables
   }
   ```

4. âœ… **Access static members via class name**
   ```java
   Calculator.add(5, 3);  // Good
   // calc.add(5, 3);     // Works but confusing
   ```

5. âœ… **Use static for singleton pattern**
   ```java
   private static Instance instance;
   ```

---

## âš ï¸ Common Pitfalls

```java
public class StaticPitfalls {
    // 1. Cannot use 'this' in static context
    static void method() {
        // this.someMethod();  // ERROR!
    }
    
    // 2. Cannot access instance members from static
    int instanceVar = 10;
    static void staticMethod() {
        // System.out.println(instanceVar);  // ERROR!
    }
    
    // 3. Static methods cannot be overridden (hidden instead)
    static class Parent {
        static void display() {
            System.out.println("Parent");
        }
    }
    static class Child extends Parent {
        static void display() {  // Hides, not overrides
            System.out.println("Child");
        }
    }
    
    // 4. Order of initialization matters
    static int a = b + 1;  // Works if b declared after
    static int b = 10;
}
```

---

## ğŸ¯ Interview Questions

1. **What is static keyword in Java?**
2. **What are static variables?**
3. **What are static methods?**
4. **What is static block?**
5. **Can we override static methods?**
6. **Can static methods be overloaded?**
7. **Why main method is static?**
8. **Can we have static constructors?**
9. **What is static import?**
10. **What are static nested classes?**
11. **Can we use 'this' in static method?**
12. **Difference between static and instance members?**
13. **When is static block executed?**
14. **Can we change value of static final variable?**
15. **What happens when static variable is modified?**

---

## ğŸ“š Related Topics

- [Final Keyword](02.%20Final%20Keyword.md)
- [Access Modifiers](06.%20Access%20Modifiers.md)
- [Inner Classes](03.%20Inner%20Classes.md)
- [this & super Keywords](07.%20this%20%26%20super%20Keywords.md)
- [Classes & Objects](../02.%20Object-Oriented%20Programming/01.%20Classes%20%26%20Objects.md)
