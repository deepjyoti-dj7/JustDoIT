# üéØ Predicate Interface

## üìñ Overview

**Predicate** is a functional interface that represents a boolean-valued function of one argument. It's used for testing conditions and filtering data.

**Method Signature:** `boolean test(T t)`

**Package:** `java.util.function`

**Introduced in:** Java 8 (2014)

---

## üéØ Key Methods

| Method | Description | Example |
|--------|-------------|---------|
| `test(T t)` | Tests the predicate | `predicate.test(value)` |
| `and(Predicate)` | Logical AND | `p1.and(p2)` |
| `or(Predicate)` | Logical OR | `p1.or(p2)` |
| `negate()` | Logical NOT | `p1.negate()` |
| `isEqual(Object)` | Equality predicate | `Predicate.isEqual(target)` |

---

## üíª Example 1: Basic Predicate

```java
import java.util.function.Predicate;

public class BasicPredicate {
    public static void main(String[] args) {
        System.out.println("=== Basic Predicate ===\n");
        
        // Number predicates
        Predicate<Integer> isPositive = n -> n > 0;
        Predicate<Integer> isEven = n -> n % 2 == 0;
        Predicate<Integer> isGreaterThan10 = n -> n > 10;
        
        int num = 12;
        System.out.println(num + " is positive: " + isPositive.test(num));
        System.out.println(num + " is even: " + isEven.test(num));
        System.out.println(num + " is > 10: " + isGreaterThan10.test(num));
        
        // String predicates
        Predicate<String> isEmpty = String::isEmpty;
        Predicate<String> startsWithA = s -> s.startsWith("A");
        Predicate<String> hasMinLength = s -> s.length() >= 5;
        
        String text = "Alice";
        System.out.println("\n'" + text + "' is empty: " + isEmpty.test(text));
        System.out.println("'" + text + "' starts with A: " + startsWithA.test(text));
        System.out.println("'" + text + "' length >= 5: " + hasMinLength.test(text));
    }
}
```

**Output:**
```
=== Basic Predicate ===

12 is positive: true
12 is even: true
12 is > 10: true

'Alice' is empty: false
'Alice' starts with A: true
'Alice' length >= 5: true
```

---

## üíª Example 2: Combining Predicates

```java
import java.util.*;
import java.util.function.Predicate;

public class CombiningPredicates {
    public static void main(String[] args) {
        System.out.println("=== Combining Predicates ===\n");
        
        Predicate<Integer> isEven = n -> n % 2 == 0;
        Predicate<Integer> isPositive = n -> n > 0;
        Predicate<Integer> isGreaterThan10 = n -> n > 10;
        
        // AND: both conditions must be true
        Predicate<Integer> isEvenAndPositive = isEven.and(isPositive);
        System.out.println("8 is even AND positive: " + isEvenAndPositive.test(8));
        System.out.println("-4 is even AND positive: " + isEvenAndPositive.test(-4));
        
        // OR: at least one condition must be true
        Predicate<Integer> isEvenOrGreaterThan10 = isEven.or(isGreaterThan10);
        System.out.println("\n7 is even OR > 10: " + isEvenOrGreaterThan10.test(7));
        System.out.println("15 is even OR > 10: " + isEvenOrGreaterThan10.test(15));
        System.out.println("4 is even OR > 10: " + isEvenOrGreaterThan10.test(4));
        
        // NEGATE: opposite of the condition
        Predicate<Integer> isOdd = isEven.negate();
        System.out.println("\n5 is odd: " + isOdd.test(5));
        System.out.println("6 is odd: " + isOdd.test(6));
        
        // Complex combination
        Predicate<Integer> complex = isEven.and(isPositive).and(isGreaterThan10);
        System.out.println("\n12 is even, positive, and > 10: " + complex.test(12));
        System.out.println("8 is even, positive, and > 10: " + complex.test(8));
    }
}
```

---

## üíª Example 3: Predicate with Collections

```java
import java.util.*;
import java.util.function.Predicate;
import java.util.stream.Collectors;

public class PredicateWithCollections {
    public static void main(String[] args) {
        System.out.println("=== Predicate with Collections ===\n");
        
        List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
        
        // Filter even numbers
        Predicate<Integer> isEven = n -> n % 2 == 0;
        List<Integer> evens = numbers.stream()
                                     .filter(isEven)
                                     .collect(Collectors.toList());
        System.out.println("Even numbers: " + evens);
        
        // Filter numbers > 5
        List<Integer> greaterThan5 = numbers.stream()
                                            .filter(n -> n > 5)
                                            .collect(Collectors.toList());
        System.out.println("Numbers > 5: " + greaterThan5);
        
        // Multiple filters
        List<Integer> evenAndGreaterThan5 = numbers.stream()
                                                   .filter(isEven)
                                                   .filter(n -> n > 5)
                                                   .collect(Collectors.toList());
        System.out.println("Even and > 5: " + evenAndGreaterThan5);
        
        // String filtering
        List<String> names = Arrays.asList("Alice", "Bob", "Andrew", "Charlie", "Anna");
        Predicate<String> startsWithA = s -> s.startsWith("A");
        
        List<String> aNames = names.stream()
                                   .filter(startsWithA)
                                   .collect(Collectors.toList());
        System.out.println("\nNames starting with A: " + aNames);
    }
}
```

---

## üíª Example 4: Custom Object Filtering

```java
import java.util.*;
import java.util.function.Predicate;
import java.util.stream.Collectors;

class Employee {
    String name;
    int age;
    double salary;
    
    Employee(String name, int age, double salary) {
        this.name = name;
        this.age = age;
        this.salary = salary;
    }
    
    @Override
    public String toString() {
        return String.format("%s (Age: %d, Salary: $%.0f)", name, age, salary);
    }
}

public class CustomObjectPredicate {
    public static void main(String[] args) {
        System.out.println("=== Custom Object Filtering ===\n");
        
        List<Employee> employees = Arrays.asList(
            new Employee("Alice", 30, 75000),
            new Employee("Bob", 25, 65000),
            new Employee("Charlie", 35, 85000),
            new Employee("David", 28, 70000),
            new Employee("Eve", 32, 90000)
        );
        
        // Predicates for employees
        Predicate<Employee> isYoung = e -> e.age < 30;
        Predicate<Employee> highSalary = e -> e.salary > 70000;
        Predicate<Employee> seniorHighPaid = e -> e.age >= 30 && e.salary > 80000;
        
        System.out.println("Young employees (< 30):");
        employees.stream()
                .filter(isYoung)
                .forEach(System.out::println);
        
        System.out.println("\nHigh salary (> 70000):");
        employees.stream()
                .filter(highSalary)
                .forEach(System.out::println);
        
        System.out.println("\nSenior high-paid (age >= 30 AND salary > 80000):");
        employees.stream()
                .filter(seniorHighPaid)
                .forEach(System.out::println);
    }
}
```

---

## üíª Example 5: BiPredicate

```java
import java.util.function.BiPredicate;

public class BiPredicateExample {
    public static void main(String[] args) {
        System.out.println("=== BiPredicate (Two Parameters) ===\n");
        
        // BiPredicate with two integers
        BiPredicate<Integer, Integer> isGreater = (a, b) -> a > b;
        BiPredicate<Integer, Integer> isEqual = (a, b) -> a.equals(b);
        BiPredicate<Integer, Integer> isSumEven = (a, b) -> (a + b) % 2 == 0;
        
        System.out.println("10 > 5: " + isGreater.test(10, 5));
        System.out.println("5 == 5: " + isEqual.test(5, 5));
        System.out.println("3 + 5 is even: " + isSumEven.test(3, 5));
        
        // BiPredicate with strings
        BiPredicate<String, String> startsWith = (str, prefix) -> str.startsWith(prefix);
        BiPredicate<String, Integer> hasMinLength = (str, len) -> str.length() >= len;
        
        System.out.println("\n'Hello' starts with 'He': " + startsWith.test("Hello", "He"));
        System.out.println("'Lambda' length >= 5: " + hasMinLength.test("Lambda", 5));
        
        // Combining BiPredicates
        BiPredicate<Integer, Integer> bothPositive = 
            ((BiPredicate<Integer, Integer>) (a, b) -> a > 0).and((a, b) -> b > 0);
        
        System.out.println("\n5, 10 both positive: " + bothPositive.test(5, 10));
        System.out.println("-5, 10 both positive: " + bothPositive.test(-5, 10));
    }
}
```

---

## üíª Example 6: IntPredicate (Primitive Specialization)

```java
import java.util.function.*;
import java.util.stream.IntStream;

public class PrimitivePredicates {
    public static void main(String[] args) {
        System.out.println("=== Primitive Predicates ===\n");
        
        // IntPredicate - avoids boxing/unboxing
        IntPredicate isEven = n -> n % 2 == 0;
        IntPredicate isPositive = n -> n > 0;
        IntPredicate isPrime = n -> {
            if (n <= 1) return false;
            for (int i = 2; i <= Math.sqrt(n); i++) {
                if (n % i == 0) return false;
            }
            return true;
        };
        
        System.out.println("4 is even: " + isEven.test(4));
        System.out.println("7 is prime: " + isPrime.test(7));
        
        // LongPredicate
        LongPredicate isLarge = n -> n > 1000000L;
        System.out.println("\n2000000L is large: " + isLarge.test(2000000L));
        
        // DoublePredicate
        DoublePredicate isPositiveDouble = d -> d > 0.0;
        System.out.println("3.14 is positive: " + isPositiveDouble.test(3.14));
        
        // Using with IntStream
        System.out.println("\nEven numbers from 1-10:");
        IntStream.rangeClosed(1, 10)
                .filter(isEven)
                .forEach(n -> System.out.print(n + " "));
        
        System.out.println("\n\nPrime numbers from 1-20:");
        IntStream.rangeClosed(1, 20)
                .filter(isPrime)
                .forEach(n -> System.out.print(n + " "));
    }
}
```

---

## üíª Example 7: Predicate Factory Methods

```java
import java.util.*;
import java.util.function.Predicate;

public class PredicateFactory {
    
    // Factory methods for creating predicates
    public static <T> Predicate<T> isNull() {
        return obj -> obj == null;
    }
    
    public static <T> Predicate<T> isNotNull() {
        return obj -> obj != null;
    }
    
    public static Predicate<String> hasLength(int length) {
        return str -> str != null && str.length() == length;
    }
    
    public static Predicate<String> containsSubstring(String substring) {
        return str -> str != null && str.contains(substring);
    }
    
    public static <T extends Comparable<T>> Predicate<T> isInRange(T min, T max) {
        return val -> val.compareTo(min) >= 0 && val.compareTo(max) <= 0;
    }
    
    public static void main(String[] args) {
        System.out.println("=== Predicate Factory Methods ===\n");
        
        List<String> strings = Arrays.asList("Hello", null, "World", "Java", null);
        
        // Using null checks
        System.out.println("Non-null strings:");
        strings.stream()
               .filter(isNotNull())
               .forEach(System.out::println);
        
        // Using length predicate
        System.out.println("\nStrings with length 5:");
        strings.stream()
               .filter(isNotNull())
               .filter(hasLength(5))
               .forEach(System.out::println);
        
        // Using substring predicate
        System.out.println("\nStrings containing 'a':");
        strings.stream()
               .filter(isNotNull())
               .filter(containsSubstring("a"))
               .forEach(System.out::println);
        
        // Using range predicate
        System.out.println("\nNumbers between 5 and 15:");
        List<Integer> numbers = Arrays.asList(3, 7, 10, 18, 5, 15, 20);
        numbers.stream()
               .filter(isInRange(5, 15))
               .forEach(n -> System.out.print(n + " "));
    }
}
```

---

## üíª Example 8: Predicate Chaining

```java
import java.util.*;
import java.util.function.Predicate;

public class PredicateChaining {
    public static void main(String[] args) {
        System.out.println("=== Predicate Chaining ===\n");
        
        List<String> words = Arrays.asList(
            "apple", "banana", "apricot", "blueberry", 
            "avocado", "cherry", "date"
        );
        
        // Build complex predicate through chaining
        Predicate<String> startsWithA = s -> s.startsWith("a");
        Predicate<String> longerThan5 = s -> s.length() > 5;
        Predicate<String> containsE = s -> s.contains("e");
        
        System.out.println("Words starting with 'a' AND longer than 5:");
        words.stream()
             .filter(startsWithA.and(longerThan5))
             .forEach(System.out::println);
        
        System.out.println("\nWords starting with 'a' OR containing 'e':");
        words.stream()
             .filter(startsWithA.or(containsE))
             .forEach(System.out::println);
        
        System.out.println("\nWords NOT starting with 'a':");
        words.stream()
             .filter(startsWithA.negate())
             .forEach(System.out::println);
        
        // Complex chain
        Predicate<String> complex = startsWithA
                                   .and(longerThan5)
                                   .and(containsE);
        
        System.out.println("\nWords: start with 'a' AND > 5 chars AND contain 'e':");
        words.stream()
             .filter(complex)
             .forEach(System.out::println);
    }
}
```

---

## üíª Example 9: Validation with Predicates

```java
import java.util.function.Predicate;
import java.util.*;

class Validator {
    public static Predicate<String> emailValidator = email -> 
        email != null && email.matches("^[A-Za-z0-9+_.-]+@(.+)$");
    
    public static Predicate<String> passwordValidator = password ->
        password != null && password.length() >= 8 && 
        password.matches(".*[A-Z].*") && 
        password.matches(".*[0-9].*");
    
    public static Predicate<Integer> ageValidator = age ->
        age != null && age >= 18 && age <= 100;
    
    public static Predicate<String> phoneValidator = phone ->
        phone != null && phone.matches("\\d{10}");
}

public class ValidationPredicates {
    public static void main(String[] args) {
        System.out.println("=== Validation with Predicates ===\n");
        
        // Email validation
        List<String> emails = Arrays.asList(
            "user@example.com",
            "invalid.email",
            "another@test.org",
            "@wrong.com"
        );
        
        System.out.println("Valid emails:");
        emails.stream()
              .filter(Validator.emailValidator)
              .forEach(System.out::println);
        
        // Password validation
        List<String> passwords = Arrays.asList(
            "Pass123",
            "weakpass",
            "Strong1Pass",
            "short1"
        );
        
        System.out.println("\nValid passwords:");
        passwords.stream()
                .filter(Validator.passwordValidator)
                .forEach(p -> System.out.println(p + " - Valid"));
        
        // Age validation
        List<Integer> ages = Arrays.asList(15, 25, 30, 105, 18, 50);
        
        System.out.println("\nValid ages:");
        ages.stream()
            .filter(Validator.ageValidator)
            .forEach(age -> System.out.print(age + " "));
    }
}
```

---

## üíª Example 10: Performance with Predicates

```java
import java.util.*;
import java.util.function.Predicate;

public class PredicatePerformance {
    
    public static void main(String[] args) {
        System.out.println("=== Predicate Performance ===\n");
        
        List<Integer> numbers = new ArrayList<>();
        for (int i = 1; i <= 100000; i++) {
            numbers.add(i);
        }
        
        // Separate predicates (multiple iterations)
        long start1 = System.nanoTime();
        List<Integer> result1 = new ArrayList<>();
        for (Integer n : numbers) {
            if (n % 2 == 0 && n > 50000 && n < 75000) {
                result1.add(n);
            }
        }
        long end1 = System.nanoTime();
        
        // Combined predicate
        Predicate<Integer> isEven = n -> n % 2 == 0;
        Predicate<Integer> inRange = n -> n > 50000 && n < 75000;
        Predicate<Integer> combined = isEven.and(inRange);
        
        long start2 = System.nanoTime();
        List<Integer> result2 = numbers.stream()
                                      .filter(combined)
                                      .toList();
        long end2 = System.nanoTime();
        
        System.out.println("Traditional approach: " + (end1 - start1) / 1000 + " Œºs");
        System.out.println("Predicate approach: " + (end2 - start2) / 1000 + " Œºs");
        System.out.println("Results match: " + result1.size() + " == " + result2.size());
        
        // Short-circuit evaluation
        System.out.println("\n=== Short-circuit Evaluation ===");
        
        Predicate<Integer> expensiveCheck = n -> {
            // Simulate expensive operation
            return n > 0;
        };
        
        Predicate<Integer> cheapCheck = n -> n % 2 == 0;
        
        // Good: cheap check first
        Predicate<Integer> optimized = cheapCheck.and(expensiveCheck);
        
        // Bad: expensive check first
        Predicate<Integer> notOptimized = expensiveCheck.and(cheapCheck);
        
        System.out.println("Place cheaper predicates first for better performance!");
    }
}
```

---

## üìä Predicate Variants

| Type | Method | Description | Example |
|------|--------|-------------|---------|
| Predicate\<T> | `boolean test(T t)` | Single parameter | `n -> n > 0` |
| BiPredicate<T,U> | `boolean test(T t, U u)` | Two parameters | `(a, b) -> a > b` |
| IntPredicate | `boolean test(int value)` | Primitive int | `n -> n % 2 == 0` |
| LongPredicate | `boolean test(long value)` | Primitive long | `n -> n > 1000L` |
| DoublePredicate | `boolean test(double value)` | Primitive double | `d -> d > 0.0` |

---

## üéØ Best Practices

| Practice | Description |
|----------|-------------|
| ‚úÖ Use descriptive names | `isEven` better than `p1` |
| ‚úÖ Combine with and/or/negate | Build complex conditions |
| ‚úÖ Use primitive versions | Better performance (IntPredicate, etc.) |
| ‚úÖ Short-circuit ordering | Place cheap checks first |
| ‚úÖ Reuse predicates | Define once, use multiple times |
| ‚úÖ Keep predicates pure | No side effects |
| ‚ö†Ô∏è Avoid null issues | Check for null when needed |
| ‚ö†Ô∏è Don't overcomplicate | Keep predicates simple |

---

## ‚ö†Ô∏è Common Pitfalls

| Pitfall | Issue | Solution |
|---------|-------|----------|
| NullPointerException | Not checking for null | Add null checks |
| Complex predicates | Too many conditions | Break into smaller predicates |
| Performance issues | Expensive operations in predicates | Optimize or cache results |
| Wrong order | Expensive checks first | Place cheap predicates first |
| Side effects | Modifying state in predicate | Keep predicates pure |

---

## üîó Related Topics

- [Lambda Expressions](01.%20Lambda%20Expressions.md)
- [Functional Interfaces](02.%20Functional%20Interfaces.md)
- [Function Interface](05.%20Function%20Interface.md)
- [Stream API](../07.%20Stream%20API/01.%20Introduction%20to%20Streams.md)

---

## üìù Interview Questions

1. **What is Predicate in Java?** - Functional interface for boolean-valued functions
2. **What is the method signature?** - `boolean test(T t)`
3. **How to combine predicates?** - Using and(), or(), negate()
4. **What is BiPredicate?** - Predicate with two parameters
5. **Difference between Predicate and IntPredicate?** - Primitive vs generic, boxing
6. **What is short-circuit evaluation?** - Stops evaluation when result is determined
7. **Can predicates have side effects?** - Not recommended, keep them pure
8. **How is Predicate used with streams?** - With filter() operation
9. **What is Predicate.isEqual()?** - Static method for equality predicate
10. **When to use Predicate vs Function?** - Predicate for testing, Function for transformation

---

## üí° Key Takeaways

- Predicate represents boolean-valued functions
- Used extensively with Stream filter() operations
- Can be combined using and(), or(), negate()
- Four primitive specializations: Int, Long, Double, BiPredicate
- Keep predicates pure (no side effects)
- Order predicates for performance (cheap checks first)
- Essential for functional programming and data filtering
