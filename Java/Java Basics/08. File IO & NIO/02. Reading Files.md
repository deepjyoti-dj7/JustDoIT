# üìñ Reading Files

## üìñ Overview

Java provides multiple ways to read files, from low-level byte streams to high-level NIO.2 methods.

---

## üíª Method 1: Files.readAllLines() - Simple & Modern

```java
import java.nio.file.*;
import java.io.IOException;
import java.util.List;

public class ReadAllLines {
    public static void main(String[] args) {
        try {
            // Read all lines into List
            List<String> lines = Files.readAllLines(Paths.get("data.txt"));
            
            for (String line : lines) {
                System.out.println(line);
            }
            
            // With charset
            List<String> linesUTF8 = Files.readAllLines(
                Paths.get("data.txt"), 
                StandardCharsets.UTF_8
            );
            
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**Pros:** Simple, one-liner  
**Cons:** Loads entire file into memory

---

## üíª Method 2: Files.readString() - Java 11+

```java
try {
    // Read entire file as String
    String content = Files.readString(Paths.get("data.txt"));
    System.out.println(content);
    
    // With charset
    String contentUTF8 = Files.readString(
        Paths.get("data.txt"),
        StandardCharsets.UTF_8
    );
    
} catch (IOException e) {
    e.printStackTrace();
}
```

---

## üíª Method 3: Files.lines() - Stream API

```java
try (Stream<String> lines = Files.lines(Paths.get("data.txt"))) {
    
    // Process with streams
    lines.filter(line -> !line.isEmpty())
         .map(String::toUpperCase)
         .forEach(System.out::println);
         
} catch (IOException e) {
    e.printStackTrace();
}

// Count lines
try (Stream<String> lines = Files.lines(Paths.get("data.txt"))) {
    long count = lines.count();
    System.out.println("Lines: " + count);
}
```

**Pros:** Memory efficient, lazy loading  
**Cons:** Must be closed (use try-with-resources)

---

## üíª Method 4: BufferedReader - Traditional

```java
import java.io.*;

try (BufferedReader reader = new BufferedReader(new FileReader("data.txt"))) {
    
    String line;
    while ((line = reader.readLine()) != null) {
        System.out.println(line);
    }
    
} catch (IOException e) {
    e.printStackTrace();
}

// With charset
try (BufferedReader reader = new BufferedReader(
        new InputStreamReader(
            new FileInputStream("data.txt"),
            StandardCharsets.UTF_8))) {
    
    String line;
    while ((line = reader.readLine()) != null) {
        System.out.println(line);
    }
}
```

---

## üíª Method 5: Scanner - Flexible Parsing

```java
import java.util.Scanner;

try (Scanner scanner = new Scanner(new File("data.txt"))) {
    
    // Read line by line
    while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        System.out.println(line);
    }
    
} catch (FileNotFoundException e) {
    e.printStackTrace();
}

// Parse structured data
try (Scanner scanner = new Scanner(new File("numbers.txt"))) {
    while (scanner.hasNextInt()) {
        int num = scanner.nextInt();
        System.out.println(num);
    }
}

// With delimiter
try (Scanner scanner = new Scanner(new File("csv.txt"))) {
    scanner.useDelimiter(",");
    while (scanner.hasNext()) {
        System.out.println(scanner.next());
    }
}
```

---

## üíª Method 6: FileInputStream - Byte Stream

```java
try (FileInputStream fis = new FileInputStream("data.bin")) {
    
    int byteData;
    while ((byteData = fis.read()) != -1) {
        System.out.print((char) byteData);
    }
    
} catch (IOException e) {
    e.printStackTrace();
}

// Read into byte array
try (FileInputStream fis = new FileInputStream("data.bin")) {
    byte[] buffer = new byte[1024];
    int bytesRead;
    
    while ((bytesRead = fis.read(buffer)) != -1) {
        System.out.write(buffer, 0, bytesRead);
    }
}
```

---

## üíª Method 7: Files.readAllBytes() - Binary Data

```java
try {
    byte[] bytes = Files.readAllBytes(Paths.get("data.bin"));
    
    // Process bytes
    for (byte b : bytes) {
        System.out.print(Integer.toHexString(b & 0xFF) + " ");
    }
    
    // Convert to String
    String content = new String(bytes, StandardCharsets.UTF_8);
    
} catch (IOException e) {
    e.printStackTrace();
}
```

---

## üíª Method 8: RandomAccessFile - Random Access

```java
try (RandomAccessFile raf = new RandomAccessFile("data.txt", "r")) {
    
    // Read from specific position
    raf.seek(10);  // Move to byte 10
    int data = raf.read();
    
    // Get file pointer position
    long position = raf.getFilePointer();
    
    // Read line
    String line = raf.readLine();
    
    // File length
    long length = raf.length();
    
} catch (IOException e) {
    e.printStackTrace();
}
```

---

## üéØ Complete Examples

### Example 1: Read Large File Efficiently

```java
public class LargeFileReader {
    public static void processLargeFile(String filename) {
        try (Stream<String> lines = Files.lines(Paths.get(filename))) {
            
            lines.parallel()  // Parallel processing
                 .filter(line -> line.contains("ERROR"))
                 .forEach(System.out::println);
                 
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### Example 2: Read CSV File

```java
public class CSVReader {
    public static void readCSV(String filename) {
        try (BufferedReader reader = new BufferedReader(new FileReader(filename))) {
            
            String line;
            while ((line = reader.readLine()) != null) {
                String[] values = line.split(",");
                for (String value : values) {
                    System.out.print(value.trim() + " | ");
                }
                System.out.println();
            }
            
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### Example 3: Read Properties File

```java
public class PropertiesReader {
    public static void readProperties(String filename) {
        Properties props = new Properties();
        
        try (FileInputStream fis = new FileInputStream(filename)) {
            props.load(fis);
            
            props.forEach((key, value) -> 
                System.out.println(key + " = " + value)
            );
            
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### Example 4: Read with Charset Detection

```java
import org.mozilla.universalchardet.UniversalDetector;

public class CharsetReader {
    public static String detectCharset(String filename) throws IOException {
        byte[] buf = new byte[4096];
        FileInputStream fis = new FileInputStream(filename);
        
        UniversalDetector detector = new UniversalDetector(null);
        
        int nread;
        while ((nread = fis.read(buf)) > 0 && !detector.isDone()) {
            detector.handleData(buf, 0, nread);
        }
        detector.dataEnd();
        
        String encoding = detector.getDetectedCharset();
        detector.reset();
        fis.close();
        
        return encoding != null ? encoding : "UTF-8";
    }
}
```

---

## üìä Reading Methods Comparison

| Method | Use Case | Memory | Speed | Ease |
|--------|----------|--------|-------|------|
| Files.readAllLines() | Small files | High | Fast | Easy |
| Files.readString() | Small text files | High | Fast | Easy |
| Files.lines() | Large files | Low | Fast | Medium |
| BufferedReader | General purpose | Low | Fast | Medium |
| Scanner | Parsing | Low | Slow | Easy |
| FileInputStream | Binary data | Low | Medium | Hard |
| Files.readAllBytes() | Binary files | High | Fast | Easy |
| RandomAccessFile | Random access | Low | Fast | Hard |

---

## ‚ö° Best Practices

| Practice | Description |
|----------|-------------|
| ‚úÖ Use try-with-resources | Auto-close streams |
| ‚úÖ Files.lines() for large files | Memory efficient |
| ‚úÖ BufferedReader for line reading | Better performance |
| ‚úÖ Specify charset explicitly | Avoid platform defaults |
| ‚úÖ Handle IOException | Always catch exceptions |
| ‚ùå Don't use FileReader without charset | Platform-dependent |
| ‚ùå Don't load huge files with readAllLines | OutOfMemoryError |
| ‚ùå Don't forget to close streams | Resource leaks |

---

## üîó Related Topics

- [Writing Files](03.%20Writing%20Files.md)
- [BufferedReader & BufferedWriter](04.%20BufferedReader%20%26%20BufferedWriter.md)
- [NIO Files Class](05.%20NIO%20Files%20Class.md)

---

## üí° Key Takeaways

- Files.readAllLines() - simple for small files
- Files.lines() - best for large files with streams
- BufferedReader - traditional, efficient line reading
- Scanner - flexible parsing with delimiters
- Always use try-with-resources
- Specify charset explicitly (UTF-8 recommended)
- Choose method based on file size and needs
- NIO.2 methods are simpler and more powerful
