# üõ§Ô∏è Path & Paths

## üìñ Overview

**Path** is an interface representing a file system path. **Paths** is a utility class for creating Path objects. Together they provide a modern, flexible way to work with file paths.

**Package:** `java.nio.file`

**Introduced:** Java 7 (NIO.2)

---

## üíª Creating Path Objects

```java
import java.nio.file.*;

// Using Paths.get()
Path path1 = Paths.get("file.txt");
Path path2 = Paths.get("/home/user/file.txt");
Path path3 = Paths.get("C:\\Users\\file.txt");  // Windows

// Multiple segments
Path path4 = Paths.get("folder", "subfolder", "file.txt");
Path path5 = Paths.get("/home", "user", "file.txt");

// From URI
Path path6 = Paths.get(URI.create("file:///home/user/file.txt"));

// Using Path.of() (Java 11+)
Path path7 = Path.of("file.txt");
Path path8 = Path.of("folder", "file.txt");

// From File object
File file = new File("file.txt");
Path path9 = file.toPath();

// Convert back to File
File file2 = path1.toFile();
```

---

## üíª Path Information

```java
Path path = Paths.get("/home/user/documents/file.txt");

// Filename
Path filename = path.getFileName();  // file.txt

// Parent directory
Path parent = path.getParent();  // /home/user/documents

// Root
Path root = path.getRoot();  // /

// Name count
int count = path.getNameCount();  // 4

// Get specific name element
Path name0 = path.getName(0);  // home
Path name1 = path.getName(1);  // user
Path name2 = path.getName(2);  // documents
Path name3 = path.getName(3);  // file.txt

// Convert to string
String str = path.toString();

// Convert to URI
URI uri = path.toUri();

// Absolute path
Path absolute = path.toAbsolutePath();

// Real path (resolves symlinks)
try {
    Path real = path.toRealPath();
} catch (IOException e) {
    e.printStackTrace();
}
```

---

## üíª Path Operations

### Resolving Paths

```java
Path base = Paths.get("/home/user");

// Resolve (append)
Path resolved1 = base.resolve("documents");  // /home/user/documents
Path resolved2 = base.resolve("documents/file.txt");  // /home/user/documents/file.txt

// Resolve sibling
Path file = Paths.get("/home/user/file.txt");
Path sibling = file.resolveSibling("other.txt");  // /home/user/other.txt
```

### Relativizing Paths

```java
Path base = Paths.get("/home/user");
Path target = Paths.get("/home/user/documents/file.txt");

// Get relative path
Path relative = base.relativize(target);  // documents/file.txt

Path path1 = Paths.get("/home/user/a/b.txt");
Path path2 = Paths.get("/home/user/c/d.txt");
Path rel = path1.relativize(path2);  // ../../c/d.txt
```

### Normalizing Paths

```java
// Remove redundant elements
Path messy = Paths.get("/home/user/./documents/../file.txt");
Path normalized = messy.normalize();  // /home/user/file.txt

Path path = Paths.get("a/b/../c/./d");
Path norm = path.normalize();  // a/c/d
```

### Comparing Paths

```java
Path path1 = Paths.get("/home/user/file.txt");
Path path2 = Paths.get("/home/user/file.txt");

// Equality
boolean equal = path1.equals(path2);

// Comparison
int cmp = path1.compareTo(path2);

// Starts with
boolean starts = path1.startsWith("/home");
boolean startsPath = path1.startsWith(Paths.get("/home"));

// Ends with
boolean ends = path1.endsWith("file.txt");
boolean endsPath = path1.endsWith(Paths.get("user/file.txt"));
```

---

## üíª Iterating Path Components

```java
Path path = Paths.get("/home/user/documents/file.txt");

// Iterate over name elements
for (Path name : path) {
    System.out.println(name);
}
// Output:
// home
// user
// documents
// file.txt

// Using stream
path.forEach(System.out::println);
```

---

## üíª Subpaths

```java
Path path = Paths.get("/home/user/documents/file.txt");

// Get subpath (exclusive end)
Path sub1 = path.subpath(0, 2);  // home/user
Path sub2 = path.subpath(1, 3);  // user/documents
Path sub3 = path.subpath(2, 4);  // documents/file.txt
```

---

## üíª File System Operations

```java
// Get file system
FileSystem fs = FileSystems.getDefault();

// Path separator
String separator = fs.getSeparator();  // / or \

// Root directories
Iterable<Path> roots = fs.getRootDirectories();
for (Path root : roots) {
    System.out.println(root);
}

// File stores
for (FileStore store : fs.getFileStores()) {
    System.out.println(store.name());
}
```

---

## üéØ Complete Examples

### Example 1: Path Manipulation

```java
public class PathExample {
    public static void main(String[] args) {
        Path path = Paths.get("/home/user/documents/report.pdf");
        
        System.out.println("Full path: " + path);
        System.out.println("Filename: " + path.getFileName());
        System.out.println("Parent: " + path.getParent());
        System.out.println("Root: " + path.getRoot());
        System.out.println("Absolute: " + path.isAbsolute());
        System.out.println("Name count: " + path.getNameCount());
        
        // Iterate components
        System.out.println("\nPath components:");
        for (int i = 0; i < path.getNameCount(); i++) {
            System.out.println("  " + i + ": " + path.getName(i));
        }
    }
}
```

### Example 2: Resolve Relative Paths

```java
public class PathResolver {
    public static void main(String[] args) {
        Path base = Paths.get("/home/user");
        
        // Resolve various paths
        System.out.println(base.resolve("documents"));
        System.out.println(base.resolve("documents/file.txt"));
        System.out.println(base.resolve("../other/file.txt"));
        
        // Resolve and normalize
        Path resolved = base.resolve("documents/../file.txt").normalize();
        System.out.println("Normalized: " + resolved);
    }
}
```

### Example 3: Find Common Base Path

```java
public class CommonPath {
    public static Path findCommonPath(Path path1, Path path2) {
        if (!path1.getRoot().equals(path2.getRoot())) {
            return null;  // Different roots
        }
        
        int minCount = Math.min(path1.getNameCount(), path2.getNameCount());
        int commonCount = 0;
        
        for (int i = 0; i < minCount; i++) {
            if (path1.getName(i).equals(path2.getName(i))) {
                commonCount++;
            } else {
                break;
            }
        }
        
        if (commonCount == 0) {
            return path1.getRoot();
        }
        
        return path1.getRoot().resolve(path1.subpath(0, commonCount));
    }
    
    public static void main(String[] args) {
        Path p1 = Paths.get("/home/user/documents/file1.txt");
        Path p2 = Paths.get("/home/user/downloads/file2.txt");
        
        Path common = findCommonPath(p1, p2);
        System.out.println("Common path: " + common);  // /home/user
    }
}
```

### Example 4: Build Path from Parts

```java
public class PathBuilder {
    public static Path buildPath(String... parts) {
        if (parts.length == 0) {
            return Paths.get("");
        }
        
        Path path = Paths.get(parts[0]);
        for (int i = 1; i < parts.length; i++) {
            path = path.resolve(parts[i]);
        }
        
        return path;
    }
    
    public static void main(String[] args) {
        Path path = buildPath("home", "user", "documents", "file.txt");
        System.out.println(path);  // home/user/documents/file.txt
    }
}
```

### Example 5: Change File Extension

```java
public class ExtensionChanger {
    public static Path changeExtension(Path path, String newExt) {
        String filename = path.getFileName().toString();
        int dotIndex = filename.lastIndexOf('.');
        
        String newFilename;
        if (dotIndex > 0) {
            newFilename = filename.substring(0, dotIndex) + newExt;
        } else {
            newFilename = filename + newExt;
        }
        
        return path.resolveSibling(newFilename);
    }
    
    public static void main(String[] args) {
        Path path = Paths.get("/home/user/report.txt");
        Path newPath = changeExtension(path, ".pdf");
        System.out.println(newPath);  // /home/user/report.pdf
    }
}
```

### Example 6: Glob Pattern Matching

```java
public class PathMatcher {
    public static boolean matches(Path path, String pattern) {
        PathMatcher matcher = FileSystems.getDefault()
            .getPathMatcher("glob:" + pattern);
        return matcher.matches(path);
    }
    
    public static void main(String[] args) {
        Path path = Paths.get("document.txt");
        
        System.out.println(matches(path, "*.txt"));       // true
        System.out.println(matches(path, "*.pdf"));       // false
        System.out.println(matches(path, "doc*"));        // true
        System.out.println(matches(path, "{*.txt,*.md}"));// true
    }
}
```

---

## üìä Path vs File

| Feature | Path (NIO.2) | File (Legacy) |
|---------|--------------|---------------|
| **API** | Modern | Legacy |
| **Immutable** | Yes | No |
| **Interface** | Interface | Class |
| **Operations** | Rich | Limited |
| **URI support** | Yes | Limited |
| **Relativize** | Yes | No |
| **Normalize** | Yes | No |
| **Recommended** | ‚úÖ Yes | ‚ùå No |

---

## üìä Common Methods

| Method | Description | Example |
|--------|-------------|---------|
| getFileName() | Get filename | file.txt |
| getParent() | Get parent directory | /home/user |
| getRoot() | Get root | / or C:\ |
| resolve() | Append path | base.resolve("file") |
| relativize() | Get relative path | ../../other |
| normalize() | Remove redundant elements | /home/user/file |
| toAbsolutePath() | Get absolute path | /home/.../file |
| toRealPath() | Resolve symlinks | actual/path |

---

## ‚ö° Best Practices

| Practice | Description |
|----------|-------------|
| ‚úÖ Use Path instead of File | Modern API |
| ‚úÖ Use Path.of() (Java 11+) | Cleaner syntax |
| ‚úÖ Normalize paths | Remove redundancy |
| ‚úÖ Use resolve() for building | Proper path construction |
| ‚úÖ Handle platform differences | Use Path API |
| ‚úÖ Use toRealPath() for symlinks | Get actual path |
| ‚ùå Don't concatenate strings | Use resolve() |
| ‚ùå Don't hardcode separators | Use Path methods |

---

## üîó Related Topics

- [NIO Files Class](05.%20NIO%20Files%20Class.md)
- [File Class](01.%20File%20Class.md)
- [Reading Files](02.%20Reading%20Files.md)

---

## üí° Key Takeaways

- Path is an interface for file system paths
- Paths.get() or Path.of() to create instances
- Immutable and platform-independent
- Rich set of manipulation methods
- resolve() for appending paths
- relativize() for getting relative paths
- normalize() removes redundant elements
- toAbsolutePath() and toRealPath() for conversion
- Works seamlessly with Files class
- Preferred over File class for new code
