# üèõÔ∏è Generic Classes

## üìñ Overview

A **generic class** is a class that can work with any data type. It is defined with type parameters that act as placeholders for actual types specified when creating instances.

**Syntax:**
```java
class ClassName<T> {
    private T data;
    // methods using T
}
```

**Common Type Parameter Names:**
- **T** - Type
- **E** - Element
- **K** - Key
- **V** - Value
- **N** - Number

---

## üíª Example 1: Simple Generic Class

```java
// Generic class with single type parameter
class Box<T> {
    private T content;
    
    public void set(T content) {
        this.content = content;
    }
    
    public T get() {
        return content;
    }
    
    public void display() {
        System.out.println("Content: " + content + " (" + content.getClass().getSimpleName() + ")");
    }
}

public class SimpleGenericClass {
    public static void main(String[] args) {
        System.out.println("=== Simple Generic Class ===\n");
        
        // Box for String
        Box<String> stringBox = new Box<>();
        stringBox.set("Hello Generics");
        System.out.println("String box: " + stringBox.get());
        stringBox.display();
        
        // Box for Integer
        Box<Integer> intBox = new Box<>();
        intBox.set(12345);
        System.out.println("\nInteger box: " + intBox.get());
        intBox.display();
        
        // Box for Double
        Box<Double> doubleBox = new Box<>();
        doubleBox.set(3.14159);
        System.out.println("\nDouble box: " + doubleBox.get());
        doubleBox.display();
        
        // Box for custom object
        Box<StringBuilder> sbBox = new Box<>();
        sbBox.set(new StringBuilder("Mutable String"));
        System.out.println("\nStringBuilder box: " + sbBox.get());
        sbBox.display();
    }
}
```

---

## üíª Example 2: Generic Class with Multiple Type Parameters

```java
class Pair<K, V> {
    private K key;
    private V value;
    
    public Pair(K key, V value) {
        this.key = key;
        this.value = value;
    }
    
    public K getKey() {
        return key;
    }
    
    public V getValue() {
        return value;
    }
    
    public void setKey(K key) {
        this.key = key;
    }
    
    public void setValue(V value) {
        this.value = value;
    }
    
    @Override
    public String toString() {
        return "Pair{key=" + key + ", value=" + value + "}";
    }
}

public class MultipleTy peParameters {
    public static void main(String[] args) {
        System.out.println("=== Multiple Type Parameters ===\n");
        
        // String key, Integer value
        Pair<String, Integer> agePair = new Pair<>("Alice", 25);
        System.out.println(agePair);
        System.out.println("Key: " + agePair.getKey());
        System.out.println("Value: " + agePair.getValue());
        
        // Integer key, String value
        Pair<Integer, String> idPair = new Pair<>(101, "Employee");
        System.out.println("\n" + idPair);
        
        // String key, Double value
        Pair<String, Double> pricePair = new Pair<>("Laptop", 999.99);
        System.out.println("\n" + pricePair);
        
        // Both same type
        Pair<String, String> namePair = new Pair<>("First", "Last");
        System.out.println("\n" + namePair);
    }
}
```

---

## üíª Example 3: Generic Stack Implementation

```java
import java.util.ArrayList;
import java.util.List;

class Stack<T> {
    private List<T> elements = new ArrayList<>();
    
    public void push(T element) {
        elements.add(element);
    }
    
    public T pop() {
        if (isEmpty()) {
            throw new RuntimeException("Stack is empty");
        }
        return elements.remove(elements.size() - 1);
    }
    
    public T peek() {
        if (isEmpty()) {
            throw new RuntimeException("Stack is empty");
        }
        return elements.get(elements.size() - 1);
    }
    
    public boolean isEmpty() {
        return elements.isEmpty();
    }
    
    public int size() {
        return elements.size();
    }
    
    @Override
    public String toString() {
        return elements.toString();
    }
}

public class GenericStackExample {
    public static void main(String[] args) {
        System.out.println("=== Generic Stack ===\n");
        
        // Integer stack
        Stack<Integer> intStack = new Stack<>();
        intStack.push(10);
        intStack.push(20);
        intStack.push(30);
        
        System.out.println("Integer Stack: " + intStack);
        System.out.println("Pop: " + intStack.pop());
        System.out.println("Peek: " + intStack.peek());
        System.out.println("Size: " + intStack.size());
        
        // String stack
        Stack<String> stringStack = new Stack<>();
        stringStack.push("First");
        stringStack.push("Second");
        stringStack.push("Third");
        
        System.out.println("\nString Stack: " + stringStack);
        System.out.println("Pop: " + stringStack.pop());
        System.out.println("After pop: " + stringStack);
    }
}
```

---

## üíª Example 4: Generic Linked List

```java
class Node<T> {
    T data;
    Node<T> next;
    
    Node(T data) {
        this.data = data;
        this.next = null;
    }
}

class LinkedList<T> {
    private Node<T> head;
    private int size;
    
    public void add(T data) {
        Node<T> newNode = new Node<>(data);
        if (head == null) {
            head = newNode;
        } else {
            Node<T> current = head;
            while (current.next != null) {
                current = current.next;
            }
            current.next = newNode;
        }
        size++;
    }
    
    public T get(int index) {
        if (index < 0 || index >= size) {
            throw new IndexOutOfBoundsException("Index: " + index + ", Size: " + size);
        }
        
        Node<T> current = head;
        for (int i = 0; i < index; i++) {
            current = current.next;
        }
        return current.data;
    }
    
    public int size() {
        return size;
    }
    
    public void display() {
        Node<T> current = head;
        System.out.print("[");
        while (current != null) {
            System.out.print(current.data);
            if (current.next != null) {
                System.out.print(" -> ");
            }
            current = current.next;
        }
        System.out.println("]");
    }
}

public class GenericLinkedList {
    public static void main(String[] args) {
        System.out.println("=== Generic Linked List ===\n");
        
        // String linked list
        LinkedList<String> stringList = new LinkedList<>();
        stringList.add("Apple");
        stringList.add("Banana");
        stringList.add("Cherry");
        
        System.out.println("String List:");
        stringList.display();
        System.out.println("Element at index 1: " + stringList.get(1));
        
        // Integer linked list
        LinkedList<Integer> intList = new LinkedList<>();
        intList.add(10);
        intList.add(20);
        intList.add(30);
        intList.add(40);
        
        System.out.println("\nInteger List:");
        intList.display();
        System.out.println("Size: " + intList.size());
    }
}
```

---

## üíª Example 5: Generic Class with Methods

```java
class Calculator<T extends Number> {
    private T num1;
    private T num2;
    
    public Calculator(T num1, T num2) {
        this.num1 = num1;
        this.num2 = num2;
    }
    
    public double add() {
        return num1.doubleValue() + num2.doubleValue();
    }
    
    public double subtract() {
        return num1.doubleValue() - num2.doubleValue();
    }
    
    public double multiply() {
        return num1.doubleValue() * num2.doubleValue();
    }
    
    public double divide() {
        if (num2.doubleValue() == 0) {
            throw new ArithmeticException("Cannot divide by zero");
        }
        return num1.doubleValue() / num2.doubleValue();
    }
    
    public void displayOperations() {
        System.out.println(num1 + " + " + num2 + " = " + add());
        System.out.println(num1 + " - " + num2 + " = " + subtract());
        System.out.println(num1 + " * " + num2 + " = " + multiply());
        System.out.println(num1 + " / " + num2 + " = " + divide());
    }
}

public class GenericCalculator {
    public static void main(String[] args) {
        System.out.println("=== Generic Calculator ===\n");
        
        // Integer calculator
        Calculator<Integer> intCalc = new Calculator<>(10, 5);
        System.out.println("Integer Operations:");
        intCalc.displayOperations();
        
        // Double calculator
        Calculator<Double> doubleCalc = new Calculator<>(15.5, 3.2);
        System.out.println("\nDouble Operations:");
        doubleCalc.displayOperations();
        
        // Mixed with Number types
        Calculator<Float> floatCalc = new Calculator<>(7.5f, 2.5f);
        System.out.println("\nFloat Operations:");
        floatCalc.displayOperations();
    }
}
```

---

## üíª Example 6: Generic Repository Pattern

```java
import java.util.*;

interface CrudRepository<T, ID> {
    void save(T entity);
    T findById(ID id);
    List<T> findAll();
    void update(ID id, T entity);
    void delete(ID id);
}

class InMemoryRepository<T, ID> implements CrudRepository<T, ID> {
    private Map<ID, T> storage = new HashMap<>();
    
    @Override
    public void save(T entity) {
        // Simple implementation - uses hashCode as ID
        @SuppressWarnings("unchecked")
        ID id = (ID) Integer.valueOf(entity.hashCode());
        storage.put(id, entity);
    }
    
    @Override
    public T findById(ID id) {
        return storage.get(id);
    }
    
    @Override
    public List<T> findAll() {
        return new ArrayList<>(storage.values());
    }
    
    @Override
    public void update(ID id, T entity) {
        if (storage.containsKey(id)) {
            storage.put(id, entity);
        } else {
            throw new RuntimeException("Entity not found with id: " + id);
        }
    }
    
    @Override
    public void delete(ID id) {
        storage.remove(id);
    }
}

class Product {
    private int id;
    private String name;
    private double price;
    
    public Product(int id, String name, double price) {
        this.id = id;
        this.name = name;
        this.price = price;
    }
    
    public int getId() { return id; }
    
    @Override
    public String toString() {
        return "Product{id=" + id + ", name='" + name + "', price=" + price + "}";
    }
}

public class RepositoryPatternExample {
    public static void main(String[] args) {
        System.out.println("=== Generic Repository Pattern ===\n");
        
        CrudRepository<Product, Integer> productRepo = new InMemoryRepository<>();
        
        // Save products
        Product p1 = new Product(1, "Laptop", 999.99);
        Product p2 = new Product(2, "Mouse", 29.99);
        Product p3 = new Product(3, "Keyboard", 79.99);
        
        productRepo.save(p1);
        productRepo.save(p2);
        productRepo.save(p3);
        
        // Find all
        System.out.println("All Products:");
        for (Product p : productRepo.findAll()) {
            System.out.println(p);
        }
        
        // Find by ID
        System.out.println("\nFind product with ID 1:");
        System.out.println(productRepo.findById(1));
    }
}
```

---

## üíª Example 7: Generic Container with Nested Class

```java
class Container<T> {
    private T content;
    
    public Container(T content) {
        this.content = content;
    }
    
    public T getContent() {
        return content;
    }
    
    // Generic nested class
    class Inspector {
        public void inspect() {
            System.out.println("Inspecting content: " + content);
            System.out.println("Type: " + content.getClass().getSimpleName());
            System.out.println("Value: " + content);
        }
    }
    
    public Inspector getInspector() {
        return new Inspector();
    }
}

public class NestedGenericClass {
    public static void main(String[] args) {
        System.out.println("=== Generic Class with Nested Class ===\n");
        
        Container<String> stringContainer = new Container<>("Hello World");
        Container<String>.Inspector inspector1 = stringContainer.getInspector();
        inspector1.inspect();
        
        System.out.println();
        
        Container<Integer> intContainer = new Container<>(42);
        Container<Integer>.Inspector inspector2 = intContainer.getInspector();
        inspector2.inspect();
    }
}
```

---

## üíª Example 8: Generic Class Inheritance

```java
// Generic parent class
class Animal<T> {
    private T species;
    
    public Animal(T species) {
        this.species = species;
    }
    
    public T getSpecies() {
        return species;
    }
    
    public void display() {
        System.out.println("Species: " + species);
    }
}

// Non-generic class extending generic class
class Dog extends Animal<String> {
    private String breed;
    
    public Dog(String species, String breed) {
        super(species);
        this.breed = breed;
    }
    
    public void displayDog() {
        System.out.println("Dog - Species: " + getSpecies() + ", Breed: " + breed);
    }
}

// Generic class extending generic class
class Pet<T, U> extends Animal<T> {
    private U owner;
    
    public Pet(T species, U owner) {
        super(species);
        this.owner = owner;
    }
    
    public void displayPet() {
        System.out.println("Pet - Species: " + getSpecies() + ", Owner: " + owner);
    }
}

public class GenericInheritance {
    public static void main(String[] args) {
        System.out.println("=== Generic Class Inheritance ===\n");
        
        // Generic parent
        Animal<String> animal = new Animal<>("Mammal");
        animal.display();
        
        // Non-generic child
        System.out.println();
        Dog dog = new Dog("Canis familiaris", "Golden Retriever");
        dog.displayDog();
        
        // Generic child
        System.out.println();
        Pet<String, String> pet = new Pet<>("Felis catus", "Alice");
        pet.displayPet();
    }
}
```

---

## üíª Example 9: Generic Builder Pattern

```java
class User<T> {
    private String name;
    private int age;
    private T metadata;
    
    private User(Builder<T> builder) {
        this.name = builder.name;
        this.age = builder.age;
        this.metadata = builder.metadata;
    }
    
    public static class Builder<T> {
        private String name;
        private int age;
        private T metadata;
        
        public Builder<T> name(String name) {
            this.name = name;
            return this;
        }
        
        public Builder<T> age(int age) {
            this.age = age;
            return this;
        }
        
        public Builder<T> metadata(T metadata) {
            this.metadata = metadata;
            return this;
        }
        
        public User<T> build() {
            return new User<>(this);
        }
    }
    
    @Override
    public String toString() {
        return "User{name='" + name + "', age=" + age + ", metadata=" + metadata + "}";
    }
}

public class GenericBuilderPattern {
    public static void main(String[] args) {
        System.out.println("=== Generic Builder Pattern ===\n");
        
        // User with String metadata
        User<String> user1 = new User.Builder<String>()
            .name("Alice")
            .age(25)
            .metadata("Premium Member")
            .build();
        
        System.out.println(user1);
        
        // User with Integer metadata
        User<Integer> user2 = new User.Builder<Integer>()
            .name("Bob")
            .age(30)
            .metadata(12345)
            .build();
        
        System.out.println(user2);
        
        // User with Map metadata
        User<java.util.Map<String, String>> user3 = new User.Builder<java.util.Map<String, String>>()
            .name("Charlie")
            .age(28)
            .metadata(java.util.Map.of("role", "Admin", "department", "IT"))
            .build();
        
        System.out.println(user3);
    }
}
```

---

## üíª Example 10: Real-World Example - Cache System

```java
import java.util.*;

class Cache<K, V> {
    private Map<K, V> cache;
    private int maxSize;
    private Queue<K> accessOrder;
    
    public Cache(int maxSize) {
        this.maxSize = maxSize;
        this.cache = new LinkedHashMap<>();
        this.accessOrder = new LinkedList<>();
    }
    
    public void put(K key, V value) {
        if (cache.size() >= maxSize && !cache.containsKey(key)) {
            K oldestKey = accessOrder.poll();
            cache.remove(oldestKey);
            System.out.println("Evicted: " + oldestKey);
        }
        
        cache.put(key, value);
        accessOrder.offer(key);
        System.out.println("Cached: " + key + " -> " + value);
    }
    
    public V get(K key) {
        V value = cache.get(key);
        if (value != null) {
            // Update access order
            accessOrder.remove(key);
            accessOrder.offer(key);
        }
        return value;
    }
    
    public boolean containsKey(K key) {
        return cache.containsKey(key);
    }
    
    public int size() {
        return cache.size();
    }
    
    public void displayCache() {
        System.out.println("Cache contents: " + cache);
    }
}

public class CacheSystem {
    public static void main(String[] args) {
        System.out.println("=== Generic Cache System ===\n");
        
        // String-Integer cache
        Cache<String, Integer> userCache = new Cache<>(3);
        
        userCache.put("user1", 100);
        userCache.put("user2", 200);
        userCache.put("user3", 300);
        
        System.out.println("\nCache status:");
        userCache.displayCache();
        
        System.out.println("\nAdding fourth item (triggers eviction):");
        userCache.put("user4", 400);
        
        System.out.println("\nCache status:");
        userCache.displayCache();
        
        System.out.println("\nGetting user2:");
        Integer value = userCache.get("user2");
        System.out.println("Value: " + value);
        
        // Integer-String cache
        System.out.println("\n=== Product Cache ===");
        Cache<Integer, String> productCache = new Cache<>(2);
        
        productCache.put(101, "Laptop");
        productCache.put(102, "Mouse");
        productCache.put(103, "Keyboard");
        
        productCache.displayCache();
    }
}
```

---

## üìä Generic Class Features

| Feature | Description | Example |
|---------|-------------|---------|
| **Type Parameter** | Placeholder for type | `class Box<T>` |
| **Multiple Parameters** | More than one type | `class Pair<K, V>` |
| **Bounded Types** | Restrict type | `class Num<T extends Number>` |
| **Type Inference** | Auto-detect type | `Box<String> box = new Box<>()` |
| **Inheritance** | Extend generic class | `class Sub<T> extends Base<T>` |
| **Nested Types** | Inner generic classes | `class Outer<T> { class Inner { } }` |

---

## üí° Best Practices

1. ‚úÖ **Use meaningful type parameter names**
   ```java
   class Map<K, V> { }     // K=Key, V=Value - clear
   class Map<A, B> { }     // A, B - unclear
   ```

2. ‚úÖ **Make classes generic when they can work with any type**
   ```java
   class Container<T> { }  // Can hold any type
   ```

3. ‚úÖ **Use bounded types when operations require specific methods**
   ```java
   class Calculator<T extends Number> { }  // Needs Number methods
   ```

4. ‚úÖ **Provide constructors for initialization**
   ```java
   class Pair<K, V> {
       public Pair(K key, V value) { }
   }
   ```

---

## ‚ö†Ô∏è Common Pitfalls

```java
public class GenericClassPitfalls {
    // 1. Cannot instantiate type parameter
    class Bad<T> {
        // T obj = new T();  // ERROR
    }
    
    // 2. Cannot create array of generic type
    // T[] array = new T[10];  // ERROR
    
    // 3. Cannot use primitives
    // Box<int> box = new Box<>();  // ERROR
    Box<Integer> box = new Box<>();  // Correct
}
```

---

## üéØ Interview Questions

1. **What is a generic class?**
2. **How to define a generic class?**
3. **What are type parameters?**
4. **Can we have multiple type parameters?**
5. **What is the diamond operator?**
6. **Can we use primitives with generic classes?**
7. **What is a bounded type parameter?**
8. **Can generic classes be inherited?**
9. **What are the naming conventions for type parameters?**
10. **Can we create instances of type parameters?**
11. **What is type erasure?**
12. **Can we have static members with type parameters?**
13. **What is a raw type?**
14. **Difference between generic class and generic method?**
15. **Can we overload generic classes?**

---

## üìö Related Topics

- [Introduction to Generics](01.%20Introduction%20to%20Generics.md)
- [Generic Methods](03.%20Generic%20Methods.md)
- [Bounded Type Parameters](04.%20Bounded%20Type%20Parameters.md)
- [Wildcards](05.%20Wildcards.md)
- [Type Erasure](06.%20Type%20Erasure.md)
