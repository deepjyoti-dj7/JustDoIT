# ðŸš€ Nashorn JavaScript Engine

## ðŸ“– Overview

**Nashorn** is a JavaScript engine introduced in Java 8 to replace Rhino. It allows executing JavaScript code from Java and vice versa.

**Status:** Deprecated in Java 11, removed in Java 15. Use GraalVM or other alternatives.

---

## ðŸ’» Basic JavaScript Execution

```java
import javax.script.*;

public class NashornBasicDemo {
    public static void main(String[] args) throws ScriptException {
        // Get JavaScript engine
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");
        
        // Execute JavaScript
        engine.eval("print('Hello from JavaScript!')");
        
        // Evaluate expressions
        Object result = engine.eval("10 + 20");
        System.out.println("Result: " + result);
        
        // JavaScript variables
        engine.eval("var x = 5; var y = 10;");
        Object sum = engine.eval("x + y");
        System.out.println("Sum: " + sum);
    }
}
```

---

## ðŸ’» Passing Java Objects to JavaScript

```java
import javax.script.*;

public class JavaToJSDemo {
    public static void main(String[] args) throws ScriptException {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");
        
        // Pass Java object to JavaScript
        engine.put("name", "Alice");
        engine.put("age", 25);
        
        engine.eval("print('Name: ' + name)");
        engine.eval("print('Age: ' + age)");
        
        // Pass Java collection
        List<String> list = Arrays.asList("Java", "Python", "JavaScript");
        engine.put("languages", list);
        
        engine.eval("""
            for (var i = 0; i < languages.size(); i++) {
                print(languages.get(i));
            }
        """);
    }
}
```

---

## ðŸ’» Calling Java Methods from JavaScript

```java
import javax.script.*;

class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
    
    public int multiply(int a, int b) {
        return a * b;
    }
}

public class JSCallsJavaDemo {
    public static void main(String[] args) throws ScriptException {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");
        
        // Pass Java object
        Calculator calc = new Calculator();
        engine.put("calculator", calc);
        
        // Call Java methods from JavaScript
        engine.eval("""
            var sum = calculator.add(10, 20);
            print('Sum: ' + sum);
            
            var product = calculator.multiply(5, 6);
            print('Product: ' + product);
        """);
    }
}
```

---

## ðŸ’» Invoking JavaScript Functions

```java
import javax.script.*;

public class InvokeFunctionDemo {
    public static void main(String[] args) throws Exception {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");
        
        // Define JavaScript function
        engine.eval("""
            function greet(name) {
                return 'Hello, ' + name + '!';
            }
            
            function calculate(a, b) {
                return {
                    sum: a + b,
                    product: a * b,
                    difference: a - b
                };
            }
        """);
        
        // Invoke JavaScript function
        Invocable invocable = (Invocable) engine;
        
        Object greeting = invocable.invokeFunction("greet", "Alice");
        System.out.println(greeting);
        
        Object result = invocable.invokeFunction("calculate", 10, 5);
        System.out.println("Result: " + result);
    }
}
```

---

## ðŸ’» Loading JavaScript Files

```java
import javax.script.*;
import java.io.*;

public class LoadFileDemo {
    public static void main(String[] args) throws Exception {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");
        
        // Load JavaScript file
        // script.js content:
        // function processData(data) {
        //     return data.toUpperCase();
        // }
        
        FileReader reader = new FileReader("script.js");
        engine.eval(reader);
        reader.close();
        
        // Invoke function from file
        Invocable invocable = (Invocable) engine;
        Object result = invocable.invokeFunction("processData", "hello world");
        System.out.println(result);
    }
}
```

---

## ðŸ“Š Nashorn vs Rhino

| Feature | Nashorn | Rhino |
|---------|---------|-------|
| **Performance** | Faster | Slower |
| **ECMAScript** | ES5.1 | ES3 |
| **Integration** | Better | Basic |
| **Invokedynamic** | Yes | No |
| **Java Version** | 8-14 | All |
| **Status** | Deprecated | Active |

---

## âš¡ Alternatives (Post Java 15)

| Engine | Description |
|--------|-------------|
| **GraalVM** | High-performance polyglot VM |
| **Rhino** | Legacy JavaScript engine |
| **J2V8** | V8 engine for Java |
| **Embedded V8** | Direct V8 integration |

---

## âš¡ Best Practices

| Practice | Description |
|----------|-------------|
| âŒ Don't use in new projects | Deprecated and removed |
| âœ… Migrate to GraalVM | Modern replacement |
| âœ… Use for legacy code | Only if maintaining old code |
| âœ… Sandbox execution | Security concerns |

---

## ðŸ’¡ Key Takeaways

- Nashorn replaced Rhino in Java 8
- Deprecated in Java 11, removed in Java 15
- Allowed JavaScript execution from Java
- Better performance than Rhino
- Use GraalVM for new projects
- ScriptEngine API for scripting
- Invocable for calling JS functions
- Security concerns with untrusted code
