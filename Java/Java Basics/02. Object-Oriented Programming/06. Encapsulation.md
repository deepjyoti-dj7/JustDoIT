# üîí Encapsulation

## üìñ Overview

**Encapsulation** is the bundling of data (variables) and methods that operate on that data into a single unit (class), and restricting direct access to some components.

**Key Concepts:**
- Data hiding
- Private instance variables
- Public getter/setter methods
- Access control
- Information hiding

---

## üéØ Principles of Encapsulation

```
1. Declare variables as private
2. Provide public getter/setter methods
3. Control access to data
4. Validate data in setters
5. Achieve data integrity
```

---

## üíª Example 1: Basic Encapsulation

```java
class Student {
    // Private variables - cannot be accessed directly
    private String name;
    private int age;
    private double gpa;
    
    // Public getter methods
    public String getName() {
        return name;
    }
    
    public int getAge() {
        return age;
    }
    
    public double getGpa() {
        return gpa;
    }
    
    // Public setter methods with validation
    public void setName(String name) {
        if (name != null && !name.trim().isEmpty()) {
            this.name = name;
        } else {
            System.out.println("Invalid name!");
        }
    }
    
    public void setAge(int age) {
        if (age > 0 && age < 150) {
            this.age = age;
        } else {
            System.out.println("Invalid age!");
        }
    }
    
    public void setGpa(double gpa) {
        if (gpa >= 0.0 && gpa <= 4.0) {
            this.gpa = gpa;
        } else {
            System.out.println("Invalid GPA!");
        }
    }
    
    public void displayInfo() {
        System.out.println("Name: " + name);
        System.out.println("Age: " + age);
        System.out.println("GPA: " + gpa);
    }
}

public class BasicEncapsulationDemo {
    public static void main(String[] args) {
        Student student = new Student();
        
        // Cannot access directly
        // student.name = "Alice";  // ERROR! name is private
        
        // Use setter methods
        student.setName("Alice");
        student.setAge(20);
        student.setGpa(3.8);
        
        // Use getter methods
        System.out.println("Student Name: " + student.getName());
        student.displayInfo();
        
        System.out.println();
        
        // Validation in action
        student.setAge(-5);    // Invalid
        student.setGpa(5.0);   // Invalid
    }
}
```

---

## üíª Example 2: Bank Account with Encapsulation

```java
class BankAccount {
    private String accountNumber;
    private String accountHolder;
    private double balance;
    private String pin;
    
    public BankAccount(String accountNumber, String accountHolder, String pin) {
        this.accountNumber = accountNumber;
        this.accountHolder = accountHolder;
        this.pin = pin;
        this.balance = 0;
    }
    
    // Getters
    public String getAccountNumber() {
        return accountNumber;
    }
    
    public String getAccountHolder() {
        return accountHolder;
    }
    
    public double getBalance(String pin) {
        if (verifyPin(pin)) {
            return balance;
        } else {
            System.out.println("Invalid PIN!");
            return -1;
        }
    }
    
    // No setter for balance - only through deposit/withdraw
    public void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println("Deposited: $" + amount);
            System.out.println("New balance: $" + balance);
        } else {
            System.out.println("Invalid amount!");
        }
    }
    
    public void withdraw(double amount, String pin) {
        if (!verifyPin(pin)) {
            System.out.println("Invalid PIN!");
            return;
        }
        
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            System.out.println("Withdrawn: $" + amount);
            System.out.println("New balance: $" + balance);
        } else {
            System.out.println("Invalid amount or insufficient funds!");
        }
    }
    
    public void changePin(String oldPin, String newPin) {
        if (verifyPin(oldPin)) {
            this.pin = newPin;
            System.out.println("PIN changed successfully!");
        } else {
            System.out.println("Invalid old PIN!");
        }
    }
    
    private boolean verifyPin(String pin) {
        return this.pin.equals(pin);
    }
}

public class BankAccountDemo {
    public static void main(String[] args) {
        BankAccount account = new BankAccount("ACC001", "John Doe", "1234");
        
        // Deposit money
        account.deposit(1000);
        
        // Check balance with correct PIN
        double balance = account.getBalance("1234");
        System.out.println("Balance: $" + balance);
        
        // Try with wrong PIN
        account.getBalance("0000");
        
        // Withdraw with correct PIN
        account.withdraw(500, "1234");
        
        // Try withdraw with wrong PIN
        account.withdraw(100, "0000");
        
        // Change PIN
        account.changePin("1234", "5678");
        
        // Cannot access private fields directly
        // account.balance = 999999;  // ERROR!
        // account.pin = "0000";      // ERROR!
    }
}
```

---

## üíª Example 3: Read-Only Class

```java
class Product {
    private final String productId;
    private final String name;
    private final double price;
    
    public Product(String productId, String name, double price) {
        this.productId = productId;
        this.name = name;
        this.price = price;
    }
    
    // Only getters, no setters - immutable object
    public String getProductId() {
        return productId;
    }
    
    public String getName() {
        return name;
    }
    
    public double getPrice() {
        return price;
    }
    
    public void displayInfo() {
        System.out.println("ID: " + productId);
        System.out.println("Name: " + name);
        System.out.println("Price: $" + price);
    }
}

public class ReadOnlyDemo {
    public static void main(String[] args) {
        Product product = new Product("P001", "Laptop", 999.99);
        
        // Can read
        System.out.println("Product: " + product.getName());
        System.out.println("Price: $" + product.getPrice());
        
        // Cannot modify
        // product.setPrice(500);  // No such method!
        // product.price = 500;    // ERROR! private field
        
        product.displayInfo();
        
        System.out.println("\nProduct is immutable!");
    }
}
```

---

## üíª Example 4: Controlled Access with Logic

```java
class Employee {
    private String name;
    private double salary;
    private int age;
    private boolean isActive;
    
    public Employee(String name, int age) {
        this.name = name;
        this.age = age;
        this.isActive = true;
    }
    
    public String getName() {
        return name;
    }
    
    public double getSalary() {
        // Only active employees can see salary
        if (isActive) {
            return salary;
        } else {
            return 0;
        }
    }
    
    public void setSalary(double salary) {
        // Business logic: salary increase validation
        if (salary >= this.salary) {
            this.salary = salary;
            System.out.println("Salary updated to: $" + salary);
        } else {
            System.out.println("Cannot decrease salary!");
        }
    }
    
    public int getAge() {
        return age;
    }
    
    public void setAge(int age) {
        // Age can only increase
        if (age > this.age) {
            this.age = age;
        } else {
            System.out.println("Age cannot decrease!");
        }
    }
    
    public void terminate() {
        this.isActive = false;
        System.out.println(name + " has been terminated.");
    }
    
    public boolean isActive() {
        return isActive;
    }
}

public class ControlledAccessDemo {
    public static void main(String[] args) {
        Employee emp = new Employee("Alice", 30);
        
        emp.setSalary(50000);
        System.out.println("Salary: $" + emp.getSalary());
        
        // Try to decrease salary
        emp.setSalary(40000);
        
        // Try to decrease age
        emp.setAge(25);
        
        // Terminate employee
        emp.terminate();
        System.out.println("Active: " + emp.isActive());
        System.out.println("Salary after termination: $" + emp.getSalary());
    }
}
```

---

## üíª Example 5: Benefits of Encapsulation

```java
// Without encapsulation
class PersonBad {
    public String name;
    public int age;
}

// With encapsulation
class PersonGood {
    private String name;
    private int age;
    
    public void setAge(int age) {
        if (age > 0 && age < 150) {
            this.age = age;
        }
    }
    
    public int getAge() {
        return age;
    }
}

public class EncapsulationBenefitsDemo {
    public static void main(String[] args) {
        System.out.println("=== Without Encapsulation ===");
        PersonBad bad = new PersonBad();
        bad.age = -5;  // Invalid but allowed!
        System.out.println("Age: " + bad.age);
        
        bad.age = 200;  // Invalid but allowed!
        System.out.println("Age: " + bad.age);
        
        System.out.println("\n=== With Encapsulation ===");
        PersonGood good = new PersonGood();
        good.setAge(-5);  // Rejected
        System.out.println("Age: " + good.getAge());
        
        good.setAge(25);  // Accepted
        System.out.println("Age: " + good.getAge());
        
        System.out.println("\nEncapsulation prevents invalid data!");
    }
}
```

---

## üíª Example 6: Calculator with Encapsulation

```java
class Calculator {
    private double result;
    
    public void add(double value) {
        result += value;
    }
    
    public void subtract(double value) {
        result -= value;
    }
    
    public void multiply(double value) {
        result *= value;
    }
    
    public void divide(double value) {
        if (value != 0) {
            result /= value;
        } else {
            System.out.println("Cannot divide by zero!");
        }
    }
    
    public double getResult() {
        return result;
    }
    
    public void clear() {
        result = 0;
    }
    
    // Private helper method
    private void logOperation(String operation) {
        System.out.println("Operation: " + operation + ", Result: " + result);
    }
}

public class CalculatorDemo {
    public static void main(String[] args) {
        Calculator calc = new Calculator();
        
        calc.add(10);
        System.out.println("After add(10): " + calc.getResult());
        
        calc.multiply(5);
        System.out.println("After multiply(5): " + calc.getResult());
        
        calc.subtract(30);
        System.out.println("After subtract(30): " + calc.getResult());
        
        calc.divide(4);
        System.out.println("After divide(4): " + calc.getResult());
        
        calc.divide(0);  // Validation prevents error
        
        calc.clear();
        System.out.println("After clear(): " + calc.getResult());
    }
}
```

---

## üíª Example 7: Date Class with Validation

```java
class Date {
    private int day;
    private int month;
    private int year;
    
    public Date(int day, int month, int year) {
        setDay(day);
        setMonth(month);
        setYear(year);
    }
    
    public int getDay() {
        return day;
    }
    
    public void setDay(int day) {
        if (day >= 1 && day <= 31) {
            this.day = day;
        } else {
            System.out.println("Invalid day!");
            this.day = 1;
        }
    }
    
    public int getMonth() {
        return month;
    }
    
    public void setMonth(int month) {
        if (month >= 1 && month <= 12) {
            this.month = month;
        } else {
            System.out.println("Invalid month!");
            this.month = 1;
        }
    }
    
    public int getYear() {
        return year;
    }
    
    public void setYear(int year) {
        if (year >= 1900 && year <= 2100) {
            this.year = year;
        } else {
            System.out.println("Invalid year!");
            this.year = 2000;
        }
    }
    
    public void display() {
        System.out.println(String.format("%02d/%02d/%04d", day, month, year));
    }
}

public class DateDemo {
    public static void main(String[] args) {
        Date date = new Date(25, 12, 2023);
        date.display();
        
        // Try invalid values
        date.setDay(35);   // Invalid
        date.setMonth(13); // Invalid
        date.setYear(1800); // Invalid
        
        date.display();
    }
}
```

---

## üíª Example 8: Time Class

```java
class Time {
    private int hours;
    private int minutes;
    private int seconds;
    
    public Time(int hours, int minutes, int seconds) {
        setTime(hours, minutes, seconds);
    }
    
    public void setTime(int hours, int minutes, int seconds) {
        setHours(hours);
        setMinutes(minutes);
        setSeconds(seconds);
    }
    
    public void setHours(int hours) {
        this.hours = (hours >= 0 && hours < 24) ? hours : 0;
    }
    
    public void setMinutes(int minutes) {
        this.minutes = (minutes >= 0 && minutes < 60) ? minutes : 0;
    }
    
    public void setSeconds(int seconds) {
        this.seconds = (seconds >= 0 && seconds < 60) ? seconds : 0;
    }
    
    public int getHours() {
        return hours;
    }
    
    public int getMinutes() {
        return minutes;
    }
    
    public int getSeconds() {
        return seconds;
    }
    
    public String toUniversalString() {
        return String.format("%02d:%02d:%02d", hours, minutes, seconds);
    }
    
    public String toString() {
        return String.format("%d:%02d:%02d %s", 
            (hours == 0 || hours == 12) ? 12 : hours % 12,
            minutes, seconds, (hours < 12 ? "AM" : "PM"));
    }
}

public class TimeDemo {
    public static void main(String[] args) {
        Time time = new Time(15, 30, 45);
        
        System.out.println("24-hour format: " + time.toUniversalString());
        System.out.println("12-hour format: " + time.toString());
        
        // Try invalid values
        time.setHours(25);    // Set to 0
        time.setMinutes(70);  // Set to 0
        
        System.out.println("After invalid: " + time.toUniversalString());
    }
}
```

---

## üìä Benefits of Encapsulation

| Benefit | Description |
|---------|-------------|
| **Data Hiding** | Internal representation hidden |
| **Increased Flexibility** | Change implementation without affecting users |
| **Reusability** | Encapsulated code is reusable |
| **Easy Testing** | Test each class independently |
| **Security** | Control access to data |
| **Maintenance** | Easier to maintain and modify |

---

## üí° Best Practices

1. ‚úÖ **Make instance variables private**
   ```java
   private String name;
   private int age;
   ```

2. ‚úÖ **Provide public getters/setters**
   ```java
   public String getName() { return name; }
   public void setName(String name) { this.name = name; }
   ```

3. ‚úÖ **Add validation in setters**
   ```java
   public void setAge(int age) {
       if (age > 0) this.age = age;
   }
   ```

4. ‚úÖ **Use meaningful names**
   ```java
   getBalance(), setBalance()  // Clear intent
   ```

5. ‚úÖ **Don't expose internal representation**
   ```java
   // Return copy, not original
   public Date getDate() {
       return new Date(this.date);
   }
   ```

---

## ‚ö†Ô∏è Common Pitfalls

```java
public class EncapsulationPitfalls {
    // 1. Returning mutable objects
    class Bad {
        private Date date;
        public Date getDate() {
            return date;  // BAD! Can be modified
        }
    }
    class Good {
        private Date date;
        public Date getDate() {
            return new Date(date.getTime());  // Return copy
        }
    }
    
    // 2. Public variables
    class BadStudent {
        public String name;  // BAD! Direct access
    }
    
    // 3. No validation
    class NoValidation {
        private int age;
        public void setAge(int age) {
            this.age = age;  // No validation!
        }
    }
    
    // 4. Useless getters/setters
    class Useless {
        private int x;
        public int getX() { return x; }
        public void setX(int x) { this.x = x; }
        // If no logic, why encapsulate?
    }
}
```

---

## üéØ Interview Questions

1. **What is encapsulation?**
2. **Benefits of encapsulation?**
3. **How to achieve encapsulation?**
4. **What are getters and setters?**
5. **Why make variables private?**
6. **Can we have public variables?**
7. **What is data hiding?**
8. **Difference between encapsulation and abstraction?**
9. **Is encapsulation mandatory?**
10. **What is tight encapsulation?**
11. **Can we encapsulate methods?**
12. **What is information hiding?**
13. **Why validate in setters?**
14. **What is immutable class?**
15. **Real-world examples of encapsulation?**

---

## üìö Related Topics

- [Classes & Objects](01.%20Classes%20%26%20Objects.md)
- [Access Modifiers](../03.%20Advanced%20OOP%20Concepts/06.%20Access%20Modifiers.md)
- [Abstraction](07.%20Abstraction.md)
- [Constructors](02.%20Constructors.md)
- [this Keyword](../03.%20Advanced%20OOP%20Concepts/07.%20this%20%26%20super%20Keywords.md)
