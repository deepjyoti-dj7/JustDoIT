# üé≠ Abstraction

## üìñ Overview

**Abstraction** is the process of hiding implementation details and showing only essential features to the user.

**Key Concepts:**
- Abstract classes
- Abstract methods
- Concrete methods
- Cannot instantiate abstract class
- Achieved through abstract classes and interfaces
- Focus on WHAT rather than HOW

---

## üéØ Abstract Class Rules

```
1. Declared with 'abstract' keyword
2. Can have abstract methods (no body)
3. Can have concrete methods (with body)
4. Cannot be instantiated
5. Can have constructors
6. Can have instance variables
7. Can have static methods
8. Child must implement all abstract methods
```

---

## üíª Example 1: Basic Abstract Class

```java
// Abstract class
abstract class Animal {
    String name;
    
    // Constructor in abstract class
    Animal(String name) {
        this.name = name;
    }
    
    // Abstract method (no body)
    abstract void makeSound();
    
    // Concrete method (with body)
    void sleep() {
        System.out.println(name + " is sleeping");
    }
    
    void eat() {
        System.out.println(name + " is eating");
    }
}

// Concrete class
class Dog extends Animal {
    Dog(String name) {
        super(name);
    }
    
    // Must implement abstract method
    @Override
    void makeSound() {
        System.out.println(name + " barks: Woof!");
    }
}

class Cat extends Animal {
    Cat(String name) {
        super(name);
    }
    
    @Override
    void makeSound() {
        System.out.println(name + " meows: Meow!");
    }
}

public class BasicAbstractionDemo {
    public static void main(String[] args) {
        // Cannot create abstract class object
        // Animal animal = new Animal("Generic");  // ERROR!
        
        // Create concrete class objects
        Animal dog = new Dog("Buddy");
        Animal cat = new Cat("Whiskers");
        
        dog.makeSound();
        dog.eat();
        dog.sleep();
        
        System.out.println();
        
        cat.makeSound();
        cat.eat();
        cat.sleep();
    }
}
```

---

## üíª Example 2: Shape Hierarchy

```java
abstract class Shape {
    String color;
    
    Shape(String color) {
        this.color = color;
    }
    
    // Abstract methods - child must implement
    abstract double calculateArea();
    abstract double calculatePerimeter();
    
    // Concrete method - inherited by all
    void displayColor() {
        System.out.println("Color: " + color);
    }
}

class Circle extends Shape {
    double radius;
    
    Circle(String color, double radius) {
        super(color);
        this.radius = radius;
    }
    
    @Override
    double calculateArea() {
        return 3.14 * radius * radius;
    }
    
    @Override
    double calculatePerimeter() {
        return 2 * 3.14 * radius;
    }
}

class Rectangle extends Shape {
    double length, width;
    
    Rectangle(String color, double length, double width) {
        super(color);
        this.length = length;
        this.width = width;
    }
    
    @Override
    double calculateArea() {
        return length * width;
    }
    
    @Override
    double calculatePerimeter() {
        return 2 * (length + width);
    }
}

public class ShapeDemo {
    public static void main(String[] args) {
        Shape circle = new Circle("Red", 5);
        circle.displayColor();
        System.out.println("Area: " + circle.calculateArea());
        System.out.println("Perimeter: " + circle.calculatePerimeter());
        
        System.out.println();
        
        Shape rectangle = new Rectangle("Blue", 10, 5);
        rectangle.displayColor();
        System.out.println("Area: " + rectangle.calculateArea());
        System.out.println("Perimeter: " + rectangle.calculatePerimeter());
    }
}
```

---

## üíª Example 3: Bank Account System

```java
abstract class BankAccount {
    protected String accountNumber;
    protected String holderName;
    protected double balance;
    
    BankAccount(String accountNumber, String holderName, double balance) {
        this.accountNumber = accountNumber;
        this.holderName = holderName;
        this.balance = balance;
    }
    
    // Abstract methods
    abstract void calculateInterest();
    abstract void withdraw(double amount);
    
    // Concrete methods
    void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println("Deposited: $" + amount);
        }
    }
    
    void displayBalance() {
        System.out.println("Balance: $" + balance);
    }
    
    void displayInfo() {
        System.out.println("Account: " + accountNumber);
        System.out.println("Holder: " + holderName);
        displayBalance();
    }
}

class SavingsAccount extends BankAccount {
    private double interestRate;
    
    SavingsAccount(String accountNumber, String holderName, double balance, double interestRate) {
        super(accountNumber, holderName, balance);
        this.interestRate = interestRate;
    }
    
    @Override
    void calculateInterest() {
        double interest = balance * interestRate / 100;
        balance += interest;
        System.out.println("Interest added: $" + interest);
    }
    
    @Override
    void withdraw(double amount) {
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            System.out.println("Withdrawn: $" + amount);
        } else {
            System.out.println("Insufficient balance!");
        }
    }
}

class CurrentAccount extends BankAccount {
    private double overdraftLimit;
    
    CurrentAccount(String accountNumber, String holderName, double balance, double overdraftLimit) {
        super(accountNumber, holderName, balance);
        this.overdraftLimit = overdraftLimit;
    }
    
    @Override
    void calculateInterest() {
        System.out.println("No interest for current account");
    }
    
    @Override
    void withdraw(double amount) {
        if (amount > 0 && balance + overdraftLimit >= amount) {
            balance -= amount;
            System.out.println("Withdrawn: $" + amount);
        } else {
            System.out.println("Exceeds overdraft limit!");
        }
    }
}

public class BankAccountDemo {
    public static void main(String[] args) {
        System.out.println("=== Savings Account ===");
        BankAccount savings = new SavingsAccount("SAV001", "Alice", 1000, 5);
        savings.displayInfo();
        savings.deposit(500);
        savings.calculateInterest();
        savings.displayBalance();
        
        System.out.println("\n=== Current Account ===");
        BankAccount current = new CurrentAccount("CUR001", "Bob", 500, 1000);
        current.displayInfo();
        current.withdraw(1200);
        current.displayBalance();
    }
}
```

---

## üíª Example 4: Vehicle System

```java
abstract class Vehicle {
    String brand;
    String model;
    int year;
    
    Vehicle(String brand, String model, int year) {
        this.brand = brand;
        this.model = model;
        this.year = year;
    }
    
    // Abstract methods
    abstract void start();
    abstract void stop();
    abstract double calculateFuelEfficiency();
    
    // Concrete method
    void displayInfo() {
        System.out.println("Brand: " + brand);
        System.out.println("Model: " + model);
        System.out.println("Year: " + year);
    }
}

class Car extends Vehicle {
    int doors;
    
    Car(String brand, String model, int year, int doors) {
        super(brand, model, year);
        this.doors = doors;
    }
    
    @Override
    void start() {
        System.out.println("Car started with key");
    }
    
    @Override
    void stop() {
        System.out.println("Car stopped with brake");
    }
    
    @Override
    double calculateFuelEfficiency() {
        return 15.5;  // km per liter
    }
}

class Motorcycle extends Vehicle {
    boolean hasSidecar;
    
    Motorcycle(String brand, String model, int year, boolean hasSidecar) {
        super(brand, model, year);
        this.hasSidecar = hasSidecar;
    }
    
    @Override
    void start() {
        System.out.println("Motorcycle started with kick/button");
    }
    
    @Override
    void stop() {
        System.out.println("Motorcycle stopped with brake lever");
    }
    
    @Override
    double calculateFuelEfficiency() {
        return 40.0;  // km per liter
    }
}

public class VehicleDemo {
    public static void main(String[] args) {
        Vehicle car = new Car("Toyota", "Camry", 2023, 4);
        car.displayInfo();
        car.start();
        System.out.println("Fuel Efficiency: " + car.calculateFuelEfficiency() + " km/l");
        car.stop();
        
        System.out.println();
        
        Vehicle bike = new Motorcycle("Honda", "CBR", 2023, false);
        bike.displayInfo();
        bike.start();
        System.out.println("Fuel Efficiency: " + bike.calculateFuelEfficiency() + " km/l");
        bike.stop();
    }
}
```

---

## üíª Example 5: Payment System

```java
abstract class Payment {
    protected double amount;
    protected String transactionId;
    
    Payment(double amount) {
        this.amount = amount;
        this.transactionId = generateTransactionId();
    }
    
    // Abstract methods
    abstract boolean processPayment();
    abstract void refund();
    
    // Concrete methods
    private String generateTransactionId() {
        return "TXN" + System.currentTimeMillis();
    }
    
    void displayTransactionInfo() {
        System.out.println("Transaction ID: " + transactionId);
        System.out.println("Amount: $" + amount);
    }
}

class CreditCardPayment extends Payment {
    private String cardNumber;
    
    CreditCardPayment(double amount, String cardNumber) {
        super(amount);
        this.cardNumber = cardNumber;
    }
    
    @Override
    boolean processPayment() {
        System.out.println("Processing credit card payment...");
        System.out.println("Card: " + maskCardNumber(cardNumber));
        displayTransactionInfo();
        System.out.println("Payment successful!");
        return true;
    }
    
    @Override
    void refund() {
        System.out.println("Refunding $" + amount + " to card " + maskCardNumber(cardNumber));
    }
    
    private String maskCardNumber(String card) {
        return "****-****-****-" + card.substring(card.length() - 4);
    }
}

class PayPalPayment extends Payment {
    private String email;
    
    PayPalPayment(double amount, String email) {
        super(amount);
        this.email = email;
    }
    
    @Override
    boolean processPayment() {
        System.out.println("Processing PayPal payment...");
        System.out.println("Email: " + email);
        displayTransactionInfo();
        System.out.println("Payment successful!");
        return true;
    }
    
    @Override
    void refund() {
        System.out.println("Refunding $" + amount + " to PayPal account " + email);
    }
}

public class PaymentDemo {
    public static void main(String[] args) {
        Payment payment1 = new CreditCardPayment(100, "1234567890123456");
        payment1.processPayment();
        System.out.println();
        payment1.refund();
        
        System.out.println("\n---\n");
        
        Payment payment2 = new PayPalPayment(50, "user@email.com");
        payment2.processPayment();
        System.out.println();
        payment2.refund();
    }
}
```

---

## üíª Example 6: Abstract Class with All Concrete Methods

```java
abstract class Logger {
    // All methods are concrete, but class is abstract
    void logInfo(String message) {
        System.out.println("[INFO] " + message);
    }
    
    void logWarning(String message) {
        System.out.println("[WARNING] " + message);
    }
    
    void logError(String message) {
        System.out.println("[ERROR] " + message);
    }
}

class ConsoleLogger extends Logger {
    // Inherits all methods
}

class FileLogger extends Logger {
    String filename;
    
    FileLogger(String filename) {
        this.filename = filename;
    }
    
    // Override to add file logging
    @Override
    void logInfo(String message) {
        super.logInfo(message);
        System.out.println("Logged to file: " + filename);
    }
}

public class LoggerDemo {
    public static void main(String[] args) {
        // Cannot instantiate abstract class
        // Logger logger = new Logger();  // ERROR!
        
        Logger console = new ConsoleLogger();
        console.logInfo("Application started");
        console.logWarning("Low memory");
        console.logError("Connection failed");
        
        System.out.println();
        
        Logger file = new FileLogger("app.log");
        file.logInfo("User logged in");
    }
}
```

---

## üíª Example 7: Template Method Pattern

```java
abstract class DataProcessor {
    // Template method - defines algorithm
    public final void process() {
        readData();
        processData();
        writeData();
    }
    
    // Abstract methods - steps to be implemented
    abstract void readData();
    abstract void processData();
    
    // Concrete method - common for all
    void writeData() {
        System.out.println("Writing processed data...");
    }
}

class CSVProcessor extends DataProcessor {
    @Override
    void readData() {
        System.out.println("Reading CSV file...");
    }
    
    @Override
    void processData() {
        System.out.println("Processing CSV data...");
    }
}

class XMLProcessor extends DataProcessor {
    @Override
    void readData() {
        System.out.println("Reading XML file...");
    }
    
    @Override
    void processData() {
        System.out.println("Processing XML data...");
    }
}

public class TemplateMethodDemo {
    public static void main(String[] args) {
        System.out.println("=== CSV Processing ===");
        DataProcessor csv = new CSVProcessor();
        csv.process();
        
        System.out.println("\n=== XML Processing ===");
        DataProcessor xml = new XMLProcessor();
        xml.process();
    }
}
```

---

## üíª Example 8: Employee Management System

```java
abstract class Employee {
    protected String name;
    protected int id;
    protected double baseSalary;
    
    Employee(String name, int id, double baseSalary) {
        this.name = name;
        this.id = id;
        this.baseSalary = baseSalary;
    }
    
    // Abstract method
    abstract double calculateSalary();
    
    // Concrete methods
    void displayInfo() {
        System.out.println("ID: " + id);
        System.out.println("Name: " + name);
        System.out.println("Salary: $" + calculateSalary());
    }
    
    void work() {
        System.out.println(name + " is working");
    }
}

class FullTimeEmployee extends Employee {
    private double bonus;
    
    FullTimeEmployee(String name, int id, double baseSalary, double bonus) {
        super(name, id, baseSalary);
        this.bonus = bonus;
    }
    
    @Override
    double calculateSalary() {
        return baseSalary + bonus;
    }
}

class PartTimeEmployee extends Employee {
    private int hoursWorked;
    private double hourlyRate;
    
    PartTimeEmployee(String name, int id, int hoursWorked, double hourlyRate) {
        super(name, id, 0);
        this.hoursWorked = hoursWorked;
        this.hourlyRate = hourlyRate;
    }
    
    @Override
    double calculateSalary() {
        return hoursWorked * hourlyRate;
    }
}

class ContractEmployee extends Employee {
    private int projectsCompleted;
    private double ratePerProject;
    
    ContractEmployee(String name, int id, int projectsCompleted, double ratePerProject) {
        super(name, id, 0);
        this.projectsCompleted = projectsCompleted;
        this.ratePerProject = ratePerProject;
    }
    
    @Override
    double calculateSalary() {
        return projectsCompleted * ratePerProject;
    }
}

public class EmployeeDemo {
    public static void main(String[] args) {
        Employee[] employees = {
            new FullTimeEmployee("Alice", 101, 50000, 10000),
            new PartTimeEmployee("Bob", 102, 120, 25),
            new ContractEmployee("Charlie", 103, 5, 2000)
        };
        
        for (Employee emp : employees) {
            emp.displayInfo();
            emp.work();
            System.out.println();
        }
    }
}
```

---

## üìä Abstract Class Characteristics

| Feature | Abstract Class |
|---------|----------------|
| **Instantiation** | Cannot create objects |
| **Abstract methods** | Can have (0 or more) |
| **Concrete methods** | Can have |
| **Variables** | Can have instance variables |
| **Constructors** | Can have |
| **Static methods** | Can have |
| **Final methods** | Can have |
| **Inheritance** | Single inheritance |

---

## üí° Best Practices

1. ‚úÖ **Use when sharing code among related classes**
   ```java
   abstract class Shape {
       // Common code for all shapes
   }
   ```

2. ‚úÖ **Define common behavior in abstract class**
   ```java
   abstract class Vehicle {
       void start() { }  // Common for all
   }
   ```

3. ‚úÖ **Use abstract methods for varying behavior**
   ```java
   abstract void calculateSalary();  // Different for each type
   ```

4. ‚úÖ **Provide constructors for initialization**
   ```java
   abstract class Animal {
       Animal(String name) { }
   }
   ```

5. ‚úÖ **Use @Override annotation**
   ```java
   @Override
   void method() { }
   ```

---

## ‚ö†Ô∏è Common Pitfalls

```java
public class AbstractionPitfalls {
    // 1. Cannot instantiate abstract class
    abstract class Test {
        abstract void display();
    }
    // Test t = new Test();  // ERROR!
    
    // 2. Child must implement all abstract methods
    abstract class Parent {
        abstract void method1();
        abstract void method2();
    }
    class Child extends Parent {
        void method1() { }
        // Must implement method2() too!
    }
    
    // 3. Abstract method cannot have body
    abstract class Wrong {
        // abstract void method() { }  // ERROR!
    }
    
    // 4. Abstract method cannot be private
    abstract class Bad {
        // private abstract void method();  // ERROR!
    }
}
```

---

## üéØ Interview Questions

1. **What is abstraction?**
2. **What is an abstract class?**
3. **What is an abstract method?**
4. **Can we instantiate abstract class?**
5. **Can abstract class have constructor?**
6. **Can abstract class have concrete methods?**
7. **Can we have abstract class without abstract methods?**
8. **Can abstract method be private/static/final?**
9. **Difference between abstract class and interface?**
10. **When to use abstract class?**
11. **Can we create reference of abstract class?**
12. **What happens if child doesn't implement abstract method?**
13. **Can abstract class extend another class?**
14. **Can abstract class implement interface?**
15. **Real-world examples of abstraction?**

---

## üìö Related Topics

- [Inheritance](04.%20Inheritance.md)
- [Polymorphism](05.%20Polymorphism.md)
- [Interfaces](08.%20Interfaces.md)
- [Abstract Classes vs Interfaces](09.%20Abstract%20Classes%20vs%20Interfaces.md)
- [Encapsulation](06.%20Encapsulation.md)
