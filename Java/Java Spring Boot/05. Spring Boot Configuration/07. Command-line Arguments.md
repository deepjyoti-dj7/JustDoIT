# ‚ö° Command-line Arguments - Complete Guide

## üìã Table of Contents
- [Introduction](#introduction)
- [Basic Usage](#basic-usage)
- [Spring Boot Command-line Arguments](#spring-boot-command-line-arguments)
- [Argument Types](#argument-types)
- [Accessing Arguments](#accessing-arguments)
- [ApplicationArguments](#applicationarguments)
- [Parsing Custom Arguments](#parsing-custom-arguments)
- [Disabling Command-line Properties](#disabling-command-line-properties)
- [IDE Configuration](#ide-configuration)
- [Maven and Gradle](#maven-and-gradle)
- [Best Practices](#best-practices)
- [Interview Questions](#interview-questions)

---

## üéØ Introduction

**Command-line arguments** allow runtime configuration without modifying code or config files.

### Benefits

- ‚úÖ **Runtime configuration**: Change settings without rebuilding
- ‚úÖ **Override properties**: Override any property at runtime
- ‚úÖ **Testing**: Easy to test different configurations
- ‚úÖ **Deployment**: Configure per deployment without code changes
- ‚úÖ **Highest priority**: Overrides all other configuration sources

---

## üéØ Basic Usage

### Running JAR with Arguments

```bash
# Basic arguments
java -jar myapp.jar arg1 arg2 arg3

# Spring Boot property format
java -jar myapp.jar --server.port=9090

# Multiple properties
java -jar myapp.jar --server.port=9090 --spring.profiles.active=prod

# Property with value containing spaces
java -jar myapp.jar --app.name="My Application"

# Boolean properties
java -jar myapp.jar --debug=true --app.enabled=false

# List values
java -jar myapp.jar --app.servers=server1,server2,server3
```

### Argument Formats

```bash
# Spring Boot format (--key=value)
--server.port=9090
--spring.profiles.active=prod

# Alternative format (--key value)
--server.port 9090
--spring.profiles.active prod

# Short format (single dash, single character)
-p 9090

# Non-option arguments (no dashes)
arg1 arg2 arg3
```

---

## üöÄ Spring Boot Command-line Arguments

### Property Override

```bash
# Override server port
java -jar app.jar --server.port=8081

# Override datasource
java -jar app.jar --spring.datasource.url=jdbc:mysql://localhost:3306/mydb

# Override logging level
java -jar app.jar --logging.level.root=DEBUG

# Multiple overrides
java -jar app.jar \
  --server.port=9090 \
  --spring.profiles.active=prod \
  --logging.level.root=INFO \
  --app.name="Production App"
```

### Profile Activation

```bash
# Activate single profile
java -jar app.jar --spring.profiles.active=prod

# Activate multiple profiles
java -jar app.jar --spring.profiles.active=prod,mysql,cache

# Profile with other properties
java -jar app.jar \
  --spring.profiles.active=prod \
  --server.port=80 \
  --spring.datasource.url=${DATABASE_URL}
```

### Configuration Location

```bash
# Specify config file location
java -jar app.jar --spring.config.location=file:./config/

# Specify config name
java -jar app.jar --spring.config.name=myapp

# Additional config location
java -jar app.jar --spring.config.additional-location=file:/etc/myapp/

# Multiple locations
java -jar app.jar --spring.config.location=classpath:/,file:./config/,file:/etc/myapp/
```

---

## üì¶ Argument Types

### Option Arguments

Arguments with `--` prefix that set properties.

```bash
java -jar app.jar --server.port=9090 --app.name=MyApp
```

```java
@Component
public class ConfigComponent {
    
    @Value("${server.port}")
    private int port;  // 9090
    
    @Value("${app.name}")
    private String name;  // "MyApp"
}
```

### Non-option Arguments

Arguments without `--` prefix.

```bash
java -jar app.jar file1.txt file2.txt process
```

```java
@SpringBootApplication
public class Application {
    
    public static void main(String[] args) {
        // args = ["file1.txt", "file2.txt", "process"]
        SpringApplication.run(Application.class, args);
    }
}
```

### Combined Arguments

```bash
java -jar app.jar \
  --server.port=9090 \
  --spring.profiles.active=prod \
  input.txt output.txt \
  --debug=true
```

---

## üîç Accessing Arguments

### Traditional main() Args

```java
@SpringBootApplication
public class Application {
    
    public static void main(String[] args) {
        // Access raw arguments
        for (String arg : args) {
            System.out.println("Argument: " + arg);
        }
        
        SpringApplication.run(Application.class, args);
    }
}
```

### Using ApplicationArguments

```java
@Component
public class ArgumentsComponent {
    
    @Autowired
    private ApplicationArguments args;
    
    public void printArguments() {
        // Option names (--server.port, --app.name)
        Set<String> optionNames = args.getOptionNames();
        
        // Get option values
        List<String> portValues = args.getOptionValues("server.port");
        String port = args.getOptionValues("server.port").get(0);
        
        // Check if option exists
        boolean hasDebug = args.containsOption("debug");
        
        // Non-option arguments
        List<String> nonOptionArgs = args.getNonOptionArgs();
        
        // Source args (raw)
        String[] sourceArgs = args.getSourceArgs();
    }
}
```

### Complete Example

```bash
java -jar app.jar \
  --server.port=9090 \
  --spring.profiles.active=prod \
  --debug \
  file1.txt file2.txt
```

```java
@Component
public class ArgsProcessor implements CommandLineRunner {
    
    @Autowired
    private ApplicationArguments args;
    
    @Override
    public void run(String... args) throws Exception {
        // Option arguments
        if (args.containsOption("server.port")) {
            String port = args.getOptionValues("server.port").get(0);
            System.out.println("Server port: " + port);  // 9090
        }
        
        if (args.containsOption("spring.profiles.active")) {
            String profile = args.getOptionValues("spring.profiles.active").get(0);
            System.out.println("Active profile: " + profile);  // prod
        }
        
        // Flag (no value)
        if (args.containsOption("debug")) {
            System.out.println("Debug mode enabled");
        }
        
        // Non-option arguments
        List<String> files = args.getNonOptionArgs();
        System.out.println("Files: " + files);  // [file1.txt, file2.txt]
        
        // All option names
        Set<String> optionNames = args.getOptionNames();
        System.out.println("Options: " + optionNames);
        // [server.port, spring.profiles.active, debug]
    }
}
```

---

## üìã ApplicationArguments

### Interface Methods

```java
public interface ApplicationArguments {
    
    // Raw arguments as passed to main()
    String[] getSourceArgs();
    
    // Names of option arguments (--key=value)
    Set<String> getOptionNames();
    
    // Check if option exists
    boolean containsOption(String name);
    
    // Get values for option (can have multiple values)
    List<String> getOptionValues(String name);
    
    // Non-option arguments
    List<String> getNonOptionArgs();
}
```

### Injection

```java
@Component
public class MyComponent {
    
    private final ApplicationArguments args;
    
    // Constructor injection
    public MyComponent(ApplicationArguments args) {
        this.args = args;
    }
}

// Or field injection
@Component
public class AnotherComponent {
    
    @Autowired
    private ApplicationArguments args;
}
```

### Usage Examples

```java
@Component
public class ArgumentExamples {
    
    @Autowired
    private ApplicationArguments args;
    
    public void examples() {
        // Example 1: Get single value
        if (args.containsOption("server.port")) {
            String port = args.getOptionValues("server.port").get(0);
        }
        
        // Example 2: Get multiple values
        if (args.containsOption("app.servers")) {
            List<String> servers = args.getOptionValues("app.servers");
            // Can be: --app.servers=s1 --app.servers=s2 --app.servers=s3
        }
        
        // Example 3: Boolean flag
        boolean isDebug = args.containsOption("debug");
        
        // Example 4: Process files
        List<String> files = args.getNonOptionArgs();
        for (String file : files) {
            processFile(file);
        }
        
        // Example 5: Iterate all options
        for (String optionName : args.getOptionNames()) {
            List<String> values = args.getOptionValues(optionName);
            System.out.println(optionName + " = " + values);
        }
    }
}
```

---

## üîß Parsing Custom Arguments

### CommandLineRunner

```java
@Component
public class CustomArgsProcessor implements CommandLineRunner {
    
    @Override
    public void run(String... args) throws Exception {
        // Called after ApplicationContext is loaded
        // args contains command-line arguments
        
        for (String arg : args) {
            System.out.println("Processing: " + arg);
        }
    }
}
```

### ApplicationRunner

```java
@Component
public class CustomApplicationRunner implements ApplicationRunner {
    
    @Override
    public void run(ApplicationArguments args) throws Exception {
        // Access to ApplicationArguments
        
        if (args.containsOption("import-data")) {
            String dataFile = args.getOptionValues("import-data").get(0);
            importData(dataFile);
        }
        
        if (args.containsOption("export-data")) {
            String outputFile = args.getOptionValues("export-data").get(0);
            exportData(outputFile);
        }
    }
    
    private void importData(String file) {
        System.out.println("Importing data from: " + file);
    }
    
    private void exportData(String file) {
        System.out.println("Exporting data to: " + file);
    }
}
```

### Custom Argument Parser

```java
@Component
public class CustomArgumentParser implements ApplicationRunner {
    
    @Override
    public void run(ApplicationArguments args) throws Exception {
        // Parse custom format: command:action:parameter
        for (String arg : args.getNonOptionArgs()) {
            if (arg.contains(":")) {
                String[] parts = arg.split(":");
                String command = parts[0];
                String action = parts.length > 1 ? parts[1] : "";
                String parameter = parts.length > 2 ? parts[2] : "";
                
                executeCommand(command, action, parameter);
            }
        }
    }
    
    private void executeCommand(String command, String action, String parameter) {
        System.out.println("Command: " + command);
        System.out.println("Action: " + action);
        System.out.println("Parameter: " + parameter);
    }
}
```

```bash
# Usage
java -jar app.jar db:migrate:up user:create:admin report:generate:monthly
```

---

## üö´ Disabling Command-line Properties

### Disable Command-line Args

```java
@SpringBootApplication
public class Application {
    
    public static void main(String[] args) {
        SpringApplication app = new SpringApplication(Application.class);
        
        // Disable command-line arguments from becoming properties
        app.setAddCommandLineProperties(false);
        
        app.run(args);
    }
}
```

Now command-line arguments won't override properties:

```bash
# This won't change server.port
java -jar app.jar --server.port=9090
```

### Selective Disabling

```java
@SpringBootApplication
public class Application {
    
    public static void main(String[] args) {
        // Filter arguments before passing to Spring
        String[] filteredArgs = Arrays.stream(args)
            .filter(arg -> !arg.startsWith("--internal"))
            .toArray(String[]::new);
        
        SpringApplication.run(Application.class, filteredArgs);
    }
}
```

---

## üíª IDE Configuration

### IntelliJ IDEA

```
1. Run ‚Üí Edit Configurations
2. Select your Application
3. In "Program arguments" field, add:
   --server.port=9090 --spring.profiles.active=dev

4. Or in "VM options" for system properties:
   -Dserver.port=9090
```

### Eclipse/STS

```
1. Run ‚Üí Run Configurations
2. Select your Application
3. Arguments tab
4. In "Program arguments" section:
   --server.port=9090 --spring.profiles.active=dev
```

### VS Code

```json
// launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "java",
      "name": "Application",
      "request": "launch",
      "mainClass": "com.example.Application",
      "args": "--server.port=9090 --spring.profiles.active=dev"
    }
  ]
}
```

---

## üî® Maven and Gradle

### Maven Spring Boot Plugin

```bash
# Pass arguments via -Dspring-boot.run.arguments
mvn spring-boot:run -Dspring-boot.run.arguments="--server.port=9090,--spring.profiles.active=dev"

# Or multiple arguments
mvn spring-boot:run -Dspring-boot.run.arguments="--server.port=9090 --spring.profiles.active=dev --debug"
```

### Maven Exec Plugin

```bash
# Using exec:java
mvn exec:java -Dexec.mainClass="com.example.Application" \
  -Dexec.args="--server.port=9090 --spring.profiles.active=dev"
```

### Gradle

```bash
# Pass arguments via --args
gradle bootRun --args='--server.port=9090 --spring.profiles.active=dev'

# Multiple arguments
gradle bootRun --args='--server.port=9090 --spring.profiles.active=dev --debug'
```

### Gradle Configuration

```groovy
// build.gradle
bootRun {
    args = ['--server.port=9090', '--spring.profiles.active=dev']
}
```

```kotlin
// build.gradle.kts
tasks.bootRun {
    args = listOf("--server.port=9090", "--spring.profiles.active=dev")
}
```

---

## üìå Best Practices

### 1. Use Descriptive Argument Names

```bash
# ‚úÖ Clear and descriptive
--import-file=/data/users.csv
--export-format=json
--batch-size=1000

# ‚ùå Ambiguous
--file=/data/users.csv
--format=json
--size=1000
```

### 2. Provide Default Values in Configuration

```properties
# application.properties
server.port=8080
app.batch-size=100
```

```bash
# Override only when needed
java -jar app.jar --server.port=9090
```

### 3. Document Required Arguments

```java
/**
 * Application entry point.
 * 
 * Command-line arguments:
 * 
 * Required:
 * --spring.profiles.active   Active profile (dev, test, prod)
 * 
 * Optional:
 * --server.port              Server port (default: 8080)
 * --app.batch-size           Batch processing size (default: 100)
 * --import-file              File to import on startup
 */
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

### 4. Validate Arguments on Startup

```java
@Component
public class ArgumentValidator implements ApplicationRunner {
    
    @Override
    public void run(ApplicationArguments args) throws Exception {
        // Validate required arguments
        if (args.containsOption("import-file")) {
            String file = args.getOptionValues("import-file").get(0);
            if (!new File(file).exists()) {
                throw new IllegalArgumentException("Import file not found: " + file);
            }
        }
        
        // Validate argument format
        if (args.containsOption("batch-size")) {
            String size = args.getOptionValues("batch-size").get(0);
            try {
                int batchSize = Integer.parseInt(size);
                if (batchSize < 1 || batchSize > 10000) {
                    throw new IllegalArgumentException("Batch size must be between 1 and 10000");
                }
            } catch (NumberFormatException e) {
                throw new IllegalArgumentException("Invalid batch size: " + size);
            }
        }
    }
}
```

### 5. Use Consistent Naming Conventions

```bash
# ‚úÖ Consistent with application properties
--server.port=9090
--spring.profiles.active=prod
--app.max-users=1000

# ‚ùå Inconsistent
--serverPort=9090
--profile=prod
--MAX_USERS=1000
```

### 6. Separate Concerns

```bash
# ‚úÖ Use environment variables for secrets
export DB_PASSWORD=secret123
java -jar app.jar --spring.profiles.active=prod

# ‚ùå Secrets in command line (visible in process list)
java -jar app.jar --spring.datasource.password=secret123
```

### 7. Use Profile-Specific Defaults

```properties
# application-dev.properties
server.port=8080
app.batch-size=10

# application-prod.properties
server.port=80
app.batch-size=1000
```

```bash
# Override only when needed
java -jar app.jar --spring.profiles.active=prod --app.batch-size=500
```

---

## üé§ Interview Questions

### Q1: What are command-line arguments in Spring Boot?
**Answer:** Runtime parameters passed when starting application that can override configuration properties. Format: `--key=value`.

### Q2: How to pass command-line arguments?
**Answer:**
```bash
java -jar app.jar --server.port=9090 --spring.profiles.active=prod
```

### Q3: Priority of command-line arguments?
**Answer:** Highest priority - overrides environment variables, system properties, and configuration files.

### Q4: Difference between option and non-option arguments?
**Answer:**
- **Option arguments**: `--key=value` format, become properties
- **Non-option arguments**: No `--` prefix, accessed via `ApplicationArguments.getNonOptionArgs()`

### Q5: How to access command-line arguments?
**Answer:**
```java
@Autowired
private ApplicationArguments args;

// Or in main()
public static void main(String[] args) { }
```

### Q6: What is ApplicationArguments interface?
**Answer:** Interface providing structured access to command-line arguments with methods like `getOptionNames()`, `getOptionValues()`, `getNonOptionArgs()`.

### Q7: CommandLineRunner vs ApplicationRunner?
**Answer:**
- **CommandLineRunner**: `run(String... args)` - raw string args
- **ApplicationRunner**: `run(ApplicationArguments args)` - structured args access

### Q8: How to disable command-line properties?
**Answer:**
```java
app.setAddCommandLineProperties(false);
```

### Q9: How to pass arguments with Maven?
**Answer:**
```bash
mvn spring-boot:run -Dspring-boot.run.arguments="--server.port=9090"
```

### Q10: Best practice for secrets in command-line?
**Answer:** Don't pass secrets via command-line (visible in process list). Use environment variables or secrets management instead.

---

## üìö Summary

### Basic Syntax

```bash
# Single argument
java -jar app.jar --server.port=9090

# Multiple arguments
java -jar app.jar \
  --server.port=9090 \
  --spring.profiles.active=prod \
  --app.name="My App"

# Non-option arguments
java -jar app.jar file1.txt file2.txt --process

# Boolean flags
java -jar app.jar --debug --verbose
```

### Accessing Arguments

```java
// ApplicationArguments
@Autowired
private ApplicationArguments args;

// Get option value
String port = args.getOptionValues("server.port").get(0);

// Check option exists
boolean hasDebug = args.containsOption("debug");

// Get non-option args
List<String> files = args.getNonOptionArgs();

// Get all option names
Set<String> options = args.getOptionNames();
```

### Priority Order

1. **Command-line arguments** (highest)
2. System properties
3. Environment variables
4. Config files (lowest)

### Complete Example

```bash
# Run with arguments
java -jar myapp.jar \
  --server.port=9090 \
  --spring.profiles.active=prod \
  --import-file=data.csv \
  --debug
```

```java
@Component
public class ArgsProcessor implements ApplicationRunner {
    
    @Override
    public void run(ApplicationArguments args) throws Exception {
        // Server port
        if (args.containsOption("server.port")) {
            System.out.println("Port: " + args.getOptionValues("server.port").get(0));
        }
        
        // Profile
        if (args.containsOption("spring.profiles.active")) {
            System.out.println("Profile: " + args.getOptionValues("spring.profiles.active").get(0));
        }
        
        // Import file
        if (args.containsOption("import-file")) {
            String file = args.getOptionValues("import-file").get(0);
            importData(file);
        }
        
        // Debug flag
        if (args.containsOption("debug")) {
            System.out.println("Debug mode enabled");
        }
    }
}
```

### Maven/Gradle

```bash
# Maven
mvn spring-boot:run -Dspring-boot.run.arguments="--server.port=9090"

# Gradle
gradle bootRun --args='--server.port=9090'
```

**Next:** Configuration Precedence ‚Üí

