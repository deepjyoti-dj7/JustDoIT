# üîó Path Variables & Query Parameters - Complete Guide

## üìã Table of Contents
- [Introduction](#introduction)
- [Path Variables](#path-variables)
- [Query Parameters](#query-parameters)
- [Path Variables vs Query Parameters](#path-variables-vs-query-parameters)
- [Matrix Variables](#matrix-variables)
- [Validation](#validation)
- [Advanced Techniques](#advanced-techniques)
- [Best Practices](#best-practices)
- [Interview Questions](#interview-questions)

---

## üéØ Introduction

**Path Variables** and **Query Parameters** are two ways to pass data in HTTP requests:

- **Path Variables**: Part of URL path (`/users/123`)
- **Query Parameters**: After `?` in URL (`/users?id=123`)

---

## üîó Path Variables

### Basic Usage

```java
@GetMapping("/users/{id}")
public User getUser(@PathVariable Long id) {
    return userService.findById(id);
}
```

**Request:** `GET /users/123`

### Multiple Path Variables

```java
@GetMapping("/users/{userId}/orders/{orderId}")
public Order getOrder(
        @PathVariable Long userId,
        @PathVariable Long orderId) {
    return orderService.findByUserAndOrder(userId, orderId);
}
```

**Request:** `GET /users/123/orders/456`

### Named Path Variables

```java
@GetMapping("/users/{userId}")
public User getUser(@PathVariable("userId") Long id) {
    return userService.findById(id);
}
```

### Optional Path Variables

```java
@GetMapping({"/users", "/users/{id}"})
public ResponseEntity<?> getUsers(@PathVariable(required = false) Long id) {
    if (id == null) {
        return ResponseEntity.ok(userService.findAll());
    }
    return ResponseEntity.ok(userService.findById(id));
}
```

**Requests:**
- `GET /users` ‚Üí Returns all users
- `GET /users/123` ‚Üí Returns user with ID 123

### Path Variable with Regular Expression

```java
// Only numeric IDs
@GetMapping("/users/{id:[0-9]+}")
public User getUserById(@PathVariable Long id) {
    return userService.findById(id);
}

// Only alphabetic usernames
@GetMapping("/users/{username:[a-zA-Z]+}")
public User getUserByUsername(@PathVariable String username) {
    return userService.findByUsername(username);
}

// Email pattern
@GetMapping("/users/email/{email:.+@.+\\..+}")
public User getUserByEmail(@PathVariable String email) {
    return userService.findByEmail(email);
}
```

### Map All Path Variables

```java
@GetMapping("/users/{id}/details/{detailId}")
public String getDetails(@PathVariable Map<String, String> pathVars) {
    String userId = pathVars.get("id");
    String detailId = pathVars.get("detailId");
    return "User: " + userId + ", Detail: " + detailId;
}
```

**Request:** `GET /users/123/details/456`

### Complete Example

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping("/{id}")
    public ResponseEntity<User> getUser(@PathVariable Long id) {
        return userService.findById(id)
            .map(ResponseEntity::ok)
            .orElse(ResponseEntity.notFound().build());
    }
    
    @GetMapping("/{userId}/orders/{orderId}")
    public ResponseEntity<Order> getOrder(
            @PathVariable Long userId,
            @PathVariable Long orderId) {
        
        return orderService.findByUserAndOrder(userId, orderId)
            .map(ResponseEntity::ok)
            .orElse(ResponseEntity.notFound().build());
    }
    
    @GetMapping("/{userId}/posts")
    public List<Post> getUserPosts(@PathVariable Long userId) {
        return postService.findByUserId(userId);
    }
}
```

---

## üîç Query Parameters

### Single Parameter

```java
@GetMapping("/users/search")
public List<User> searchUsers(@RequestParam String name) {
    return userService.findByName(name);
}
```

**Request:** `GET /users/search?name=John`

### Multiple Parameters

```java
@GetMapping("/users/search")
public List<User> searchUsers(
        @RequestParam String name,
        @RequestParam int minAge,
        @RequestParam int maxAge) {
    return userService.search(name, minAge, maxAge);
}
```

**Request:** `GET /users/search?name=John&minAge=25&maxAge=35`

### Optional Parameters

```java
@GetMapping("/users/search")
public List<User> searchUsers(
        @RequestParam String name,
        @RequestParam(required = false) Integer minAge,
        @RequestParam(required = false) Integer maxAge) {
    return userService.search(name, minAge, maxAge);
}
```

**Requests:**
- `GET /users/search?name=John&minAge=25&maxAge=35` ‚úÖ
- `GET /users/search?name=John&minAge=25` ‚úÖ
- `GET /users/search?name=John` ‚úÖ

### Default Values

```java
@GetMapping("/users")
public Page<User> getUsers(
        @RequestParam(defaultValue = "0") int page,
        @RequestParam(defaultValue = "10") int size,
        @RequestParam(defaultValue = "id") String sortBy,
        @RequestParam(defaultValue = "ASC") String sortDirection) {
    
    Sort.Direction direction = Sort.Direction.fromString(sortDirection);
    Pageable pageable = PageRequest.of(page, size, Sort.by(direction, sortBy));
    
    return userService.findAll(pageable);
}
```

**Requests:**
- `GET /users` ‚Üí Uses defaults (page=0, size=10, sortBy=id, sortDirection=ASC)
- `GET /users?page=2&size=20` ‚Üí Custom page and size
- `GET /users?sortBy=name&sortDirection=DESC` ‚Üí Custom sorting

### Named Parameters

```java
@GetMapping("/users/search")
public List<User> searchUsers(
        @RequestParam("q") String query,
        @RequestParam("min_age") Integer minAge,
        @RequestParam("max_age") Integer maxAge) {
    return userService.search(query, minAge, maxAge);
}
```

**Request:** `GET /users/search?q=John&min_age=25&max_age=35`

### List Parameters

```java
@GetMapping("/users")
public List<User> getUsersByIds(@RequestParam List<Long> ids) {
    return userService.findByIds(ids);
}
```

**Requests:**
- `GET /users?ids=1,2,3,4,5` (comma-separated)
- `GET /users?ids=1&ids=2&ids=3&ids=4&ids=5` (multiple params)

### Array Parameters

```java
@GetMapping("/users/filter")
public List<User> filterUsers(@RequestParam String[] roles) {
    return userService.findByRoles(Arrays.asList(roles));
}
```

**Request:** `GET /users/filter?roles=ADMIN&roles=USER`

### Map All Parameters

```java
@GetMapping("/users/search")
public List<User> searchUsers(@RequestParam Map<String, String> params) {
    String name = params.get("name");
    String email = params.get("email");
    Integer age = params.containsKey("age") ? Integer.parseInt(params.get("age")) : null;
    
    return userService.search(name, email, age);
}
```

**Request:** `GET /users/search?name=John&email=john@example.com&age=30`

### Complete Example

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // Simple search
    @GetMapping("/search")
    public List<User> searchByName(@RequestParam String name) {
        return userService.findByName(name);
    }
    
    // Advanced search
    @GetMapping("/advanced-search")
    public List<User> advancedSearch(
            @RequestParam(required = false) String name,
            @RequestParam(required = false) String email,
            @RequestParam(required = false) Integer minAge,
            @RequestParam(required = false) Integer maxAge,
            @RequestParam(required = false) String city,
            @RequestParam(required = false) List<String> roles) {
        
        return userService.advancedSearch(name, email, minAge, maxAge, city, roles);
    }
    
    // Pagination and sorting
    @GetMapping
    public Page<User> getUsers(
            @RequestParam(defaultValue = "0") int page,
            @RequestParam(defaultValue = "10") int size,
            @RequestParam(defaultValue = "id") String sortBy,
            @RequestParam(defaultValue = "ASC") String sortDirection) {
        
        Sort.Direction direction = Sort.Direction.fromString(sortDirection);
        Pageable pageable = PageRequest.of(page, size, Sort.by(direction, sortBy));
        
        return userService.findAll(pageable);
    }
    
    // Multiple IDs
    @GetMapping("/bulk")
    public List<User> getUsersByIds(@RequestParam List<Long> ids) {
        return userService.findByIds(ids);
    }
}
```

---

## ‚öñÔ∏è Path Variables vs Query Parameters

### Comparison Table

| Feature | Path Variable | Query Parameter |
|---------|---------------|-----------------|
| **Syntax** | `/users/123` | `/users?id=123` |
| **Purpose** | Resource identification | Filtering, sorting, pagination |
| **Required** | Usually required | Usually optional |
| **SEO** | Better for SEO | Not ideal for SEO |
| **Caching** | Better caching | Less cacheable |
| **Readability** | More readable | Can get messy |
| **Hierarchy** | Shows hierarchy | Flat structure |

### When to Use Path Variables

```java
// ‚úÖ Resource identification
@GetMapping("/users/{id}")
@GetMapping("/users/{userId}/orders/{orderId}")
@GetMapping("/countries/{countryCode}/cities/{cityId}")

// ‚úÖ Required parameters
@GetMapping("/products/{productId}")

// ‚úÖ Hierarchical relationships
@GetMapping("/departments/{deptId}/employees/{empId}")
```

### When to Use Query Parameters

```java
// ‚úÖ Filtering
@GetMapping("/users?role=ADMIN&status=ACTIVE")

// ‚úÖ Sorting
@GetMapping("/users?sortBy=name&sortDirection=DESC")

// ‚úÖ Pagination
@GetMapping("/users?page=0&size=10")

// ‚úÖ Optional search criteria
@GetMapping("/users?name=John&minAge=25&maxAge=35")

// ‚úÖ Multiple values
@GetMapping("/users?roles=ADMIN&roles=USER")
```

### Combining Both

```java
@GetMapping("/users/{userId}/orders")
public List<Order> getUserOrders(
        @PathVariable Long userId,
        @RequestParam(required = false) String status,
        @RequestParam(defaultValue = "0") int page,
        @RequestParam(defaultValue = "10") int size) {
    
    Pageable pageable = PageRequest.of(page, size);
    
    if (status != null) {
        return orderService.findByUserIdAndStatus(userId, status, pageable);
    }
    return orderService.findByUserId(userId, pageable);
}
```

**Requests:**
- `GET /users/123/orders` ‚Üí All orders
- `GET /users/123/orders?status=COMPLETED` ‚Üí Completed orders only
- `GET /users/123/orders?status=PENDING&page=1&size=20` ‚Üí Pending orders, page 2

---

## üéØ Matrix Variables

### Enable Matrix Variables

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void configurePathMatch(PathMatchConfigurer configurer) {
        UrlPathHelper urlPathHelper = new UrlPathHelper();
        urlPathHelper.setRemoveSemicolonContent(false);
        configurer.setUrlPathHelper(urlPathHelper);
    }
}
```

### Basic Matrix Variable

```java
@GetMapping("/users/{id}")
public User getUser(
        @PathVariable Long id,
        @MatrixVariable String locale) {
    return userService.findById(id, locale);
}
```

**Request:** `GET /users/123;locale=en`

### Multiple Matrix Variables

```java
@GetMapping("/products/{id}")
public Product getProduct(
        @PathVariable Long id,
        @MatrixVariable String color,
        @MatrixVariable String size) {
    return productService.findById(id, color, size);
}
```

**Request:** `GET /products/456;color=red;size=large`

### Optional Matrix Variables

```java
@GetMapping("/users/{id}")
public User getUser(
        @PathVariable Long id,
        @MatrixVariable(required = false) String locale) {
    
    if (locale == null) {
        locale = "en"; // default
    }
    return userService.findById(id, locale);
}
```

### Matrix Variables with Multiple Path Segments

```java
@GetMapping("/owners/{ownerId}/pets/{petId}")
public Pet getPet(
        @MatrixVariable(name = "q", pathVar = "ownerId") String ownerQuery,
        @MatrixVariable(name = "q", pathVar = "petId") String petQuery) {
    
    // Different 'q' variables for different path segments
    return petService.find(ownerQuery, petQuery);
}
```

**Request:** `GET /owners/42;q=11/pets/21;q=22`

---

## ‚úÖ Validation

### Path Variable Validation

```java
@RestController
@Validated
public class UserController {
    
    @GetMapping("/users/{id}")
    public User getUser(
            @PathVariable @Min(1) @Max(999999) Long id) {
        return userService.findById(id);
    }
    
    @GetMapping("/users/username/{username}")
    public User getUserByUsername(
            @PathVariable @Pattern(regexp = "[a-zA-Z0-9_]{3,20}") String username) {
        return userService.findByUsername(username);
    }
}
```

### Query Parameter Validation

```java
@GetMapping("/users/search")
public List<User> searchUsers(
        @RequestParam @NotBlank @Size(min = 2, max = 50) String name,
        @RequestParam @Min(0) @Max(150) Integer age) {
    return userService.search(name, age);
}

@GetMapping("/users")
public Page<User> getUsers(
        @RequestParam(defaultValue = "0") @Min(0) int page,
        @RequestParam(defaultValue = "10") @Min(1) @Max(100) int size) {
    
    Pageable pageable = PageRequest.of(page, size);
    return userService.findAll(pageable);
}
```

### Custom Validation

```java
// Custom annotation
@Target({ElementType.PARAMETER, ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = SortFieldValidator.class)
public @interface ValidSortField {
    String message() default "Invalid sort field";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}

// Validator
public class SortFieldValidator implements ConstraintValidator<ValidSortField, String> {
    private static final Set<String> VALID_FIELDS = Set.of("id", "name", "email", "age");
    
    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        return value == null || VALID_FIELDS.contains(value);
    }
}

// Usage
@GetMapping("/users")
public Page<User> getUsers(
        @RequestParam(defaultValue = "id") @ValidSortField String sortBy) {
    return userService.findAll(Sort.by(sortBy));
}
```

### Validation Exception Handling

```java
@RestControllerAdvice
public class ValidationExceptionHandler {
    
    @ExceptionHandler(ConstraintViolationException.class)
    public ResponseEntity<Map<String, String>> handleConstraintViolation(
            ConstraintViolationException ex) {
        
        Map<String, String> errors = new HashMap<>();
        ex.getConstraintViolations().forEach(violation -> {
            String path = violation.getPropertyPath().toString();
            String message = violation.getMessage();
            errors.put(path, message);
        });
        
        return ResponseEntity.badRequest().body(errors);
    }
}
```

---

## üöÄ Advanced Techniques

### DTO for Query Parameters

```java
// DTO
@Data
public class UserSearchRequest {
    private String name;
    private String email;
    
    @Min(0)
    private Integer minAge;
    
    @Max(150)
    private Integer maxAge;
    
    private String city;
    private List<String> roles;
    
    @Min(0)
    private int page = 0;
    
    @Min(1) @Max(100)
    private int size = 10;
    
    private String sortBy = "id";
    private String sortDirection = "ASC";
}

// Controller
@GetMapping("/users/search")
public Page<User> searchUsers(@Valid UserSearchRequest request) {
    Sort.Direction direction = Sort.Direction.fromString(request.getSortDirection());
    Pageable pageable = PageRequest.of(
        request.getPage(),
        request.getSize(),
        Sort.by(direction, request.getSortBy())
    );
    
    return userService.search(request, pageable);
}
```

**Request:** `GET /users/search?name=John&minAge=25&page=1&size=20&sortBy=name`

### Custom Argument Resolver

```java
// Pageable request
@Data
public class PageRequest {
    private int page = 0;
    private int size = 10;
    private String sortBy = "id";
    private String sortDirection = "ASC";
    
    public Pageable toPageable() {
        Sort.Direction direction = Sort.Direction.fromString(sortDirection);
        return org.springframework.data.domain.PageRequest.of(
            page, size, Sort.by(direction, sortBy)
        );
    }
}

// Argument resolver
public class PageRequestResolver implements HandlerMethodArgumentResolver {
    
    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        return parameter.getParameterType().equals(PageRequest.class);
    }
    
    @Override
    public Object resolveArgument(
            MethodParameter parameter,
            ModelAndViewContainer mavContainer,
            NativeWebRequest webRequest,
            WebDataBinderFactory binderFactory) {
        
        PageRequest pageRequest = new PageRequest();
        
        String page = webRequest.getParameter("page");
        if (page != null) pageRequest.setPage(Integer.parseInt(page));
        
        String size = webRequest.getParameter("size");
        if (size != null) pageRequest.setSize(Integer.parseInt(size));
        
        String sortBy = webRequest.getParameter("sortBy");
        if (sortBy != null) pageRequest.setSortBy(sortBy);
        
        String sortDirection = webRequest.getParameter("sortDirection");
        if (sortDirection != null) pageRequest.setSortDirection(sortDirection);
        
        return pageRequest;
    }
}

// Register resolver
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void addArgumentResolvers(List<HandlerMethodArgumentResolver> resolvers) {
        resolvers.add(new PageRequestResolver());
    }
}

// Usage
@GetMapping("/users")
public Page<User> getUsers(PageRequest pageRequest) {
    return userService.findAll(pageRequest.toPageable());
}
```

### Specification Pattern for Dynamic Queries

```java
public class UserSpecifications {
    
    public static Specification<User> hasName(String name) {
        return (root, query, cb) -> 
            name == null ? null : cb.like(cb.lower(root.get("name")), "%" + name.toLowerCase() + "%");
    }
    
    public static Specification<User> hasEmail(String email) {
        return (root, query, cb) -> 
            email == null ? null : cb.equal(root.get("email"), email);
    }
    
    public static Specification<User> ageGreaterThan(Integer age) {
        return (root, query, cb) -> 
            age == null ? null : cb.greaterThanOrEqualTo(root.get("age"), age);
    }
    
    public static Specification<User> ageLessThan(Integer age) {
        return (root, query, cb) -> 
            age == null ? null : cb.lessThanOrEqualTo(root.get("age"), age);
    }
}

// Controller
@GetMapping("/users/search")
public Page<User> searchUsers(
        @RequestParam(required = false) String name,
        @RequestParam(required = false) String email,
        @RequestParam(required = false) Integer minAge,
        @RequestParam(required = false) Integer maxAge,
        Pageable pageable) {
    
    Specification<User> spec = Specification.where(null);
    
    if (name != null) {
        spec = spec.and(UserSpecifications.hasName(name));
    }
    if (email != null) {
        spec = spec.and(UserSpecifications.hasEmail(email));
    }
    if (minAge != null) {
        spec = spec.and(UserSpecifications.ageGreaterThan(minAge));
    }
    if (maxAge != null) {
        spec = spec.and(UserSpecifications.ageLessThan(maxAge));
    }
    
    return userRepository.findAll(spec, pageable);
}
```

---

## üìå Best Practices

### 1. Use Path Variables for Resource Identification

```java
// ‚úÖ Good
@GetMapping("/users/{id}")
@GetMapping("/orders/{orderId}")
@GetMapping("/products/{productId}")

// ‚ùå Bad
@GetMapping("/users?id=123")
```

### 2. Use Query Parameters for Filtering

```java
// ‚úÖ Good
@GetMapping("/users?role=ADMIN&status=ACTIVE")

// ‚ùå Bad
@GetMapping("/users/ADMIN/ACTIVE")
```

### 3. Provide Default Values for Optional Parameters

```java
// ‚úÖ Good
@GetMapping("/users")
public Page<User> getUsers(
        @RequestParam(defaultValue = "0") int page,
        @RequestParam(defaultValue = "10") int size) {
    // ...
}

// ‚ùå Bad - requires all parameters
@GetMapping("/users")
public Page<User> getUsers(
        @RequestParam int page,
        @RequestParam int size) {
    // ...
}
```

### 4. Validate Input

```java
// ‚úÖ Good
@GetMapping("/users/{id}")
public User getUser(@PathVariable @Min(1) Long id) {
    return userService.findById(id);
}

@GetMapping("/users/search")
public List<User> searchUsers(
        @RequestParam @NotBlank @Size(min = 2) String name) {
    return userService.findByName(name);
}
```

### 5. Use Meaningful Parameter Names

```java
// ‚úÖ Good
@GetMapping("/users/search")
public List<User> searchUsers(
        @RequestParam String name,
        @RequestParam Integer minAge,
        @RequestParam Integer maxAge) {
    // ...
}

// ‚ùå Bad
@GetMapping("/users/search")
public List<User> searchUsers(
        @RequestParam String n,
        @RequestParam Integer min,
        @RequestParam Integer max) {
    // ...
}
```

### 6. Document Parameters

```java
@GetMapping("/users/{id}")
@Operation(summary = "Get user by ID")
public User getUser(
        @Parameter(description = "User ID", required = true, example = "123")
        @PathVariable Long id) {
    return userService.findById(id);
}

@GetMapping("/users/search")
public List<User> searchUsers(
        @Parameter(description = "Search query", example = "John Doe")
        @RequestParam String query,
        
        @Parameter(description = "Page number (0-based)", example = "0")
        @RequestParam(defaultValue = "0") int page) {
    // ...
}
```

### 7. Handle Edge Cases

```java
@GetMapping("/users")
public ResponseEntity<Page<User>> getUsers(
        @RequestParam(defaultValue = "0") @Min(0) int page,
        @RequestParam(defaultValue = "10") @Min(1) @Max(100) int size,
        @RequestParam(required = false) String sortBy) {
    
    // Validate sortBy
    if (sortBy != null && !isValidSortField(sortBy)) {
        return ResponseEntity.badRequest().build();
    }
    
    Pageable pageable = PageRequest.of(page, size, Sort.by(sortBy != null ? sortBy : "id"));
    return ResponseEntity.ok(userService.findAll(pageable));
}
```

---

## üé§ Interview Questions

### Q1: What is @PathVariable?
**Answer:** Extracts values from URI path template:
```java
@GetMapping("/users/{id}")
public User getUser(@PathVariable Long id) { }
```

### Q2: What is @RequestParam?
**Answer:** Extracts query parameters from URL:
```java
@GetMapping("/users")
public List<User> getUsers(@RequestParam String name) { }
```
Request: `GET /users?name=John`

### Q3: Difference between @PathVariable and @RequestParam?
**Answer:**
- **@PathVariable**: From URI path (`/users/123`)
- **@RequestParam**: From query string (`/users?id=123`)

### Q4: How to make parameter optional?
**Answer:**
```java
// Option 1: required = false
@RequestParam(required = false) String name

// Option 2: default value
@RequestParam(defaultValue = "default") String name

// Option 3: Optional wrapper
@RequestParam Optional<String> name
```

### Q5: Can path variable be optional?
**Answer:** Yes, using multiple path mappings:
```java
@GetMapping({"/users", "/users/{id}"})
public ResponseEntity<?> getUsers(@PathVariable(required = false) Long id) {
    if (id == null) return ResponseEntity.ok(userService.findAll());
    return ResponseEntity.ok(userService.findById(id));
}
```

### Q6: How to accept multiple values for a parameter?
**Answer:**
```java
@GetMapping("/users")
public List<User> getUsers(@RequestParam List<Long> ids) {
    return userService.findByIds(ids);
}
```
Request: `GET /users?ids=1,2,3` or `GET /users?ids=1&ids=2&ids=3`

### Q7: What are matrix variables?
**Answer:** Alternative to query parameters, semicolon-separated in path:
```java
@GetMapping("/users/{id}")
public User getUser(
    @PathVariable Long id,
    @MatrixVariable String locale) { }
```
Request: `GET /users/123;locale=en`

### Q8: How to validate path variables?
**Answer:**
```java
@RestController
@Validated
public class UserController {
    
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable @Min(1) @Max(999999) Long id) {
        return userService.findById(id);
    }
}
```

### Q9: When to use path variables vs query parameters?
**Answer:**
- **Path Variables**: Resource identification, required params, hierarchical relationships
- **Query Parameters**: Filtering, sorting, pagination, optional search criteria

### Q10: How to get all query parameters as a Map?
**Answer:**
```java
@GetMapping("/users/search")
public List<User> searchUsers(@RequestParam Map<String, String> params) {
    String name = params.get("name");
    String email = params.get("email");
    return userService.search(name, email);
}
```

---

## üìö Summary

### Path Variables

```java
// Single path variable
@GetMapping("/users/{id}")
public User getUser(@PathVariable Long id) { }

// Multiple path variables
@GetMapping("/users/{userId}/orders/{orderId}")
public Order getOrder(@PathVariable Long userId, @PathVariable Long orderId) { }

// Optional path variable
@GetMapping({"/users", "/users/{id}"})
public ResponseEntity<?> getUsers(@PathVariable(required = false) Long id) { }

// With regex
@GetMapping("/users/{id:[0-9]+}")
public User getUser(@PathVariable Long id) { }
```

### Query Parameters

```java
// Single parameter
@GetMapping("/users/search")
public List<User> searchUsers(@RequestParam String name) { }

// Multiple parameters
@GetMapping("/users/search")
public List<User> searchUsers(
    @RequestParam String name,
    @RequestParam Integer age) { }

// Optional parameter
@RequestParam(required = false) String name

// Default value
@RequestParam(defaultValue = "0") int page

// List parameter
@RequestParam List<Long> ids

// Map all parameters
@RequestParam Map<String, String> params
```

### Best Practices

- Use path variables for resource identification
- Use query parameters for filtering, sorting, pagination
- Provide default values for optional parameters
- Validate all input
- Use meaningful parameter names
- Document parameters with @Parameter
- Handle edge cases

**Next:** Request Body & Response Entity ‚Üí

