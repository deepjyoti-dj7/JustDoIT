# üéØ Custom Exceptions - Complete Guide

## üìã Table of Contents
- [Introduction](#introduction)
- [Creating Custom Exceptions](#creating-custom-exceptions)
- [Exception Hierarchy](#exception-hierarchy)
- [Domain-Specific Exceptions](#domain-specific-exceptions)
- [Exception with Error Codes](#exception-with-error-codes)
- [Exception with Additional Data](#exception-with-additional-data)
- [Business Rule Exceptions](#business-rule-exceptions)
- [Best Practices](#best-practices)
- [Interview Questions](#interview-questions)

---

## üéØ Introduction

**Custom Exceptions** are domain-specific exceptions that provide meaningful error messages and better exception handling.

### Why Custom Exceptions?

```
Built-in Exceptions:
‚ùå Generic error messages
‚ùå Hard to identify source
‚ùå Less meaningful to business
‚ùå Difficult to handle specifically

Custom Exceptions:
‚úÖ Domain-specific context
‚úÖ Meaningful error messages
‚úÖ Better error handling
‚úÖ Business rule violations
‚úÖ Easy to debug
‚úÖ Consistent error codes
```

### Exception Types

```
RuntimeException (Unchecked)
    ‚Üì
BusinessException (Base)
    ‚Üì
‚îú‚îÄ‚îÄ ResourceNotFoundException (404)
‚îú‚îÄ‚îÄ ResourceAlreadyExistsException (409)
‚îú‚îÄ‚îÄ InvalidRequestException (400)
‚îú‚îÄ‚îÄ UnauthorizedException (401)
‚îî‚îÄ‚îÄ ForbiddenException (403)
```

---

## üîß Creating Custom Exceptions

### Basic Custom Exception

```java
public class UserNotFoundException extends RuntimeException {
    
    public UserNotFoundException(Long id) {
        super(String.format("User not found with id: %d", id));
    }
    
    public UserNotFoundException(String email) {
        super(String.format("User not found with email: %s", email));
    }
    
    public UserNotFoundException(String message) {
        super(message);
    }
}
```

### Exception with HTTP Status

```java
public class ResourceNotFoundException extends RuntimeException {
    
    private final HttpStatus status;
    
    public ResourceNotFoundException(String resource, Long id) {
        super(String.format("%s not found with id: %d", resource, id));
        this.status = HttpStatus.NOT_FOUND;
    }
    
    public ResourceNotFoundException(String message) {
        super(message);
        this.status = HttpStatus.NOT_FOUND;
    }
    
    public HttpStatus getStatus() {
        return status;
    }
}
```

### Exception with Cause

```java
public class DataAccessException extends RuntimeException {
    
    public DataAccessException(String message) {
        super(message);
    }
    
    public DataAccessException(String message, Throwable cause) {
        super(message, cause);
    }
}

// Usage
try {
    // Database operation
} catch (SQLException ex) {
    throw new DataAccessException("Failed to fetch user data", ex);
}
```

---

## üå≤ Exception Hierarchy

### Base Exception Class

```java
@Getter
public abstract class BaseException extends RuntimeException {
    
    private final HttpStatus status;
    private final String errorCode;
    
    protected BaseException(String message, HttpStatus status, String errorCode) {
        super(message);
        this.status = status;
        this.errorCode = errorCode;
    }
    
    protected BaseException(String message, Throwable cause, HttpStatus status, String errorCode) {
        super(message, cause);
        this.status = status;
        this.errorCode = errorCode;
    }
}
```

### Not Found Exceptions (404)

```java
public class ResourceNotFoundException extends BaseException {
    
    public ResourceNotFoundException(String resource, Long id) {
        super(
            String.format("%s not found with id: %d", resource, id),
            HttpStatus.NOT_FOUND,
            "RESOURCE_NOT_FOUND"
        );
    }
    
    public ResourceNotFoundException(String message) {
        super(message, HttpStatus.NOT_FOUND, "RESOURCE_NOT_FOUND");
    }
}

public class UserNotFoundException extends ResourceNotFoundException {
    public UserNotFoundException(Long id) {
        super("User", id);
    }
    
    public UserNotFoundException(String email) {
        super(String.format("User not found with email: %s", email));
    }
}

public class ProductNotFoundException extends ResourceNotFoundException {
    public ProductNotFoundException(Long id) {
        super("Product", id);
    }
    
    public ProductNotFoundException(String sku) {
        super(String.format("Product not found with SKU: %s", sku));
    }
}

public class OrderNotFoundException extends ResourceNotFoundException {
    public OrderNotFoundException(Long id) {
        super("Order", id);
    }
    
    public OrderNotFoundException(String orderNumber) {
        super(String.format("Order not found with number: %s", orderNumber));
    }
}
```

### Conflict Exceptions (409)

```java
public class ResourceAlreadyExistsException extends BaseException {
    
    public ResourceAlreadyExistsException(String resource, String identifier) {
        super(
            String.format("%s already exists: %s", resource, identifier),
            HttpStatus.CONFLICT,
            "RESOURCE_ALREADY_EXISTS"
        );
    }
}

public class DuplicateEmailException extends ResourceAlreadyExistsException {
    public DuplicateEmailException(String email) {
        super("Email", email);
    }
}

public class DuplicateUsernameException extends ResourceAlreadyExistsException {
    public DuplicateUsernameException(String username) {
        super("Username", username);
    }
}

public class DuplicateProductSkuException extends ResourceAlreadyExistsException {
    public DuplicateProductSkuException(String sku) {
        super("Product SKU", sku);
    }
}
```

### Bad Request Exceptions (400)

```java
public class InvalidRequestException extends BaseException {
    
    public InvalidRequestException(String message) {
        super(message, HttpStatus.BAD_REQUEST, "INVALID_REQUEST");
    }
    
    public InvalidRequestException(String message, String errorCode) {
        super(message, HttpStatus.BAD_REQUEST, errorCode);
    }
}

public class InvalidEmailFormatException extends InvalidRequestException {
    public InvalidEmailFormatException(String email) {
        super(String.format("Invalid email format: %s", email), "INVALID_EMAIL");
    }
}

public class InvalidPhoneNumberException extends InvalidRequestException {
    public InvalidPhoneNumberException(String phone) {
        super(String.format("Invalid phone number: %s", phone), "INVALID_PHONE");
    }
}

public class InvalidOrderStatusException extends InvalidRequestException {
    public InvalidOrderStatusException(String status) {
        super(String.format("Invalid order status: %s", status), "INVALID_ORDER_STATUS");
    }
}
```

### Authorization Exceptions (401, 403)

```java
public class UnauthorizedException extends BaseException {
    public UnauthorizedException(String message) {
        super(message, HttpStatus.UNAUTHORIZED, "UNAUTHORIZED");
    }
}

public class InvalidCredentialsException extends UnauthorizedException {
    public InvalidCredentialsException() {
        super("Invalid email or password");
    }
}

public class TokenExpiredException extends UnauthorizedException {
    public TokenExpiredException() {
        super("Token has expired");
    }
}

public class ForbiddenException extends BaseException {
    public ForbiddenException(String message) {
        super(message, HttpStatus.FORBIDDEN, "FORBIDDEN");
    }
}

public class InsufficientPermissionsException extends ForbiddenException {
    public InsufficientPermissionsException(String resource) {
        super(String.format("Insufficient permissions to access %s", resource));
    }
}
```

---

## üè¢ Domain-Specific Exceptions

### E-commerce Exceptions

```java
// Order Exceptions
public class InsufficientStockException extends BaseException {
    private final Long productId;
    private final int requestedQuantity;
    private final int availableQuantity;
    
    public InsufficientStockException(Long productId, int requested, int available) {
        super(
            String.format("Insufficient stock for product %d. Requested: %d, Available: %d",
                productId, requested, available),
            HttpStatus.CONFLICT,
            "INSUFFICIENT_STOCK"
        );
        this.productId = productId;
        this.requestedQuantity = requested;
        this.availableQuantity = available;
    }
    
    public Long getProductId() { return productId; }
    public int getRequestedQuantity() { return requestedQuantity; }
    public int getAvailableQuantity() { return availableQuantity; }
}

public class InvalidOrderStateException extends BaseException {
    public InvalidOrderStateException(String currentState, String targetState) {
        super(
            String.format("Cannot transition order from %s to %s", currentState, targetState),
            HttpStatus.CONFLICT,
            "INVALID_ORDER_STATE"
        );
    }
}

public class OrderAlreadyCancelledException extends BaseException {
    public OrderAlreadyCancelledException(Long orderId) {
        super(
            String.format("Order %d is already cancelled", orderId),
            HttpStatus.CONFLICT,
            "ORDER_ALREADY_CANCELLED"
        );
    }
}

// Payment Exceptions
public class PaymentFailedException extends BaseException {
    public PaymentFailedException(String reason) {
        super(
            String.format("Payment failed: %s", reason),
            HttpStatus.PAYMENT_REQUIRED,
            "PAYMENT_FAILED"
        );
    }
}

public class InsufficientFundsException extends PaymentFailedException {
    public InsufficientFundsException() {
        super("Insufficient funds in account");
    }
}

public class CardDeclinedException extends PaymentFailedException {
    public CardDeclinedException() {
        super("Card was declined");
    }
}

public class CardExpiredException extends PaymentFailedException {
    public CardExpiredException() {
        super("Card has expired");
    }
}
```

### Banking Exceptions

```java
public class AccountNotFoundException extends ResourceNotFoundException {
    public AccountNotFoundException(String accountNumber) {
        super(String.format("Account not found: %s", accountNumber));
    }
}

public class InsufficientBalanceException extends BaseException {
    private final BigDecimal currentBalance;
    private final BigDecimal requestedAmount;
    
    public InsufficientBalanceException(BigDecimal current, BigDecimal requested) {
        super(
            String.format("Insufficient balance. Current: %.2f, Requested: %.2f",
                current, requested),
            HttpStatus.CONFLICT,
            "INSUFFICIENT_BALANCE"
        );
        this.currentBalance = current;
        this.requestedAmount = requested;
    }
    
    public BigDecimal getCurrentBalance() { return currentBalance; }
    public BigDecimal getRequestedAmount() { return requestedAmount; }
}

public class DailyLimitExceededException extends BaseException {
    public DailyLimitExceededException(BigDecimal limit) {
        super(
            String.format("Daily transaction limit exceeded: %.2f", limit),
            HttpStatus.CONFLICT,
            "DAILY_LIMIT_EXCEEDED"
        );
    }
}

public class AccountLockedException extends BaseException {
    public AccountLockedException(String reason) {
        super(
            String.format("Account is locked: %s", reason),
            HttpStatus.FORBIDDEN,
            "ACCOUNT_LOCKED"
        );
    }
}
```

---

## üî¢ Exception with Error Codes

### Error Code Enum

```java
@Getter
@AllArgsConstructor
public enum ErrorCode {
    
    // User Errors (1000-1999)
    USER_NOT_FOUND("ERR-1001", "User not found"),
    DUPLICATE_EMAIL("ERR-1002", "Email already exists"),
    DUPLICATE_USERNAME("ERR-1003", "Username already exists"),
    INVALID_CREDENTIALS("ERR-1004", "Invalid email or password"),
    ACCOUNT_DISABLED("ERR-1005", "Account is disabled"),
    ACCOUNT_LOCKED("ERR-1006", "Account is locked"),
    
    // Product Errors (2000-2999)
    PRODUCT_NOT_FOUND("ERR-2001", "Product not found"),
    INSUFFICIENT_STOCK("ERR-2002", "Insufficient stock"),
    PRODUCT_DISCONTINUED("ERR-2003", "Product is discontinued"),
    INVALID_PRODUCT_SKU("ERR-2004", "Invalid product SKU"),
    
    // Order Errors (3000-3999)
    ORDER_NOT_FOUND("ERR-3001", "Order not found"),
    INVALID_ORDER_STATUS("ERR-3002", "Invalid order status"),
    ORDER_ALREADY_CANCELLED("ERR-3003", "Order already cancelled"),
    ORDER_CANNOT_BE_MODIFIED("ERR-3004", "Order cannot be modified"),
    
    // Payment Errors (4000-4999)
    PAYMENT_FAILED("ERR-4001", "Payment failed"),
    INSUFFICIENT_FUNDS("ERR-4002", "Insufficient funds"),
    CARD_DECLINED("ERR-4003", "Card declined"),
    CARD_EXPIRED("ERR-4004", "Card expired"),
    INVALID_CARD("ERR-4005", "Invalid card details"),
    
    // General Errors (5000-5999)
    VALIDATION_ERROR("ERR-5001", "Validation error"),
    UNAUTHORIZED("ERR-5002", "Unauthorized access"),
    FORBIDDEN("ERR-5003", "Access forbidden"),
    INTERNAL_ERROR("ERR-5004", "Internal server error");
    
    private final String code;
    private final String message;
}
```

### Exception with Error Code

```java
@Getter
public class BusinessException extends RuntimeException {
    
    private final ErrorCode errorCode;
    private final HttpStatus status;
    
    public BusinessException(ErrorCode errorCode, HttpStatus status) {
        super(errorCode.getMessage());
        this.errorCode = errorCode;
        this.status = status;
    }
    
    public BusinessException(ErrorCode errorCode, HttpStatus status, String customMessage) {
        super(customMessage);
        this.errorCode = errorCode;
        this.status = status;
    }
    
    public BusinessException(ErrorCode errorCode, HttpStatus status, Throwable cause) {
        super(errorCode.getMessage(), cause);
        this.errorCode = errorCode;
        this.status = status;
    }
}

// Usage
throw new BusinessException(
    ErrorCode.USER_NOT_FOUND,
    HttpStatus.NOT_FOUND,
    "User not found with id: " + userId
);
```

### Error Response with Code

```java
@Data
@Builder
public class ErrorResponse {
    private String errorCode;
    private int status;
    private String message;
    private String path;
    private LocalDateTime timestamp;
}

// Handler
@ExceptionHandler(BusinessException.class)
public ResponseEntity<ErrorResponse> handleBusinessException(
        BusinessException ex,
        HttpServletRequest request) {
    
    ErrorResponse error = ErrorResponse.builder()
        .errorCode(ex.getErrorCode().getCode())
        .status(ex.getStatus().value())
        .message(ex.getMessage())
        .path(request.getRequestURI())
        .timestamp(LocalDateTime.now())
        .build();
    
    return ResponseEntity.status(ex.getStatus()).body(error);
}
```

---

## üì¶ Exception with Additional Data

### Exception with Metadata

```java
@Getter
public class ValidationException extends BaseException {
    
    private final Map<String, String> errors;
    
    public ValidationException(Map<String, String> errors) {
        super("Validation failed", HttpStatus.BAD_REQUEST, "VALIDATION_ERROR");
        this.errors = errors;
    }
    
    public ValidationException(String field, String message) {
        super("Validation failed", HttpStatus.BAD_REQUEST, "VALIDATION_ERROR");
        this.errors = Map.of(field, message);
    }
}

// Usage
Map<String, String> errors = new HashMap<>();
errors.put("email", "Invalid email format");
errors.put("age", "Must be 18 or older");
throw new ValidationException(errors);
```

### Exception with Context

```java
@Getter
public class OrderProcessingException extends BaseException {
    
    private final Long orderId;
    private final String orderStatus;
    private final String failureReason;
    private final LocalDateTime occurredAt;
    
    public OrderProcessingException(Long orderId, String status, String reason) {
        super(
            String.format("Failed to process order %d: %s", orderId, reason),
            HttpStatus.INTERNAL_SERVER_ERROR,
            "ORDER_PROCESSING_FAILED"
        );
        this.orderId = orderId;
        this.orderStatus = status;
        this.failureReason = reason;
        this.occurredAt = LocalDateTime.now();
    }
}
```

### Rich Error Response

```java
@Data
@Builder
public class RichErrorResponse {
    private String errorCode;
    private int status;
    private String message;
    private String path;
    private LocalDateTime timestamp;
    private Map<String, Object> metadata;
}

@ExceptionHandler(OrderProcessingException.class)
public ResponseEntity<RichErrorResponse> handleOrderProcessing(
        OrderProcessingException ex,
        HttpServletRequest request) {
    
    Map<String, Object> metadata = new HashMap<>();
    metadata.put("orderId", ex.getOrderId());
    metadata.put("orderStatus", ex.getOrderStatus());
    metadata.put("failureReason", ex.getFailureReason());
    metadata.put("occurredAt", ex.getOccurredAt());
    
    RichErrorResponse error = RichErrorResponse.builder()
        .errorCode(ex.getErrorCode())
        .status(ex.getStatus().value())
        .message(ex.getMessage())
        .path(request.getRequestURI())
        .timestamp(LocalDateTime.now())
        .metadata(metadata)
        .build();
    
    return ResponseEntity.status(ex.getStatus()).body(error);
}
```

---

## üíº Business Rule Exceptions

### Validation Rule Exceptions

```java
public class AgeValidationException extends BaseException {
    public AgeValidationException(int age, int minimumAge) {
        super(
            String.format("Age %d is below minimum required age %d", age, minimumAge),
            HttpStatus.BAD_REQUEST,
            "AGE_VALIDATION_FAILED"
        );
    }
}

public class EmailDomainNotAllowedException extends BaseException {
    public EmailDomainNotAllowedException(String domain) {
        super(
            String.format("Email domain not allowed: %s", domain),
            HttpStatus.BAD_REQUEST,
            "EMAIL_DOMAIN_NOT_ALLOWED"
        );
    }
}

public class PasswordPolicyViolationException extends BaseException {
    private final List<String> violations;
    
    public PasswordPolicyViolationException(List<String> violations) {
        super(
            "Password does not meet policy requirements",
            HttpStatus.BAD_REQUEST,
            "PASSWORD_POLICY_VIOLATION"
        );
        this.violations = violations;
    }
    
    public List<String> getViolations() {
        return violations;
    }
}
```

### Business Logic Exceptions

```java
public class MinimumOrderAmountException extends BaseException {
    public MinimumOrderAmountException(BigDecimal amount, BigDecimal minimum) {
        super(
            String.format("Order amount %.2f is below minimum %.2f", amount, minimum),
            HttpStatus.BAD_REQUEST,
            "MINIMUM_ORDER_AMOUNT_NOT_MET"
        );
    }
}

public class ProductNotAvailableException extends BaseException {
    public ProductNotAvailableException(Long productId, String reason) {
        super(
            String.format("Product %d is not available: %s", productId, reason),
            HttpStatus.CONFLICT,
            "PRODUCT_NOT_AVAILABLE"
        );
    }
}

public class DeliveryAddressNotServiceableException extends BaseException {
    public DeliveryAddressNotServiceableException(String pincode) {
        super(
            String.format("Delivery not available for pincode: %s", pincode),
            HttpStatus.BAD_REQUEST,
            "DELIVERY_NOT_SERVICEABLE"
        );
    }
}
```

---

## üìå Best Practices

### 1. Extend RuntimeException

```java
// ‚úÖ Good - Unchecked exception
public class UserNotFoundException extends RuntimeException {
    public UserNotFoundException(Long id) {
        super("User not found: " + id);
    }
}

// ‚ùå Bad - Checked exception (forces try-catch everywhere)
public class UserNotFoundException extends Exception {
    // Avoid checked exceptions for business logic
}
```

### 2. Meaningful Names

```java
// ‚úÖ Good - Clear, specific names
public class UserNotFoundException extends RuntimeException { }
public class DuplicateEmailException extends RuntimeException { }
public class InvalidOrderStatusException extends RuntimeException { }

// ‚ùå Bad - Generic names
public class UserException extends RuntimeException { }
public class DataException extends RuntimeException { }
```

### 3. Include Context in Message

```java
// ‚úÖ Good - Detailed message
public class ProductNotFoundException extends RuntimeException {
    public ProductNotFoundException(Long id) {
        super(String.format("Product not found with id: %d", id));
    }
}

// ‚ùå Bad - Generic message
public class ProductNotFoundException extends RuntimeException {
    public ProductNotFoundException() {
        super("Not found");
    }
}
```

### 4. Use Exception Hierarchy

```java
// ‚úÖ Good - Organized hierarchy
public abstract class BaseException extends RuntimeException { }
public class ResourceNotFoundException extends BaseException { }
public class UserNotFoundException extends ResourceNotFoundException { }

// Can catch at any level
try {
    // ...
} catch (UserNotFoundException ex) {
    // Specific handling
} catch (ResourceNotFoundException ex) {
    // Generic not found handling
} catch (BaseException ex) {
    // All custom exceptions
}
```

### 5. Don't Overuse Custom Exceptions

```java
// ‚ùå Bad - Unnecessary custom exception
public class StringIsNullException extends RuntimeException { }

// ‚úÖ Good - Use built-in
if (str == null) {
    throw new IllegalArgumentException("String cannot be null");
}

// ‚úÖ Good - Custom exception for business logic
public class InsufficientFundsException extends RuntimeException { }
```

### 6. Include Additional Data When Needed

```java
// ‚úÖ Good - Additional context
@Getter
public class InsufficientStockException extends RuntimeException {
    private final Long productId;
    private final int requested;
    private final int available;
    
    public InsufficientStockException(Long productId, int requested, int available) {
        super(String.format("Insufficient stock. Requested: %d, Available: %d",
            requested, available));
        this.productId = productId;
        this.requested = requested;
        this.available = available;
    }
}
```

### 7. Document Your Exceptions

```java
/**
 * Thrown when a user attempts to register with an email that already exists.
 * 
 * @see UserService#registerUser(UserRegistrationRequest)
 */
public class DuplicateEmailException extends RuntimeException {
    public DuplicateEmailException(String email) {
        super(String.format("Email already registered: %s", email));
    }
}
```

---

## üé§ Interview Questions

### Q1: Why use custom exceptions?
**Answer:** Provide domain-specific context, meaningful messages, better error handling, represent business rules.

### Q2: Should custom exceptions extend Exception or RuntimeException?
**Answer:** RuntimeException (unchecked) for business logic, Exception (checked) for recoverable errors.

### Q3: How to organize custom exceptions?
**Answer:** Use exception hierarchy with base exception class, group by domain/HTTP status.

### Q4: What is a base exception class?
**Answer:** Abstract parent class containing common fields (status, errorCode) for all custom exceptions.

### Q5: How to include additional data in exceptions?
**Answer:** Add fields with getters:
```java
@Getter
public class InsufficientStockException extends RuntimeException {
    private final int available;
}
```

### Q6: Should you create exception for every scenario?
**Answer:** No, only for significant business rules and domain concepts. Use built-in for common cases.

### Q7: How to handle exception hierarchy in @ExceptionHandler?
**Answer:** Handlers match most specific exception first, then parent classes.

### Q8: What are error codes in exceptions?
**Answer:** Unique identifiers (e.g., ERR-1001) for categorizing and tracking errors.

### Q9: How to create validation exceptions?
**Answer:**
```java
@Getter
public class ValidationException extends RuntimeException {
    private final Map<String, String> errors;
}
```

### Q10: When to use checked vs unchecked exceptions?
**Answer:**
- Checked: Recoverable errors (file not found, network)
- Unchecked: Programming errors, business rule violations

### Q11: How to create exception with cause?
**Answer:**
```java
public DataAccessException(String message, Throwable cause) {
    super(message, cause);
}
```

### Q12: Should exceptions contain sensitive data?
**Answer:** No, avoid including passwords, tokens, or sensitive information in messages.

### Q13: How to test custom exceptions?
**Answer:**
```java
@Test
void testUserNotFound() {
    assertThrows(UserNotFoundException.class, () -> {
        userService.findById(999L);
    });
}
```

### Q14: What is the difference between message and error code?
**Answer:**
- Message: Human-readable description
- Error Code: Machine-readable identifier for categorization

### Q15: Can exceptions have constructors with different parameters?
**Answer:** Yes, provide multiple constructors for flexibility:
```java
public UserNotFoundException(Long id) { }
public UserNotFoundException(String email) { }
```

### Q16: How to document custom exceptions?
**Answer:** Use Javadoc with @throws annotation in methods that throw them.

### Q17: Should you log in exception constructor?
**Answer:** No, log in exception handler, not in exception class.

### Q18: How to create domain-specific exceptions?
**Answer:** Extend base exception with domain context (e-commerce: InsufficientStockException).

### Q19: Can you have multiple base exception classes?
**Answer:** Yes, can have different base classes for different modules/domains.

### Q20: Best practices for custom exceptions?
**Answer:**
1. Extend RuntimeException
2. Meaningful names
3. Include context in message
4. Use exception hierarchy
5. Add additional data when needed
6. Document with Javadoc
7. Don't include sensitive data
8. Don't overuse

---

## üìö Summary

### Exception Hierarchy

```java
@Getter
public abstract class BaseException extends RuntimeException {
    private final HttpStatus status;
    private final String errorCode;
    
    protected BaseException(String message, HttpStatus status, String errorCode) {
        super(message);
        this.status = status;
        this.errorCode = errorCode;
    }
}

public class UserNotFoundException extends BaseException {
    public UserNotFoundException(Long id) {
        super(
            String.format("User not found with id: %d", id),
            HttpStatus.NOT_FOUND,
            "USER_NOT_FOUND"
        );
    }
}
```

### Key Points

- **Custom Exceptions:** Domain-specific error handling
- **Hierarchy:** Base exception with common fields
- **RuntimeException:** Prefer for business logic
- **Meaningful Names:** Clear, specific exception names
- **Context:** Include relevant data in exceptions
- **Error Codes:** Use for categorization
- **Documentation:** Document with Javadoc

**Next:** Global Exception Handling ‚Üí

