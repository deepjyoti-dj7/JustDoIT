# 01. Introduction to Redis

## What is Redis?

Redis (Remote Dictionary Server) is an **in-memory data structure store** used as a database, cache, message broker, and streaming engine.

**Key Characteristics:**
- ğŸš€ In-memory storage (blazing fast)
- ğŸ“Š Multiple data structures (strings, lists, sets, hashes, etc.)
- ğŸ’¾ Optional persistence (RDB, AOF)
- âš¡ Sub-millisecond latency
- ğŸ”„ Replication and high availability
- ğŸ“¡ Pub/Sub messaging

---

## Why Redis?

### Traditional Caching Problems

âŒ **Disk-based Databases:**
- Slow read/write operations
- High latency for frequent queries
- Not suitable for real-time applications

âŒ **Simple Key-Value Stores:**
- Limited data structures
- No atomic operations
- Poor support for complex queries

### Redis Solutions

âœ… **In-Memory Performance:**
- Read/write operations in microseconds
- 100,000+ operations/second per instance
- Perfect for real-time applications

âœ… **Rich Data Structures:**
- Strings, Lists, Sets, Sorted Sets, Hashes
- Bitmaps, HyperLogLog, Streams
- Atomic operations on complex data

âœ… **Persistence Options:**
- RDB snapshots for backups
- AOF logs for durability
- Hybrid persistence mode

âœ… **High Availability:**
- Master-slave replication
- Redis Sentinel for failover
- Redis Cluster for sharding

---

## Use Cases

### 1. Caching

**Most common use case** - Store frequently accessed data in memory.

```
Application â†’ Check Redis Cache
               â†“ (Cache Miss)
            Database Query
               â†“
          Store in Redis
               â†“
          Return to Client
```

**Examples:**
- Session storage
- API response caching
- Database query results
- HTML page caching

### 2. Session Management

Store user session data with TTL (time-to-live).

```redis
SET session:user123 '{"userId": 123, "role": "admin"}' EX 3600
```

### 3. Real-time Analytics

- Page view counters
- User activity tracking
- Leaderboards (sorted sets)
- Rate limiting

### 4. Message Queue

Using Lists and Pub/Sub:
```redis
LPUSH queue:tasks '{"task": "send_email"}'
BRPOP queue:tasks 0
```

### 5. Geospatial Applications

```redis
GEOADD locations 77.5946 12.9716 "Bangalore"
GEORADIUS locations 77.5946 12.9716 50 km
```

---

## Redis vs Other Solutions

### Redis vs Memcached

| Feature | Redis | Memcached |
|---------|-------|------------|
| **Data Structures** | Multiple (strings, lists, sets, etc.) | Only strings |
| **Persistence** | Yes (RDB, AOF) | No |
| **Replication** | Yes (master-slave) | No |
| **Pub/Sub** | Yes | No |
| **Transactions** | Yes (MULTI/EXEC) | No |
| **Lua Scripting** | Yes | No |
| **Multi-threading** | Single-threaded (I/O multiplexing) | Multi-threaded |
| **Use Case** | Cache + Database + Messaging | Pure caching |

**When to use Redis:** Need persistence, complex data structures, pub/sub
**When to use Memcached:** Simple caching, multi-threaded performance

### Redis vs Traditional Databases

| Feature | Redis | SQL Database |
|---------|-------|-------------|
| **Storage** | In-memory | Disk-based |
| **Speed** | Sub-millisecond | Milliseconds |
| **Data Model** | Key-value + structures | Tables + relations |
| **Persistence** | Optional | Always |
| **Queries** | Simple key-based | Complex SQL queries |
| **Transactions** | Limited (ACID on single key) | Full ACID |
| **Use Case** | Caching, real-time data | Persistent, relational data |

---

## Redis Architecture

### Single Instance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis Server   â”‚
â”‚  (Port: 6379)   â”‚
â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Memory   â”‚  â”‚
â”‚  â”‚  Storage  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â†“         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Disk    â”‚  â”‚ (Optional)
â”‚  â”‚Persistenceâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Master-Slave Replication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Master  â”‚â”€â”€â”€â”€â”€â”€â†’â”‚  Slave 1 â”‚
â”‚  (Read/  â”‚       â”‚  (Read   â”‚
â”‚  Write)  â”‚       â”‚   Only)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Slave 2 â”‚
                   â”‚  (Read   â”‚
                   â”‚   Only)  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Redis Cluster

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Master1 â”‚  â”‚ Master2 â”‚  â”‚ Master3 â”‚
â”‚Slots:   â”‚  â”‚Slots:   â”‚  â”‚Slots:   â”‚
â”‚0-5460   â”‚  â”‚5461-    â”‚  â”‚10923-   â”‚
â”‚         â”‚  â”‚10922    â”‚  â”‚16383    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
â”‚ Slave 1 â”‚  â”‚ Slave 2 â”‚  â”‚ Slave 3 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Redis Data Types Overview

### 1. Strings
```redis
SET key "value"
GET key
```

### 2. Lists
```redis
LPUSH mylist "item1"
LRANGE mylist 0 -1
```

### 3. Sets
```redis
SADD myset "member1"
SMEMBERS myset
```

### 4. Sorted Sets (ZSets)
```redis
ZADD leaderboard 100 "player1"
ZRANGE leaderboard 0 -1 WITHSCORES
```

### 5. Hashes
```redis
HSET user:1 name "John" age 30
HGETALL user:1
```

### 6. Bitmaps
```redis
SETBIT user:visits 0 1
BITCOUNT user:visits
```

### 7. HyperLogLog
```redis
PFADD unique:visitors "user1" "user2"
PFCOUNT unique:visitors
```

### 8. Streams
```redis
XADD mystream * field1 value1
XREAD STREAMS mystream 0
```

---

## Redis Performance

### Benchmarks

**Typical Performance:**
- **GET/SET**: 100,000+ ops/sec
- **Latency**: < 1ms (average)
- **Memory**: 1GB can store ~1 million keys

### Why So Fast?

1. **In-Memory Storage**: No disk I/O for reads
2. **Simple Data Structures**: Optimized for speed
3. **Single-threaded**: No context switching, lock-free
4. **Efficient Protocol**: RESP (Redis Serialization Protocol)
5. **I/O Multiplexing**: Handles multiple connections efficiently

---

## When NOT to Use Redis

âŒ **Large Datasets (> RAM):**
- Redis stores everything in memory
- Use disk-based databases for large datasets

âŒ **Complex Queries:**
- No SQL-like JOIN operations
- Limited query capabilities

âŒ **Strong ACID Guarantees:**
- Redis is eventually consistent in cluster mode
- Use traditional databases for strict ACID

âŒ **Primary Database (usually):**
- Use as a cache or secondary store
- Not a replacement for persistent databases

---

## Redis Persistence

### RDB (Redis Database Backup)

- Point-in-time snapshots
- Compact binary format
- Fast restart times
- Data loss risk (between snapshots)

### AOF (Append-Only File)

- Logs every write operation
- More durable (configurable fsync)
- Larger file size
- Slower restart times

### Hybrid (RDB + AOF)

- Best of both worlds
- Available in Redis 4.0+

---

## Summary

**Redis is:**
- âœ… In-memory data store (extremely fast)
- âœ… Multi-purpose (cache, database, message broker)
- âœ… Rich data structures (8+ types)
- âœ… Highly available (replication, Sentinel, Cluster)
- âœ… Persistent (optional RDB, AOF)

**Best for:**
- Caching
- Session management
- Real-time analytics
- Message queues
- Leaderboards

**Not ideal for:**
- Large datasets exceeding RAM
- Complex relational queries
- Primary database (without persistence)

---

## Interview Questions & Answers

### Q1: What is Redis and what does it stand for?
**A:** Redis stands for **Remote Dictionary Server**. It's an in-memory data structure store used as a database, cache, and message broker. It stores data in RAM for ultra-fast access (sub-millisecond latency).

### Q2: What are the main use cases of Redis?
**A:** 
1. **Caching**: Store frequently accessed data
2. **Session management**: Store user sessions with TTL
3. **Real-time analytics**: Counters, leaderboards
4. **Message queues**: Using Lists or Pub/Sub
5. **Rate limiting**: Track API request counts
6. **Geospatial**: Location-based queries

### Q3: How is Redis different from Memcached?
**A:**
- **Data structures**: Redis supports lists, sets, hashes; Memcached only strings
- **Persistence**: Redis has RDB/AOF; Memcached has none
- **Replication**: Redis supports master-slave; Memcached doesn't
- **Pub/Sub**: Redis has it; Memcached doesn't
- **Threading**: Memcached is multi-threaded; Redis is single-threaded

### Q4: Why is Redis so fast?
**A:**
1. **In-memory storage**: No disk I/O for reads
2. **Single-threaded**: No context switching or locks
3. **Simple data structures**: Optimized algorithms
4. **Efficient protocol**: RESP is lightweight
5. **I/O multiplexing**: Handles thousands of connections

### Q5: What data structures does Redis support?
**A:** Redis supports 8+ data structures:
1. Strings
2. Lists (linked lists)
3. Sets (unique elements)
4. Sorted Sets (ordered by score)
5. Hashes (field-value pairs)
6. Bitmaps
7. HyperLogLog (cardinality estimation)
8. Streams (log data structure)
9. Geospatial indexes

### Q6: What is Redis persistence?
**A:** Redis offers two persistence mechanisms:
- **RDB (Redis Database Backup)**: Point-in-time snapshots (compact, fast recovery)
- **AOF (Append-Only File)**: Logs every write (more durable, slower recovery)
- **Hybrid**: Combines both (Redis 4.0+)

### Q7: Is Redis a database or a cache?
**A:** Redis is **both**:
- As a **cache**: Stores temporary data with TTL, eviction policies
- As a **database**: With persistence (RDB/AOF), replication, and durability

Most commonly used as a cache, but can be a primary database with proper persistence.

### Q8: What is the default port for Redis?
**A:** **6379**

### Q9: Can Redis handle millions of requests per second?
**A:** Yes, a single Redis instance can handle **100,000+ operations/second**. With clustering and pipelining, it can scale to millions of ops/sec.

### Q10: What are the disadvantages of Redis?
**A:**
1. **Memory-bound**: Dataset limited by RAM size
2. **No complex queries**: No SQL-like JOINs
3. **Single-threaded**: CPU-intensive operations can block
4. **Data loss risk**: If persistence not configured
5. **Not suitable for large persistent datasets**: Use traditional databases

**Next:** Installation & Setup