# Array Destructuring

## Basic Destructuring

### Extract Elements
```javascript
const arr = [1, 2, 3, 4, 5];

const [first, second] = arr;
console.log(first, second);  // 1 2

const [a, b, c] = arr;
console.log(a, b, c);  // 1 2 3
```

### More Elements Than Variables
```javascript
const arr = [1, 2, 3, 4, 5];

const [x, y] = arr;
console.log(x, y);  // 1 2 (rest ignored)
```

### More Variables Than Elements
```javascript
const arr = [1, 2];

const [a, b, c] = arr;
console.log(a, b, c);  // 1 2 undefined
```

## Skipping Elements

### Skip with Commas
```javascript
const arr = [1, 2, 3, 4, 5];

const [first, , third] = arr;
console.log(first, third);  // 1 3

const [, , , fourth] = arr;
console.log(fourth);  // 4
```

### Get First and Last
```javascript
const arr = [1, 2, 3, 4, 5];

const [first, , , , last] = arr;
console.log(first, last);  // 1 5
```

## Default Values

### Provide Defaults
```javascript
const arr = [1];

const [a = 0, b = 0, c = 0] = arr;
console.log(a, b, c);  // 1 0 0
```

### Dynamic Defaults
```javascript
const getDefault = () => {
  console.log('Getting default');
  return 42;
};

const [a = getDefault()] = [1];
// getDefault() not called (a has value)

const [b = getDefault()] = [];
// getDefault() IS called (b needs default)
```

### Defaults with Undefined
```javascript
const arr = [1, undefined, 3];

const [a = 0, b = 0, c = 0] = arr;
console.log(a, b, c);  // 1 0 3 (undefined triggers default)

const arr2 = [1, null, 3];
const [x = 0, y = 0, z = 0] = arr2;
console.log(x, y, z);  // 1 null 3 (null doesn't trigger default)
```

## Rest Pattern

### Collect Remaining Elements
```javascript
const arr = [1, 2, 3, 4, 5];

const [first, ...rest] = arr;
console.log(first);  // 1
console.log(rest);   // [2, 3, 4, 5]
```

### Rest Must Be Last
```javascript
const arr = [1, 2, 3, 4, 5];

const [first, second, ...others] = arr;
console.log(first, second, others);  // 1 2 [3, 4, 5]

// âŒ Syntax error: rest must be last
// const [...rest, last] = arr;
```

### Empty Rest
```javascript
const arr = [1, 2];

const [a, b, ...rest] = arr;
console.log(rest);  // [] (empty array)
```

### Extract Head and Tail
```javascript
const arr = [1, 2, 3, 4, 5];

const [head, ...tail] = arr;
console.log(head);  // 1
console.log(tail);  // [2, 3, 4, 5]
```

## Nested Destructuring

### Nested Arrays
```javascript
const arr = [1, [2, 3], 4];

const [a, [b, c], d] = arr;
console.log(a, b, c, d);  // 1 2 3 4
```

### Deep Nesting
```javascript
const arr = [1, [2, [3, [4, 5]]]];

const [a, [b, [c, [d, e]]]] = arr;
console.log(a, b, c, d, e);  // 1 2 3 4 5
```

### Matrix Destructuring
```javascript
const matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

const [[a, b], , [c, d]] = matrix;
console.log(a, b, c, d);  // 1 2 7 8
```

### Nested with Rest
```javascript
const arr = [1, [2, 3, 4], 5];

const [a, [b, ...rest], c] = arr;
console.log(a, b, rest, c);  // 1 2 [3, 4] 5
```

## Swapping Variables

### Swap Two Variables
```javascript
let a = 1;
let b = 2;

[a, b] = [b, a];
console.log(a, b);  // 2 1
```

### Swap Three Variables
```javascript
let x = 1, y = 2, z = 3;

[x, y, z] = [y, z, x];
console.log(x, y, z);  // 2 3 1
```

### Rotate Values
```javascript
let first = 'a', second = 'b', third = 'c';

[first, second, third] = [third, first, second];
console.log(first, second, third);  // 'c' 'a' 'b'
```

## Practical Examples

### Function Return Values
```javascript
function getCoordinates() {
  return [10, 20];
}

const [x, y] = getCoordinates();
console.log(x, y);  // 10 20

// Multiple values
function getStats() {
  return [42, 85, 100, 67];
}

const [min, avg, max, median] = getStats();
```

### Split Results
```javascript
const str = 'John,Doe,30';
const [firstName, lastName, age] = str.split(',');
console.log(firstName, lastName, age);  // 'John' 'Doe' '30'
```

### Regex Matches
```javascript
const [, protocol, domain, path] = 
  'https://example.com/path'.match(/^(https?):\/\/([^\/]+)(.*)$/);
  
console.log(protocol);  // 'https'
console.log(domain);    // 'example.com'
console.log(path);      // '/path'
```

### Iteration
```javascript
const pairs = [[1, 2], [3, 4], [5, 6]];

for (const [a, b] of pairs) {
  console.log(a, b);
}
// 1 2
// 3 4
// 5 6
```

### Map Entries
```javascript
const map = new Map([
  ['name', 'John'],
  ['age', 30]
]);

for (const [key, value] of map) {
  console.log(`${key}: ${value}`);
}
```

### Array Methods
```javascript
const points = [[1, 2], [3, 4], [5, 6]];

const sums = points.map(([x, y]) => x + y);
console.log(sums);  // [3, 7, 11]

const filtered = points.filter(([x, y]) => x + y > 5);
console.log(filtered);  // [[3, 4], [5, 6]]
```

### Ignoring Values
```javascript
function getUser() {
  return ['John', 'Doe', 30, 'NYC'];
}

// Only need first and last name
const [first, last] = getUser();

// Only need age
const [, , age] = getUser();

// Only need first and age
const [firstName, , userAge] = getUser();
```

## With Default Parameters

### Function Parameters
```javascript
function processArray([a, b, c = 0] = []) {
  console.log(a, b, c);
}

processArray([1, 2, 3]);  // 1 2 3
processArray([1, 2]);     // 1 2 0
processArray([1]);        // 1 undefined 0
processArray();           // undefined undefined 0
```

### Complex Defaults
```javascript
function configure([
  host = 'localhost',
  port = 8080,
  ...options
] = []) {
  console.log({host, port, options});
}

configure(['example.com', 3000, 'ssl', 'cache']);
// {host: 'example.com', port: 3000, options: ['ssl', 'cache']}

configure();
// {host: 'localhost', port: 8080, options: []}
```

## Key Takeaways

- **Array destructuring** extracts values from arrays into variables
- Use **commas** to skip elements
- Provide **default values** with `=` (triggers on undefined)
- **Rest pattern** `...rest` collects remaining elements (must be last)
- **Nested destructuring** works with nested arrays
- Perfect for **swapping variables** without temp variable
- Works great with **function returns** and **iteration**
- Can destructure in **function parameters**
- More readable than `arr[0]`, `arr[1]` syntax
- Creates clean, self-documenting code
