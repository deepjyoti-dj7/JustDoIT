# 09. Path & OS Modules

## Path Module

The **path** module provides utilities for working with file and directory paths.

```javascript
const path = require('path');
```

---

## Why Use Path Module?

✅ **Cross-platform**: Works on Windows, macOS, Linux  
✅ **Safe**: Handles edge cases  
✅ **Clean**: Avoids manual string manipulation  

---

## Joining Paths

```javascript
const path = require('path');

// Join path segments
const filePath = path.join('folder', 'subfolder', 'file.txt');
console.log(filePath);
// Linux/Mac: folder/subfolder/file.txt
// Windows: folder\subfolder\file.txt

// Handles ./ and ../
const relative = path.join('/users', 'docs', '../', 'file.txt');
console.log(relative);
// /users/file.txt
```

---

## Resolving Absolute Paths

```javascript
// Get absolute path
const absolute = path.resolve('folder', 'file.txt');
console.log(absolute);
// /Users/yourname/current-dir/folder/file.txt

// From specific starting point
const resolved = path.resolve('/home', 'user', 'docs', 'file.txt');
console.log(resolved);
// /home/user/docs/file.txt

// Relative to current directory
console.log(path.resolve('file.txt'));
// /Users/yourname/current-dir/file.txt
```

---

## Path Information

```javascript
const filePath = '/users/john/docs/report.pdf';

// Get directory name
console.log(path.dirname(filePath));
// /users/john/docs

// Get file name
console.log(path.basename(filePath));
// report.pdf

// Get file name without extension
console.log(path.basename(filePath, '.pdf'));
// report

// Get extension
console.log(path.extname(filePath));
// .pdf

// Parse into parts
console.log(path.parse(filePath));
// {
//   root: '/',
//   dir: '/users/john/docs',
//   base: 'report.pdf',
//   ext: '.pdf',
//   name: 'report'
// }

// Build from parts
const formatted = path.format({
  dir: '/users/john/docs',
  name: 'report',
  ext: '.pdf'
});
console.log(formatted);
// /users/john/docs/report.pdf
```

---

## Normalizing Paths

```javascript
// Clean up messy paths
const messy = '/users//john/./docs/../file.txt';
console.log(path.normalize(messy));
// /users/john/file.txt
```

---

## Relative Paths

```javascript
// Get relative path from one to another
const from = '/users/john/docs';
const to = '/users/john/photos/pic.jpg';

console.log(path.relative(from, to));
// ../photos/pic.jpg
```

---

## Checking Path Type

```javascript
// Is absolute path?
console.log(path.isAbsolute('/users/john'));  // true
console.log(path.isAbsolute('docs/file.txt')); // false
```

---

## Platform-Specific Separators

```javascript
// Path separator
console.log(path.sep);
// Linux/Mac: /
// Windows: \

// Delimiter (for PATH environment variable)
console.log(path.delimiter);
// Linux/Mac: :
// Windows: ;

// Split PATH variable
const paths = process.env.PATH.split(path.delimiter);
console.log(paths);
```

---

## Practical Examples

### Example 1: Build File Path

```javascript
const path = require('path');

// Safe way to build paths
const uploadDir = path.join(__dirname, 'uploads', 'images');
const fileName = 'photo.jpg';
const filePath = path.join(uploadDir, fileName);

console.log(filePath);
// /Users/yourname/project/uploads/images/photo.jpg
```

### Example 2: Check File Extension

```javascript
function isImageFile(filename) {
  const ext = path.extname(filename).toLowerCase();
  return ['.jpg', '.jpeg', '.png', '.gif'].includes(ext);
}

console.log(isImageFile('photo.jpg'));  // true
console.log(isImageFile('doc.pdf'));    // false
```

### Example 3: Change File Extension

```javascript
function changeExtension(filename, newExt) {
  const parsed = path.parse(filename);
  return path.format({
    dir: parsed.dir,
    name: parsed.name,
    ext: newExt
  });
}

console.log(changeExtension('report.docx', '.pdf'));
// report.pdf
```

---

## OS Module

The **os** module provides operating system information.

```javascript
const os = require('os');
```

---

## System Information

```javascript
const os = require('os');

// Platform
console.log(os.platform());
// 'darwin' (Mac), 'win32' (Windows), 'linux'

// Architecture
console.log(os.arch());
// 'x64', 'arm', 'arm64'

// Operating system
console.log(os.type());
// 'Darwin', 'Windows_NT', 'Linux'

// OS release
console.log(os.release());
// '20.6.0'

// Hostname
console.log(os.hostname());
// 'Johns-MacBook-Pro'
```

---

## Memory Information

```javascript
// Total memory (bytes)
console.log(os.totalmem());
// 17179869184 (16 GB)

// Free memory (bytes)
console.log(os.freemem());
// 2147483648 (2 GB)

// Convert to GB
const totalGB = (os.totalmem() / 1024 / 1024 / 1024).toFixed(2);
const freeGB = (os.freemem() / 1024 / 1024 / 1024).toFixed(2);

console.log(`Total: ${totalGB} GB`);
console.log(`Free: ${freeGB} GB`);
```

---

## CPU Information

```javascript
// CPU details
const cpus = os.cpus();
console.log('CPU Cores:', cpus.length);
console.log('Model:', cpus[0].model);
console.log('Speed:', cpus[0].speed, 'MHz');

// Example output
// CPU Cores: 8
// Model: Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz
// Speed: 2600 MHz
```

---

## User Information

```javascript
// Current user
const userInfo = os.userInfo();
console.log('Username:', userInfo.username);
console.log('Home Dir:', userInfo.homedir);
console.log('Shell:', userInfo.shell);
```

---

## Network Interfaces

```javascript
const interfaces = os.networkInterfaces();

Object.keys(interfaces).forEach(name => {
  console.log(`\nInterface: ${name}`);
  interfaces[name].forEach(info => {
    console.log('  Address:', info.address);
    console.log('  Family:', info.family);  // IPv4 or IPv6
  });
});
```

---

## System Uptime

```javascript
// System uptime in seconds
const uptime = os.uptime();

// Convert to hours
const hours = (uptime / 3600).toFixed(2);
console.log(`System uptime: ${hours} hours`);
```

---

## EOL (End of Line)

```javascript
// Platform-specific line ending
console.log(os.EOL);
// Linux/Mac: \n
// Windows: \r\n

// Use when writing files
const fs = require('fs');
const content = ['Line 1', 'Line 2', 'Line 3'].join(os.EOL);
fs.writeFileSync('file.txt', content);
```

---

## Temporary Directory

```javascript
// Get temp directory
console.log(os.tmpdir());
// Mac: /var/folders/...
// Windows: C:\Users\...\AppData\Local\Temp
// Linux: /tmp

// Create temp file
const path = require('path');
const tempFile = path.join(os.tmpdir(), 'myfile.txt');
console.log(tempFile);
```

---

## Home Directory

```javascript
// User's home directory
console.log(os.homedir());
// Mac: /Users/john
// Windows: C:\Users\john
// Linux: /home/john
```

---

## Practical Examples

### Example 1: System Monitor

```javascript
const os = require('os');

function getSystemInfo() {
  return {
    platform: os.platform(),
    cpus: os.cpus().length,
    totalMemoryGB: (os.totalmem() / 1024 ** 3).toFixed(2),
    freeMemoryGB: (os.freemem() / 1024 ** 3).toFixed(2),
    uptimeHours: (os.uptime() / 3600).toFixed(2)
  };
}

console.log(getSystemInfo());
// {
//   platform: 'darwin',
//   cpus: 8,
//   totalMemoryGB: '16.00',
//   freeMemoryGB: '4.32',
//   uptimeHours: '24.58'
// }
```

### Example 2: Cross-Platform Paths

```javascript
const os = require('os');
const path = require('path');

function getUserFile(filename) {
  return path.join(os.homedir(), 'Documents', filename);
}

console.log(getUserFile('report.pdf'));
// Mac: /Users/john/Documents/report.pdf
// Windows: C:\Users\john\Documents\report.pdf
```

### Example 3: Check Platform

```javascript
function isWindows() {
  return os.platform() === 'win32';
}

function isMac() {
  return os.platform() === 'darwin';
}

function isLinux() {
  return os.platform() === 'linux';
}

if (isWindows()) {
  console.log('Running on Windows');
}
```

---

## Common Use Cases

### ✅ Path Module:
- Building file paths
- Extracting file names/extensions
- Resolving absolute paths
- Cross-platform compatibility

### ✅ OS Module:
- System monitoring
- Platform-specific logic
- Memory/CPU information
- User/network information

---

## Best Practices

✅ **Always use path.join()**: Don't concatenate paths with `/` or `\`  
✅ **Use path.resolve()**: For absolute paths  
✅ **Check platform**: Use `os.platform()` for OS-specific code  
✅ **Use os.homedir()**: Instead of hardcoding user directories  
✅ **Use os.EOL**: For correct line endings  

---

## Summary

**Path Module:**
- `path.join()` - Combine path segments
- `path.resolve()` - Get absolute paths
- `path.parse()` - Extract path parts
- `path.extname()` - Get file extension

**OS Module:**
- `os.platform()` - Operating system
- `os.homedir()` - User's home directory
- `os.totalmem()` / `os.freemem()` - Memory info
- `os.cpus()` - CPU information

**Next:** Learn about Events and EventEmitter!
