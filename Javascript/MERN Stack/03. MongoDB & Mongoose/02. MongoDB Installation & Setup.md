# 02. MongoDB Installation & Setup

## Installation Options

1. **Local Installation** (Windows/Mac/Linux)
2. **MongoDB Atlas** (Cloud - Free)
3. **Docker** (Containerized)

---

## Local Installation

### Windows

1. Download: https://www.mongodb.com/try/download/community
2. Run installer â†’ Complete setup
3. Add to PATH (optional)

**Start MongoDB:**

```bash
mongod
```

### macOS

**Using Homebrew:**

```bash
brew tap mongodb/brew
brew install mongodb-community
```

**Start:**

```bash
brew services start mongodb-community
```

### Linux (Ubuntu)

```bash
# Import MongoDB public key
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -

# Add repository
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list

# Install
sudo apt-get update
sudo apt-get install -y mongodb-org

# Start
sudo systemctl start mongod
sudo systemctl enable mongod
```

---

## Docker Installation

```bash
# Pull MongoDB image
docker pull mongo

# Run MongoDB container
docker run -d -p 27017:27017 --name mongodb mongo

# With persistent data
docker run -d -p 27017:27017 -v ~/data:/data/db --name mongodb mongo
```

---

## Verify Installation

**Check version:**

```bash
mongod --version
mongo --version
```

**Connect to MongoDB:**

```bash
mongo
# or (newer versions)
mongosh
```

**Output:**
```
MongoDB shell version v6.0.0
connecting to: mongodb://127.0.0.1:27017
>
```

---

## MongoDB Configuration

**Default settings:**
- **Port**: 27017
- **Data directory**: `/data/db` (Linux/Mac), `C:\data\db` (Windows)
- **Log directory**: `/var/log/mongodb`

**Custom config file** (`mongod.conf`):

```yaml
storage:
  dbPath: /var/lib/mongodb
systemLog:
  destination: file
  path: /var/log/mongodb/mongod.log
net:
  port: 27017
  bindIp: 127.0.0.1
```

**Start with config:**

```bash
mongod --config /etc/mongod.conf
```

---

## MongoDB Shell (mongosh)

**Connect:**

```bash
mongosh
```

**Basic commands:**

```javascript
// Show databases
show dbs

// Create/switch database
use mydb

// Show collections
show collections

// Insert document
db.users.insertOne({ name: "John", age: 30 })

// Find documents
db.users.find()

// Exit
exit
```

---

## MongoDB Compass (GUI)

1. Download: https://www.mongodb.com/products/compass
2. Install and open
3. Connect to: `mongodb://localhost:27017`

**Features:**
- Visual query builder
- Data visualization
- Schema analysis
- Index management

---

## Connection String

**Local:**
```
mongodb://localhost:27017/mydb
```

**With authentication:**
```
mongodb://username:password@localhost:27017/mydb
```

**Atlas (cloud):**
```
mongodb+srv://username:password@cluster.mongodb.net/mydb
```

---

## Quick Start

**1. Start MongoDB:**

```bash
mongod
```

**2. Connect:**

```bash
mongosh
```

**3. Create database:**

```javascript
use testdb
```

**4. Insert data:**

```javascript
db.users.insertOne({ name: "Alice", age: 25 })
```

**5. Query data:**

```javascript
db.users.find()
```

---

## Troubleshooting

**Port already in use:**
```bash
# Kill existing MongoDB process
pkill mongod

# Or use different port
mongod --port 27018
```

**Permission denied:**
```bash
# Create data directory
sudo mkdir -p /data/db
sudo chown -R $USER /data/db
```

---

## Summary

**Installation:**
- Local: Download installer
- macOS: `brew install mongodb-community`
- Docker: `docker run mongo`

**Start:**
```bash
mongod  # Start server
mongosh # Connect to shell
```

**Connection:**
```
mongodb://localhost:27017
```

**Next**: Learn MongoDB Atlas Setup!
