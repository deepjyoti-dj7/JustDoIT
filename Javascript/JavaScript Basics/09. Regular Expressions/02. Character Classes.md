# Character Classes

Character classes match specific sets of characters in regular expressions.

---

## Basic Character Classes

### Square Brackets [...]

Match any single character from the set.

```javascript
const vowels = /[aeiou]/;

console.log(vowels.test('apple'));  // true
console.log(vowels.test('sky'));    // false

const match = 'apple'.match(/[aeiou]/g);
console.log(match);  // ['a', 'e']
```

---

## Ranges

### Letter Ranges

```javascript
// Lowercase letters
const lowercase = /[a-z]/;
console.log(lowercase.test('a'));  // true
console.log(lowercase.test('A'));  // false

// Uppercase letters
const uppercase = /[A-Z]/;
console.log(uppercase.test('A'));  // true

// Any letter
const letters = /[a-zA-Z]/;
console.log(letters.test('x'));  // true
console.log(letters.test('X'));  // true
```

### Number Ranges

```javascript
// Single digit
const digit = /[0-9]/;
console.log(digit.test('5'));  // true

// Specific range
const lowDigit = /[0-5]/;
console.log(lowDigit.test('3'));  // true
console.log(lowDigit.test('7'));  // false

// Multiple ranges
const hexDigit = /[0-9a-fA-F]/;
console.log(hexDigit.test('a'));   // true
console.log(hexDigit.test('F'));   // true
console.log(hexDigit.test('g'));   // false
```

---

## Negated Character Classes

### [^...]

Match anything NOT in the set.

```javascript
// Not a vowel
const notVowel = /[^aeiou]/;
console.log(notVowel.test('a'));  // false
console.log(notVowel.test('b'));  // true

// Not a digit
const notDigit = /[^0-9]/;
console.log(notDigit.test('5'));  // false
console.log(notDigit.test('a'));  // true

// Not whitespace
const notSpace = /[^ \t\n]/;
console.log(notSpace.test(' '));  // false
console.log(notSpace.test('a'));  // true
```

---

## Shorthand Character Classes

### \d - Digits

```javascript
const regex = /\d/;  // Equivalent to [0-9]

console.log(regex.test('5'));     // true
console.log(regex.test('a'));     // false

// Extract all digits
const text = 'Room 42, Floor 3';
console.log(text.match(/\d/g));   // ['4', '2', '3']
console.log(text.match(/\d+/g));  // ['42', '3']
```

### \D - Non-digits

```javascript
const regex = /\D/;  // Equivalent to [^0-9]

console.log(regex.test('a'));     // true
console.log(regex.test('5'));     // false

const text = 'abc123def';
console.log(text.match(/\D+/g));  // ['abc', 'def']
```

### \w - Word Characters

```javascript
const regex = /\w/;  // Equivalent to [a-zA-Z0-9_]

console.log(regex.test('a'));     // true
console.log(regex.test('Z'));     // true
console.log(regex.test('5'));     // true
console.log(regex.test('_'));     // true
console.log(regex.test('@'));     // false

// Extract words
const text = 'hello_world123';
console.log(text.match(/\w+/g));  // ['hello_world123']
```

### \W - Non-word Characters

```javascript
const regex = /\W/;  // Equivalent to [^a-zA-Z0-9_]

console.log(regex.test('@'));     // true
console.log(regex.test('a'));     // false

const text = 'hello@world!';
console.log(text.match(/\W+/g));  // ['@', '!']
```

### \s - Whitespace

```javascript
const regex = /\s/;  // Space, tab, newline, etc.

console.log(regex.test(' '));     // true
console.log(regex.test('\t'));    // true
console.log(regex.test('\n'));    // true
console.log(regex.test('a'));     // false

// Split on whitespace
const text = 'hello  world\tthere';
console.log(text.split(/\s+/));   // ['hello', 'world', 'there']
```

### \S - Non-whitespace

```javascript
const regex = /\S/;  // Not whitespace

console.log(regex.test('a'));     // true
console.log(regex.test(' '));     // false

const text = '  hello  world  ';
console.log(text.match(/\S+/g));  // ['hello', 'world']
```

---

## Combining Character Classes

### Multiple Ranges

```javascript
// Letters and digits
const alphanumeric = /[a-zA-Z0-9]/;

// Hex digits
const hex = /[0-9a-fA-F]/;

// Custom set
const custom = /[abc123!@#]/;
console.log(custom.test('a'));   // true
console.log(custom.test('1'));   // true
console.log(custom.test('!'));   // true
console.log(custom.test('x'));   // false
```

### Negated with Ranges

```javascript
// Not alphanumeric
const notAlphanumeric = /[^a-zA-Z0-9]/;
console.log(notAlphanumeric.test('@'));  // true
console.log(notAlphanumeric.test('a'));  // false

// Not whitespace or punctuation
const notSpacePunct = /[^  \t\n.,!?]/;
```

---

## Special Characters in Classes

### Literal Characters

Most special characters are literal inside []:

```javascript
// These don't need escaping inside []
const regex = /[.+*?]/;
console.log(regex.test('.'));   // true
console.log(regex.test('+'));   // true
console.log(regex.test('*'));   // true

// But these do need escaping
const withBrackets = /[\[\]]/;  // Matches [ or ]
const withBackslash = /[\\]/;   // Matches \
const withCaret = /[\^]/;       // Matches ^ (or use [a^] where ^ isn't first)
```

### Hyphen

```javascript
// Hyphen at end or start is literal
const regex1 = /[a-]/;   // Matches 'a' or '-'
const regex2 = /[-a]/;   // Matches '-' or 'a'

// Hyphen in middle creates range
const regex3 = /[a-z]/;  // Matches lowercase letters

// Escape for literal hyphen in middle
const regex4 = /[a\-z]/; // Matches 'a', '-', or 'z'
```

---

## Practical Examples

### Alphanumeric Username

```javascript
const username = /^[a-zA-Z0-9_]{3,16}$/;

console.log(username.test('john_doe'));     // true
console.log(username.test('user123'));      // true
console.log(username.test('ab'));           // false (too short)
console.log(username.test('user@name'));    // false (@ not allowed)
```

### Hex Color

```javascript
const hexColor = /^#?[0-9a-fA-F]{6}$/;

console.log(hexColor.test('#FF5733'));   // true
console.log(hexColor.test('FF5733'));    // true
console.log(hexColor.test('#GG5733'));   // false (G not hex)
```

### Phone Number Digits

```javascript
const phone = /^[\d\-\(\) ]{10,}$/;

console.log(phone.test('123-456-7890'));    // true
console.log(phone.test('(123) 456-7890'));  // true
console.log(phone.test('1234567890'));      // true
```

### Remove Non-alphanumeric

```javascript
const text = 'Hello, World! 123';
const cleaned = text.replace(/[^a-zA-Z0-9 ]/g, '');
console.log(cleaned);  // 'Hello World 123'
```

### Extract Words

```javascript
const text = 'hello-world_test';
const words = text.match(/[a-zA-Z]+/g);
console.log(words);  // ['hello', 'world', 'test']
```

### Validate Email Local Part

```javascript
// Simplified email local part (before @)
const localPart = /^[a-zA-Z0-9._%-]+$/;

console.log(localPart.test('user.name'));    // true
console.log(localPart.test('user_name'));    // true
console.log(localPart.test('user@name'));    // false
```

---

## Unicode Character Classes

### Unicode Properties (ES2018+)

```javascript
// Match any letter (Unicode-aware)
const letter = /\p{Letter}/u;
console.log(letter.test('a'));   // true
console.log(letter.test('Î±'));   // true (Greek alpha)

// Match any emoji
const emoji = /\p{Emoji}/u;
console.log(emoji.test('ðŸ˜€'));   // true

// Match any punctuation
const punct = /\p{Punctuation}/u;
console.log(punct.test('!'));    // true

// Match specific scripts
const greek = /\p{Script=Greek}/u;
console.log(greek.test('Î±'));    // true
console.log(greek.test('a'));    // false
```

### Unicode Ranges

```javascript
// Match specific Unicode range
const cyrillic = /[\u0400-\u04FF]/;
console.log(cyrillic.test('Ð”'));  // true

// Match accented characters
const accented = /[Ã Ã¡Ã¢Ã£Ã¤Ã¥Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã²Ã³Ã´ÃµÃ¶Ã¹ÃºÃ»Ã¼]/;
console.log(accented.test('Ã©'));  // true
```

---

## Case Sensitivity

### Case-insensitive Flag

```javascript
// Case-sensitive (default)
const regex1 = /[a-z]/;
console.log(regex1.test('A'));   // false

// Case-insensitive
const regex2 = /[a-z]/i;
console.log(regex2.test('A'));   // true

// Or include both cases
const regex3 = /[a-zA-Z]/;
console.log(regex3.test('A'));   // true
```

---

## Performance Tips

### Specific vs General

```javascript
// âœ“ Specific is faster
const digits = /[0-9]/;

// âœ— Less specific
const anything = /./;
```

### Negated Classes

```javascript
// Sometimes negated is clearer
const notDigit = /[^0-9]/;

// Instead of listing everything else
const notDigitLong = /[a-zA-Z!@#$%...]/;  // Too long!
```

---

## Common Patterns

```javascript
// Letters only
/[a-zA-Z]+/

// Digits only
/[0-9]+/

// Alphanumeric
/[a-zA-Z0-9]+/

// Alphanumeric with underscore
/[a-zA-Z0-9_]+/  or  /\w+/

// Not whitespace
/[^\s]+/  or  /\S+/

// Custom allowed characters
/[a-zA-Z0-9._-]+/

// Not special characters
/[^!@#$%^&*()]+/

// Letters, spaces, hyphens
/[a-zA-Z \-]+/

// URL-safe characters
/[a-zA-Z0-9._~:/?#\[\]@!$&'()*+,;=-]+/
```

---

## Best Practices

1. **Use shorthand when possible**
   ```javascript
   /\d/ instead of /[0-9]/
   /\w/ instead of /[a-zA-Z0-9_]/
   ```

2. **Be specific about what you want**
   ```javascript
   /[a-z]/ for lowercase only
   /[a-zA-Z]/ for any letter
   ```

3. **Use negation for exclusion**
   ```javascript
   /[^0-9]/ to match non-digits
   ```

4. **Consider Unicode for international text**
   ```javascript
   /\p{Letter}/u for any letter in any language
   ```

5. **Test edge cases**
   ```javascript
   // Does your pattern handle:
   // - Empty strings?
   // - Special characters?
   // - Unicode?
   ```

---

## Key Takeaways

- **[...]** matches any single character from the set
- **[a-z]** range notation for sequences
- **[^...]** negated class (NOT in set)
- **\d** digits [0-9]
- **\D** non-digits [^0-9]
- **\w** word characters [a-zA-Z0-9_]
- **\W** non-word characters
- **\s** whitespace
- **\S** non-whitespace
- **Combine ranges**: [a-zA-Z0-9]
- **Most specials** are literal inside []
- **Use /u flag** for Unicode support
- **Be specific** for better performance
