# Spread & Rest Operators

The spread (`...`) and rest (`...`) operators use the same syntax but serve opposite purposes - spreading elements out or collecting them together.

---

## Spread Operator (...)

Expands iterables into individual elements.

### Array Spreading

```javascript
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];

// Combine arrays
const combined = [...arr1, ...arr2];  // [1, 2, 3, 4, 5, 6]

// Clone array
const clone = [...arr1];  // [1, 2, 3]

// Add elements
const extended = [0, ...arr1, 4];  // [0, 1, 2, 3, 4]

// Math functions
const numbers = [1, 5, 3, 9, 2];
Math.max(...numbers);  // 9
Math.min(...numbers);  // 1
```

### Object Spreading

```javascript
const obj1 = { a: 1, b: 2 };
const obj2 = { c: 3, d: 4 };

// Combine objects
const combined = { ...obj1, ...obj2 };  // { a: 1, b: 2, c: 3, d: 4 }

// Clone object
const clone = { ...obj1 };  // { a: 1, b: 2 }

// Override properties
const updated = { ...obj1, b: 10 };  // { a: 1, b: 10 }

// Add properties
const extended = { ...obj1, c: 3 };  // { a: 1, b: 2, c: 3 }
```

### String Spreading

```javascript
const str = "hello";
const chars = [...str];  // ['h', 'e', 'l', 'l', 'o']
```

### Practical Examples

```javascript
// Merge arrays
const fruits = ['apple', 'banana'];
const vegetables = ['carrot', 'potato'];
const food = [...fruits, ...vegetables];

// Add to array immutably
const items = [1, 2, 3];
const newItems = [...items, 4];  // Don't modify original

// Copy and modify
const user = { name: 'John', age: 30 };
const updatedUser = { ...user, age: 31 };

// Default values
const defaultConfig = { timeout: 5000, retries: 3 };
const userConfig = { timeout: 10000 };
const config = { ...defaultConfig, ...userConfig };
// { timeout: 10000, retries: 3 }
```

---

## Rest Parameters

Collects multiple elements into an array.

### Function Parameters

```javascript
// Collect remaining arguments
function sum(...numbers) {
  return numbers.reduce((acc, n) => acc + n, 0);
}

sum(1, 2, 3);        // 6
sum(1, 2, 3, 4, 5);  // 15

// First parameter + rest
function greet(greeting, ...names) {
  return `${greeting}, ${names.join(' and ')}!`;
}

greet('Hello', 'Alice', 'Bob');  // "Hello, Alice and Bob!"
```

### Array Destructuring

```javascript
const numbers = [1, 2, 3, 4, 5];

const [first, ...rest] = numbers;
// first=1, rest=[2,3,4,5]

const [a, b, ...others] = numbers;
// a=1, b=2, others=[3,4,5]
```

### Object Destructuring

```javascript
const user = { name: 'John', age: 30, city: 'NY', country: 'USA' };

const { name, ...details } = user;
// name='John', details={ age: 30, city: 'NY', country: 'USA' }

const { city, ...otherInfo } = user;
// city='NY', otherInfo={ name: 'John', age: 30, country: 'USA' }
```

---

## Spread vs Rest

**Same syntax, different contexts:**

```javascript
// SPREAD - expanding
const arr = [1, 2, 3];
console.log(...arr);  // 1 2 3 (spreads into arguments)

const newArr = [...arr, 4];  // [1, 2, 3, 4] (spreads into array)

// REST - collecting
function sum(...numbers) {  // Collects arguments into array
  return numbers.reduce((a, b) => a + b);
}

const [first, ...rest] = arr;  // Collects remaining into array
```

---

## Use Cases

### Immutable Array Operations

```javascript
const items = [1, 2, 3];

// Add item
const added = [...items, 4];

// Remove item
const removed = items.filter(x => x !== 2);

// Update item
const updated = items.map(x => x === 2 ? 20 : x);

// Insert item
const inserted = [...items.slice(0, 1), 99, ...items.slice(1)];
```

### Immutable Object Updates

```javascript
const user = { name: 'John', age: 30 };

// Update property
const updated = { ...user, age: 31 };

// Add property
const withEmail = { ...user, email: 'john@example.com' };

// Remove property (with destructuring)
const { age, ...withoutAge } = user;
```

### Function Arguments

```javascript
// Old way with arguments
function oldSum() {
  const args = Array.from(arguments);
  return args.reduce((a, b) => a + b, 0);
}

// Modern with rest
function newSum(...numbers) {
  return numbers.reduce((a, b) => a + b, 0);
}

// Flexible parameters
function createUser(name, ...roles) {
  return { name, roles };
}

createUser('John', 'admin', 'editor');
// { name: 'John', roles: ['admin', 'editor'] }
```

### Combining with Default Parameters

```javascript
function fetchData(url, { method = 'GET', ...options } = {}) {
  console.log(method);   // GET
  console.log(options);  // Other options
}
```

---

## Common Patterns

### Shallow Clone

```javascript
const originalArray = [1, 2, 3];
const clonedArray = [...originalArray];

const originalObject = { a: 1, b: 2 };
const clonedObject = { ...originalObject };
```

### Merge with Override

```javascript
const defaults = { theme: 'light', lang: 'en', size: 'medium' };
const user = { theme: 'dark' };
const settings = { ...defaults, ...user };
// { theme: 'dark', lang: 'en', size: 'medium' }
```

### Conditional Spreading

```javascript
const user = {
  name: 'John',
  ...(isAdmin && { role: 'admin' }),
  ...(isPremium && { premium: true })
};
```

---

## Limitations

### Shallow Copy Only

```javascript
const original = { a: 1, nested: { b: 2 } };
const copy = { ...original };

copy.nested.b = 10;
console.log(original.nested.b);  // 10 (modified!)

// Deep clone requires different approach
const deepCopy = JSON.parse(JSON.stringify(original));
// Or use library like lodash.cloneDeep
```

### Order Matters

```javascript
const obj = { a: 1, b: 2 };

{ ...obj, a: 10 }  // { a: 10, b: 2 } (override)
{ a: 10, ...obj }  // { a: 1, b: 2 } (obj overrides)
```

---

## Best Practices

1. **Use spread for immutable operations**
   ```javascript
   // ✓ Immutable
   const newArr = [...arr, newItem];
   
   // ✗ Mutates original
   arr.push(newItem);
   ```

2. **Use rest for variable arguments**
   ```javascript
   // ✓ Modern
   function sum(...numbers) { }
   
   // ✗ Old arguments object
   function sum() {
     const args = Array.from(arguments);
   }
   ```

3. **Watch for shallow copies**
   ```javascript
   // ⚠️ Shallow copy
   const copy = { ...obj };
   
   // For deep objects, use proper deep clone
   ```

4. **Spread readability**
   ```javascript
   // ✓ Clear
   const combined = [...arr1, ...arr2];
   
   // ✗ Confusing
   const weird = [...[...[...arr]]];
   ```

---

## Key Takeaways

- **Spread** expands: `[...arr]`, `{...obj}`
- **Rest** collects: `(...args)`, `[first, ...rest]`
- **Arrays**: Clone, merge, expand
- **Objects**: Clone, merge, override
- **Functions**: Variable arguments with rest
- **Immutability**: Create new instead of mutating
- **Shallow copy only** - nested objects share references
- Order matters when spreading objects
