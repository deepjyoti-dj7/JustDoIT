# Default Parameters

Default parameters allow you to initialize function parameters with default values when no argument is passed or when `undefined` is passed.

---

## Basic Syntax

### Before ES6 (Old Way)
```javascript
function greet(name) {
  name = name || "Guest";  // Problem: fails for falsy values
  return "Hello, " + name;
}

greet();           // "Hello, Guest"
greet("John");     // "Hello, John"
greet("");         // "Hello, Guest" ⚠️ Empty string treated as Guest
greet(0);          // "Hello, Guest" ⚠️ 0 treated as Guest
```

### ES6+ (Modern Way)
```javascript
function greet(name = "Guest") {
  return `Hello, ${name}`;
}

greet();           // "Hello, Guest"
greet("John");     // "Hello, John"
greet("");         // "Hello, " ✓ Empty string preserved
greet(0);          // "Hello, 0" ✓ 0 preserved
greet(undefined);  // "Hello, Guest" ✓ undefined triggers default
```

---

## Multiple Default Parameters

```javascript
function createUser(name = "Anonymous", age = 18, role = "user") {
  return { name, age, role };
}

createUser();
// { name: "Anonymous", age: 18, role: "user" }

createUser("John");
// { name: "John", age: 18, role: "user" }

createUser("John", 25);
// { name: "John", age: 25, role: "user" }

createUser("John", 25, "admin");
// { name: "John", age: 25, role: "admin" }
```

---

## Default Parameters with Expressions

### Using Function Calls
```javascript
function getDefaultName() {
  console.log("Getting default name...");
  return "Guest";
}

function greet(name = getDefaultName()) {
  return `Hello, ${name}`;
}

greet("John");  // Doesn't call getDefaultName()
greet();        // Calls getDefaultName() and logs message
```

### Using Calculations
```javascript
function calculatePrice(price, tax = price * 0.1, shipping = 5) {
  return price + tax + shipping;
}

calculatePrice(100);        // 100 + 10 + 5 = 115
calculatePrice(100, 20);    // 100 + 20 + 5 = 125
calculatePrice(100, 20, 0); // 100 + 20 + 0 = 120
```

### Using Previous Parameters
```javascript
function createRect(width = 10, height = width) {
  return { width, height };
}

createRect();        // { width: 10, height: 10 }
createRect(20);      // { width: 20, height: 20 }
createRect(20, 15);  // { width: 20, height: 15 }

// ✗ Cannot reference later parameters
function invalid(a = b, b = 5) {  // ReferenceError
  return a + b;
}
```

---

## Arrow Functions with Defaults

```javascript
const greet = (name = "Guest") => `Hello, ${name}`;

const multiply = (a, b = 1) => a * b;

const createUser = (name = "Anonymous", age = 18) => ({
  name,
  age,
  createdAt: new Date()
});
```

---

## Destructuring with Defaults

### Array Destructuring
```javascript
function processArray([first = 0, second = 0, third = 0] = []) {
  return first + second + third;
}

processArray([1, 2, 3]);  // 6
processArray([1, 2]);     // 3 (third = 0)
processArray([1]);        // 1 (second = 0, third = 0)
processArray();           // 0 (all defaults)
```

### Object Destructuring
```javascript
function displayUser({ name = "Guest", age = 18, role = "user" } = {}) {
  return `${name} (${age}) - ${role}`;
}

displayUser({ name: "John", age: 25, role: "admin" });
// "John (25) - admin"

displayUser({ name: "Jane" });
// "Jane (18) - user"

displayUser();
// "Guest (18) - user"
```

---

## Practical Use Cases

### API Configuration
```javascript
function fetchData(url, {
  method = "GET",
  headers = {},
  timeout = 5000,
  retries = 3
} = {}) {
  console.log(`Fetching ${url} with ${method}`);
  console.log(`Timeout: ${timeout}ms, Retries: ${retries}`);
  // Implementation...
}

fetchData("/api/users");
// Uses all defaults

fetchData("/api/users", { method: "POST", timeout: 10000 });
// Custom method and timeout, default headers and retries
```

### Logger Function
```javascript
function log(message, level = "INFO", timestamp = new Date().toISOString()) {
  console.log(`[${timestamp}] [${level}] ${message}`);
}

log("Server started");
// [2025-12-23T10:30:00.000Z] [INFO] Server started

log("Error occurred", "ERROR");
// [2025-12-23T10:30:00.000Z] [ERROR] Error occurred
```

### Pagination
```javascript
function getUsers(page = 1, limit = 10, sortBy = "name") {
  const offset = (page - 1) * limit;
  console.log(`Page ${page}, Limit ${limit}, Sort by ${sortBy}`);
  // Fetch users from database
  return { page, limit, sortBy, offset };
}

getUsers();              // page 1, limit 10, sort by name
getUsers(2);             // page 2, limit 10, sort by name
getUsers(2, 20, "age");  // page 2, limit 20, sort by age
```

---

## Common Pitfalls

### 1. Null vs Undefined
```javascript
function test(value = "default") {
  return value;
}

test(undefined);  // "default" ✓ Triggers default
test(null);       // null ⚠️ Does NOT trigger default
test(0);          // 0 ⚠️ Does NOT trigger default
test("");         // "" ⚠️ Does NOT trigger default
```

**Only `undefined` or missing argument triggers default!**

### 2. Order Matters
```javascript
// ✗ Bad: Required parameters after optional
function bad(a = 1, b) {
  return a + b;
}
bad(2);  // a=2, b=undefined ⚠️

// ✓ Good: Optional parameters at the end
function good(b, a = 1) {
  return a + b;
}
good(2);  // b=2, a=1 ✓
```

### 3. Skipping Arguments
```javascript
function createUser(name, age = 18, role = "user") {
  return { name, age, role };
}

// To skip middle parameter, pass undefined
createUser("John", undefined, "admin");
// { name: "John", age: 18, role: "admin" }
```

### 4. Side Effects in Defaults
```javascript
let counter = 0;

function increment(value = ++counter) {
  return value;
}

increment();  // 1 (counter becomes 1)
increment();  // 2 (counter becomes 2)
increment(10); // 10 (counter stays 2)
increment();  // 3 (counter becomes 3)
```

**Avoid side effects in default parameter expressions!**

---

## Best Practices

1. **Place optional parameters at the end**
   ```javascript
   // ✓ Good
   function create(required, optional = "default") {}
   
   // ✗ Avoid
   function create(optional = "default", required) {}
   ```

2. **Use meaningful defaults**
   ```javascript
   // ✓ Good
   function paginate(page = 1, limit = 10) {}
   
   // ✗ Avoid magic numbers without context
   function paginate(p = 1, l = 10) {}
   ```

3. **Keep defaults simple**
   ```javascript
   // ✓ Good
   function greet(name = "Guest") {}
   
   // ✗ Avoid complex computations
   function process(data = expensiveOperation()) {}
   ```

4. **Document non-obvious defaults**
   ```javascript
   /**
    * Fetches users from the API
    * @param {number} page - Page number (default: 1)
    * @param {number} limit - Items per page (default: 10)
    */
   function getUsers(page = 1, limit = 10) {}
   ```

5. **Consider object parameters for many options**
   ```javascript
   // ✗ Too many parameters
   function create(a, b = 1, c = 2, d = 3, e = 4) {}
   
   // ✓ Better with object
   function create(a, options = {}) {
     const { b = 1, c = 2, d = 3, e = 4 } = options;
   }
   ```

---

## Key Takeaways

- Default parameters simplify function definitions by eliminating manual checks
- Only `undefined` (or missing argument) triggers the default value
- `null`, `0`, `""`, `false` do NOT trigger defaults
- Defaults are evaluated at call time, not definition time
- Can reference previous parameters in default expressions
- Cannot reference later parameters in default expressions
- Place optional parameters at the end of the parameter list
- Combine with destructuring for powerful, flexible function signatures
