# Loops

Loops allow you to execute code repeatedly. JavaScript provides several types of loops for different use cases.

---

## for Loop

Classic loop with counter - best when you know iteration count.

```javascript
for (initialization; condition; increment) {
  // code to repeat
}

// Basic example
for (let i = 0; i < 5; i++) {
  console.log(i);  // 0, 1, 2, 3, 4
}

// Array iteration
let fruits = ["apple", "banana", "orange"];
for (let i = 0; i < fruits.length; i++) {
  console.log(fruits[i]);
}

// Counting backwards
for (let i = 10; i >= 0; i--) {
  console.log(i);  // 10, 9, 8...0
}

// Step by 2
for (let i = 0; i < 10; i += 2) {
  console.log(i);  // 0, 2, 4, 6, 8
}

// Multiple variables
for (let i = 0, j = 10; i < j; i++, j--) {
  console.log(i, j);  // 0 10, 1 9, 2 8...
}
```

---

## while Loop

Executes while condition is true - use when iterations unknown.

```javascript
while (condition) {
  // code to repeat
}

// Basic example
let i = 0;
while (i < 5) {
  console.log(i);
  i++;
}

// Reading input
let userInput = "";
while (userInput !== "quit") {
  userInput = prompt("Enter command (or 'quit'):");
  processCommand(userInput);
}

// Waiting for condition
while (!isLoaded) {
  // wait or retry
}

// Be careful of infinite loops!
// while (true) { }  // Runs forever - avoid unless intentional
```

---

## do-while Loop

Executes at least once, then checks condition.

```javascript
do {
  // code executes at least once
} while (condition);

// Menu example
let choice;
do {
  console.log("1. Play");
  console.log("2. Settings");
  console.log("3. Quit");
  choice = getUserInput();
  processChoice(choice);
} while (choice !== 3);

// Always runs once
let num = 10;
do {
  console.log(num);  // Prints 10
  num++;
} while (num < 5);  // Condition false, but already ran once
```

**Difference from while:**
- `while`: Check condition, then execute
- `do-while`: Execute, then check condition

---

## for...of Loop

Iterates over iterable objects (arrays, strings, sets, maps).

```javascript
for (let item of iterable) {
  // code for each item
}

// Array iteration (recommended)
let numbers = [10, 20, 30];
for (let num of numbers) {
  console.log(num);  // 10, 20, 30
}

// String iteration
let str = "hello";
for (let char of str) {
  console.log(char);  // h, e, l, l, o
}

// Set iteration
let uniqueItems = new Set([1, 2, 3]);
for (let item of uniqueItems) {
  console.log(item);
}

// Map iteration
let map = new Map([["a", 1], ["b", 2]]);
for (let [key, value] of map) {
  console.log(key, value);  // a 1, b 2
}

// Practical example
let prices = [10, 20, 30, 40];
let total = 0;
for (let price of prices) {
  total += price;
}
console.log("Total:", total);  // 100
```

**When to use:** When you need the value, not the index.

---

## for...in Loop

Iterates over object property keys (and array indices).

```javascript
for (let key in object) {
  // code for each property
}

// Object iteration
let person = {
  name: "John",
  age: 30,
  city: "New York"
};

for (let key in person) {
  console.log(key, person[key]);
  // name John
  // age 30
  // city New York
}

// Better to filter own properties
for (let key in person) {
  if (person.hasOwnProperty(key)) {
    console.log(key, person[key]);
  }
}

// Array iteration (NOT recommended - use for...of instead)
let arr = [10, 20, 30];
for (let index in arr) {
  console.log(index);  // "0", "1", "2" (strings, not numbers!)
  console.log(arr[index]);  // 10, 20, 30
}
```

**Important:**
- Returns property names (strings)
- Includes inherited properties
- For arrays, use `for...of` instead

---

## break Statement

Exit loop immediately.

```javascript
// Stop when condition met
for (let i = 0; i < 10; i++) {
  if (i === 5) {
    break;  // Exit loop
  }
  console.log(i);  // 0, 1, 2, 3, 4
}

// Search example
let found = false;
let users = ["Alice", "Bob", "Charlie", "David"];
for (let user of users) {
  if (user === "Charlie") {
    found = true;
    break;  // Stop searching
  }
}

// First matching item
let numbers = [1, 3, 5, 8, 10];
for (let num of numbers) {
  if (num % 2 === 0) {
    console.log("First even:", num);  // 8
    break;
  }
}
```

---

## continue Statement

Skip current iteration, move to next.

```javascript
// Skip specific values
for (let i = 0; i < 5; i++) {
  if (i === 2) {
    continue;  // Skip when i is 2
  }
  console.log(i);  // 0, 1, 3, 4
}

// Skip even numbers
for (let i = 0; i < 10; i++) {
  if (i % 2 === 0) {
    continue;  // Skip even numbers
  }
  console.log(i);  // 1, 3, 5, 7, 9
}

// Filter during iteration
let words = ["hello", "", "world", "", "test"];
for (let word of words) {
  if (!word) {
    continue;  // Skip empty strings
  }
  console.log(word);  // hello, world, test
}
```

---

## Nested Loops

Loops inside loops - useful for 2D data.

```javascript
// Multiplication table
for (let i = 1; i <= 3; i++) {
  for (let j = 1; j <= 3; j++) {
    console.log(`${i} x ${j} = ${i * j}`);
  }
}

// 2D array
let matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

for (let i = 0; i < matrix.length; i++) {
  for (let j = 0; j < matrix[i].length; j++) {
    console.log(matrix[i][j]);
  }
}

// Pattern printing
for (let i = 1; i <= 5; i++) {
  let stars = "";
  for (let j = 1; j <= i; j++) {
    stars += "* ";
  }
  console.log(stars);
}
// *
// * *
// * * *
// * * * *
// * * * * *
```

**Warning:** Nested loops can have performance issues with large data.

---

## Array Methods (Modern Alternative)

Higher-order methods for array iteration.

### forEach - Execute for each item
```javascript
let numbers = [1, 2, 3, 4, 5];

numbers.forEach(function(num) {
  console.log(num);
});

// With arrow function
numbers.forEach(num => console.log(num));

// With index
numbers.forEach((num, index) => {
  console.log(`Index ${index}: ${num}`);
});
```

### map - Transform each item
```javascript
let numbers = [1, 2, 3, 4, 5];
let doubled = numbers.map(num => num * 2);
console.log(doubled);  // [2, 4, 6, 8, 10]

let names = ["john", "jane"];
let capitalized = names.map(name => name.toUpperCase());
// ["JOHN", "JANE"]
```

### filter - Keep matching items
```javascript
let numbers = [1, 2, 3, 4, 5, 6];
let evens = numbers.filter(num => num % 2 === 0);
console.log(evens);  // [2, 4, 6]

let users = [{name: "John", age: 25}, {name: "Jane", age: 17}];
let adults = users.filter(user => user.age >= 18);
```

### reduce - Accumulate values
```javascript
let numbers = [1, 2, 3, 4, 5];
let sum = numbers.reduce((total, num) => total + num, 0);
console.log(sum);  // 15

let max = numbers.reduce((max, num) => num > max ? num : max);
console.log(max);  // 5
```

### find - First matching item
```javascript
let users = ["Alice", "Bob", "Charlie"];
let found = users.find(user => user.startsWith("B"));
console.log(found);  // "Bob"

let number = [1, 3, 5, 8, 10].find(n => n % 2 === 0);
console.log(number);  // 8
```

### some/every - Test conditions
```javascript
let numbers = [1, 2, 3, 4, 5];

let hasEven = numbers.some(num => num % 2 === 0);
console.log(hasEven);  // true (at least one even)

let allPositive = numbers.every(num => num > 0);
console.log(allPositive);  // true (all positive)
```

---

## Loop Selection Guide

| Use Case | Best Loop |
|----------|-----------|
| Array values | `for...of` or array methods |
| Array with index | traditional `for` loop |
| Object properties | `for...in` or `Object.keys()` |
| Unknown iterations | `while` loop |
| At least once | `do-while` loop |
| Transform array | `map()` |
| Filter array | `filter()` |
| Accumulate value | `reduce()` |

---

## Common Patterns

### Sum array
```javascript
// Traditional
let sum = 0;
for (let num of numbers) {
  sum += num;
}

// Modern
let sum = numbers.reduce((acc, num) => acc + num, 0);
```

### Find max/min
```javascript
let max = numbers[0];
for (let num of numbers) {
  if (num > max) max = num;
}

// Or
let max = Math.max(...numbers);
```

### Reverse array
```javascript
for (let i = arr.length - 1; i >= 0; i--) {
  console.log(arr[i]);
}

// Or
arr.reverse().forEach(item => console.log(item));
```

---

## Best Practices

1. **Choose appropriate loop type**
   - Values: `for...of`
   - Indices: traditional `for`
   - Objects: `for...in` or `Object.keys()`

2. **Avoid modifying loop variable unexpectedly**
   ```javascript
   // ✗ Avoid
   for (let i = 0; i < 10; i++) {
     i += 2;  // Confusing
   }
   
   // ✓ Be explicit
   for (let i = 0; i < 10; i += 3) {
     // clear intent
   }
   ```

3. **Cache array length if not changing**
   ```javascript
   // Recalculates length each iteration
   for (let i = 0; i < arr.length; i++) { }
   
   // Cached (minor optimization)
   for (let i = 0, len = arr.length; i < len; i++) { }
   ```

4. **Prefer array methods for readability**
   ```javascript
   // ✓ Clear intent
   let adults = users.filter(u => u.age >= 18);
   
   // ✗ More verbose
   let adults = [];
   for (let user of users) {
     if (user.age >= 18) {
       adults.push(user);
     }
   }
   ```

5. **Avoid deep nesting** (> 3 levels)
   - Extract to functions
   - Use early returns

---

## Key Takeaways

- **`for`** - classic counter loop
- **`while`** - unknown iterations
- **`do-while`** - at least one iteration
- **`for...of`** - array/iterable values
- **`for...in`** - object keys (avoid for arrays)
- **`break`** - exit loop
- **`continue`** - skip iteration
- **Array methods** - cleaner, more functional
- Choose the right loop for readability
