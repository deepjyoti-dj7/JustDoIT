# Strict Mode

Strict mode is a way to opt into a restricted variant of JavaScript. It catches common coding mistakes and prevents unsafe actions, making code more secure and optimizable.

---

## Enabling Strict Mode

### Entire Script
```javascript
"use strict";

// All code below runs in strict mode
function test() {
  // strict mode
}

let x = 10;
```

### Single Function
```javascript
function test() {
  "use strict";
  // Only this function is in strict mode
}

function normal() {
  // Regular mode
}
```

### Modules (Automatic)
```javascript
// ES6 modules are always in strict mode
export function test() {
  // Already strict - no need for "use strict"
}
```

**Note:** Place `"use strict"` at the very top (before any code) or it won't work.

---

## What Strict Mode Does

Strict mode changes JavaScript behavior in several ways:

1. **Throws errors** instead of silently failing
2. **Prevents** certain unsafe actions
3. **Disables** confusing features
4. **Prepares** code for future JavaScript versions

---

## Key Changes and Benefits

### 1. Prevents Accidental Globals

Without strict mode, forgetting `var`/`let`/`const` creates a global variable.

```javascript
"use strict";

function test() {
  x = 10;  // ReferenceError: x is not defined
}

// Without strict mode:
// Creates global variable (window.x in browsers)
// Very dangerous bug source!
```

**Why it matters:** Prevents variable name typos from creating globals.

### 2. Assignment Errors

Silent failures become errors.

```javascript
"use strict";

// Assignment to non-writable property
let obj = {};
Object.defineProperty(obj, "x", { value: 42, writable: false });
obj.x = 9;  // TypeError

// Assignment to getter-only property
let obj2 = { get x() { return 17; } };
obj2.x = 5;  // TypeError

// Assignment to non-extensible object
let obj3 = {};
Object.preventExtensions(obj3);
obj3.newProp = "oops";  // TypeError

// Without strict: all fail silently
```

### 3. No Duplicate Parameters

```javascript
"use strict";

function sum(a, a, c) {  // SyntaxError: Duplicate parameter name
  return a + a + c;
}

// Without strict: uses last 'a' value
```

### 4. Octal Literals Forbidden

```javascript
"use strict";

let num = 010;  // SyntaxError

// Use ES6 octal syntax instead
let num = 0o10;  // 8 in decimal
```

**Why:** Old octal syntax was confusing and error-prone.

### 5. Cannot Delete Variables/Functions

```javascript
"use strict";

let x = 10;
delete x;  // SyntaxError

function test() {}
delete test;  // SyntaxError

// Can still delete object properties
let obj = { prop: 1 };
delete obj.prop;  // ✓ OK
```

### 6. `this` in Functions is `undefined`

```javascript
"use strict";

function test() {
  console.log(this);  // undefined
}
test();

// Without strict mode: this = global object (window in browsers)
```

**Why it matters:** Prevents accidental global modifications.

```javascript
"use strict";

function User(name) {
  this.name = name;
}

// Without 'new', this is undefined - error caught early!
let u = User("John");  // TypeError: Cannot set property 'name' of undefined

// Without strict: creates global variable 'name'
```

### 7. `eval()` Has Own Scope

```javascript
"use strict";

eval("var x = 10");
console.log(x);  // ReferenceError: x is not defined

// Without strict: x becomes available in outer scope
```

### 8. Reserved Words

Future JavaScript keywords cannot be used as variables.

```javascript
"use strict";

let public = 5;      // SyntaxError
let interface = {};  // SyntaxError
let package = [];    // SyntaxError
let private = 10;    // SyntaxError
let protected = 20;  // SyntaxError
let static = 30;     // SyntaxError
```

### 9. `with` Statement Forbidden

```javascript
"use strict";

with (obj) {  // SyntaxError
  // code
}
```

**Why:** `with` makes code slower and ambiguous.

### 10. `arguments` Object Behavior

```javascript
"use strict";

function test(a) {
  a = 10;
  console.log(arguments[0]);  // Original value
}
test(5);  // 5

// Without strict: arguments[0] would be 10
```

---

## Common Use Cases

### Preventing Typos
```javascript
"use strict";

let userName = "John";
usrName = "Jane";  // ReferenceError (caught typo!)

// Without strict: creates global variable 'usrName'
```

### Safer `this` Binding
```javascript
"use strict";

const person = {
  name: "John",
  greet: function() {
    console.log(this.name);
  }
};

let greet = person.greet;
greet();  // TypeError: Cannot read property 'name' of undefined

// Without strict: this would be global object
```

### Class and Module Safety
```javascript
// Classes automatically use strict mode
class MyClass {
  constructor() {
    x = 10;  // Error: x is not defined
  }
}

// ES6 modules automatically use strict mode
export function test() {
  y = 20;  // Error: y is not defined
}
```

---

## When to Use Strict Mode

### ✅ Always Use In:
- **New projects** - start clean
- **ES6 modules** - automatic
- **Classes** - automatic
- **Any production code** - catches bugs early

### ⚠️ Be Careful With:
- **Legacy code** - might break existing functionality
- **Third-party libraries** - may not be compatible
- **Global scope in mixed code** - can affect everything

---

## How to Adopt

### New Projects
```javascript
// At top of every file
"use strict";

// Or use ES6 modules (automatic)
export function myFunction() {
  // automatically strict
}
```

### Existing Projects
```javascript
// Add to functions first
function newFeature() {
  "use strict";
  // safe to test here
}

// Gradually extend to entire files
```

### Build Tools
Many modern tools (Babel, TypeScript) add strict mode automatically.

---

## Browser Support

- **All modern browsers** support strict mode
- **IE 10+** fully supports it
- **IE 9 and below** ignore it (but don't error)

Safe to use everywhere!

---

## Best Practices

1. **Start new files with `"use strict"`**
   ```javascript
   "use strict";
   
   // Your code
   ```

2. **Use ES6 modules** (automatically strict)
   ```javascript
   export function test() {
     // Already in strict mode
   }
   ```

3. **Enable in build tools**
   - Most bundlers add it automatically
   - TypeScript has `"strict": true`

4. **Test thoroughly when adding to old code**
   - May expose hidden bugs
   - May change behavior

---

## Common Errors and Fixes

### Error: Variable is not defined
```javascript
"use strict";
x = 10;  // Error

// Fix: declare variable
let x = 10;
```

### Error: Cannot assign to read-only property
```javascript
"use strict";
const PI = 3.14;
PI = 3;  // Error

// Fix: use let if value changes
let pi = 3.14;
pi = 3;
```

### Error: `this` is undefined
```javascript
"use strict";
function test() {
  console.log(this);  // undefined
}

// Fix: use arrow function or bind
const test = () => {
  console.log(this);  // lexical this
};

// Or call with object
test.call(obj);
```

---

## Key Takeaways

- **Prevents silent errors** - throws instead
- **Catches typos** - no accidental globals
- **Safer `this`** - undefined in functions
- **Future-proof** - reserved words protected
- **Automatic in:**
  - ES6 modules
  - Classes
  - Many build tools
- **Always use** in new code
- **Place at top** of file or function
- **Thoroughly test** when adding to legacy code
