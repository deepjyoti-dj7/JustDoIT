# Code Style & Conventions

Guidelines for writing clean, readable, and maintainable JavaScript code.

---

## Naming Conventions

### Variables and Functions

Use camelCase for variables and functions.

```javascript
// Good
const userName = 'John';
const totalPrice = 100;

function calculateTotal() {
  return price * quantity;
}

function getUserById(id) {
  return users.find(u => u.id === id);
}

// Bad
const user_name = 'John';      // snake_case
const TotalPrice = 100;        // PascalCase
const TOTAL_PRICE = 100;       // SCREAMING_SNAKE_CASE (reserved for constants)

function Calculate_Total() {}  // Mixed style
```

### Constants

Use SCREAMING_SNAKE_CASE for true constants.

```javascript
// Good - true constants
const MAX_RETRY_COUNT = 3;
const API_BASE_URL = 'https://api.example.com';
const DEFAULT_TIMEOUT = 5000;

// Good - configuration objects (camelCase)
const config = {
  maxRetries: 3,
  timeout: 5000
};

// Bad
const max_retry_count = 3;
const maxRetryCount = 3;  // OK for non-constant values
```

### Classes and Constructors

Use PascalCase for classes and constructor functions.

```javascript
// Good
class UserProfile {
  constructor(name) {
    this.name = name;
  }
}

class HTTPRequest {}
class XMLParser {}

// Bad
class userProfile {}
class user_profile {}
class http_request {}
```

### Private Fields/Methods

Use # prefix for private class members.

```javascript
class BankAccount {
  #balance = 0;  // Private field
  
  #validateAmount(amount) {  // Private method
    return amount > 0;
  }
  
  deposit(amount) {
    if (this.#validateAmount(amount)) {
      this.#balance += amount;
    }
  }
  
  getBalance() {
    return this.#balance;
  }
}
```

### Boolean Variables

Use descriptive prefixes like is, has, can, should.

```javascript
// Good
const isActive = true;
const hasPermission = false;
const canEdit = true;
const shouldUpdate = false;

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

// Bad
const active = true;        // Ambiguous
const permission = false;   // Could be the permission itself
const edit = true;          // Confusing
```

---

## Code Organization

### File Structure

Organize imports, constants, functions, and exports logically.

```javascript
// 1. Imports
import React from 'react';
import { useState, useEffect } from 'react';
import PropTypes from 'prop-types';

// 2. Constants
const MAX_ITEMS = 100;
const DEFAULT_PAGE_SIZE = 10;

// 3. Helper functions
function calculateTotal(items) {
  return items.reduce((sum, item) => sum + item.price, 0);
}

// 4. Main component/class
function ShoppingCart({ items }) {
  const [total, setTotal] = useState(0);
  
  useEffect(() => {
    setTotal(calculateTotal(items));
  }, [items]);
  
  return <div>{total}</div>;
}

// 5. PropTypes/validation
ShoppingCart.propTypes = {
  items: PropTypes.arrayOf(PropTypes.object).isRequired
};

// 6. Exports
export default ShoppingCart;
export { calculateTotal };
```

### Function Organization

Order functions logically, with main logic first.

```javascript
// Main function first
function processUser(user) {
  const validated = validateUser(user);
  const normalized = normalizeData(validated);
  return saveUser(normalized);
}

// Helper functions after
function validateUser(user) {
  if (!user.name || !user.email) {
    throw new Error('Invalid user');
  }
  return user;
}

function normalizeData(user) {
  return {
    ...user,
    email: user.email.toLowerCase(),
    name: user.name.trim()
  };
}

function saveUser(user) {
  // Save to database
  return user;
}
```

---

## Spacing and Indentation

### Indentation

Use 2 spaces (common) or 4 spaces (consistent).

```javascript
// Good - 2 spaces
function example() {
  if (condition) {
    doSomething();
  }
}

// Good - 4 spaces (be consistent)
function example() {
    if (condition) {
        doSomething();
    }
}

// Bad - mixed indentation
function example() {
  if (condition) {
      doSomething();
    }
}
```

### Spacing Around Operators

Add spaces around operators.

```javascript
// Good
const sum = a + b;
const result = x * y;
const isValid = value > 0 && value < 100;

// Bad
const sum=a+b;
const result=x*y;
const isValid=value>0&&value<100;
```

### Function Spacing

Add space before function parentheses (named functions).

```javascript
// Good
function greet(name) {
  return `Hello, ${name}`;
}

const greet = function(name) {
  return `Hello, ${name}`;
};

const greet = (name) => {
  return `Hello, ${name}`;
};

// Bad
function greet (name) {}  // Extra space
const greet = function (name) {};
```

### Block Spacing

Add blank lines between logical blocks.

```javascript
// Good
function processData(data) {
  // Validation
  if (!data) {
    throw new Error('No data');
  }
  
  // Processing
  const processed = data.map(item => transform(item));
  
  // Return
  return processed;
}

// Bad - no spacing
function processData(data) {
  if (!data) {
    throw new Error('No data');
  }
  const processed = data.map(item => transform(item));
  return processed;
}
```

---

## Braces and Brackets

### Brace Style

Use K&R style (opening brace on same line).

```javascript
// Good - K&R style
if (condition) {
  doSomething();
}

function example() {
  return true;
}

// Acceptable - Allman style (be consistent)
if (condition)
{
  doSomething();
}

// Bad - inconsistent
if (condition) {
  doSomething();
}
else
{
  doSomethingElse();
}
```

### Always Use Braces

Even for single-line blocks.

```javascript
// Good - always use braces
if (condition) {
  doSomething();
}

// Acceptable but risky
if (condition) doSomething();

// Bad - easy to introduce bugs
if (condition)
  doSomething();
  doSomethingElse();  // Not in the if block!
```

---

## Line Length

Keep lines under 80-100 characters.

```javascript
// Good - split long lines
const message = `This is a very long message that should be ` +
                `split across multiple lines for readability.`;

const user = {
  firstName: 'John',
  lastName: 'Doe',
  email: 'john.doe@example.com'
};

// Good - chain methods with line breaks
const result = data
  .filter(item => item.active)
  .map(item => transform(item))
  .sort((a, b) => a.name.localeCompare(b.name));

// Bad - very long line
const message = 'This is a very long message that goes on and on and on and makes the code hard to read and should be split';
```

---

## Quotes

Use single quotes consistently (or double quotes - be consistent).

```javascript
// Good - single quotes
const name = 'John';
const message = 'Hello, world!';

// Good - double quotes (be consistent)
const name = "John";
const message = "Hello, world!";

// Good - template literals for interpolation
const greeting = `Hello, ${name}!`;

// Bad - inconsistent
const name = 'John';
const message = "Hello, world!";
```

---

## Semicolons

Use semicolons consistently.

```javascript
// Good - with semicolons
const x = 5;
const y = 10;
const sum = x + y;

function greet() {
  return 'Hello';
}

// Good - without semicolons (be consistent)
const x = 5
const y = 10
const sum = x + y

function greet() {
  return 'Hello'
}

// Bad - inconsistent
const x = 5;
const y = 10
const sum = x + y;
```

---

## Arrow Functions

Use arrow functions for callbacks and short functions.

```javascript
// Good - arrow function for callbacks
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(n => n * 2);

const filtered = numbers.filter(n => n > 2);

// Good - implicit return for single expression
const square = x => x * x;

// Good - parentheses for multiple parameters
const add = (a, b) => a + b;

// Good - braces for multiple statements
const process = (data) => {
  const validated = validate(data);
  const transformed = transform(validated);
  return transformed;
};

// Bad - unnecessary braces
const square = (x) => { return x * x; };

// Good - explicit return when needed
const square = x => {
  return x * x;
};
```

---

## Object and Array Literals

### Object Literals

Use shorthand when possible.

```javascript
const name = 'John';
const age = 30;

// Good - shorthand
const user = { name, age };

// Good - method shorthand
const obj = {
  greet() {
    return 'Hello';
  }
};

// Bad - verbose
const user = {
  name: name,
  age: age
};

const obj = {
  greet: function() {
    return 'Hello';
  }
};
```

### Trailing Commas

Use trailing commas in multi-line structures.

```javascript
// Good - trailing comma
const user = {
  name: 'John',
  age: 30,
  email: 'john@example.com',  // Trailing comma
};

const numbers = [
  1,
  2,
  3,  // Trailing comma
];

// Good - no trailing comma in single-line
const user = { name: 'John', age: 30 };

// Bad - inconsistent
const user = {
  name: 'John',
  age: 30,
  email: 'john@example.com'  // Missing trailing comma
};
```

---

## Destructuring

Use destructuring for cleaner code.

```javascript
// Good - object destructuring
const { name, age, email } = user;

// Good - array destructuring
const [first, second] = numbers;

// Good - function parameters
function greet({ name, age }) {
  return `Hello, ${name}. You are ${age} years old.`;
}

// Good - nested destructuring
const { address: { city, country } } = user;

// Bad - manual extraction
const name = user.name;
const age = user.age;
const email = user.email;
```

---

## Template Literals

Use template literals for string interpolation.

```javascript
// Good - template literals
const name = 'John';
const age = 30;
const message = `Hello, ${name}. You are ${age} years old.`;

// Good - multi-line strings
const html = `
  <div>
    <h1>${title}</h1>
    <p>${content}</p>
  </div>
`;

// Bad - concatenation
const message = 'Hello, ' + name + '. You are ' + age + ' years old.';

// Bad - multiple concatenations
const html = '<div>' +
             '  <h1>' + title + '</h1>' +
             '  <p>' + content + '</p>' +
             '</div>';
```

---

## Modern Syntax

### Use const/let Instead of var

```javascript
// Good - const for values that don't change
const MAX_SIZE = 100;
const user = { name: 'John' };

// Good - let for values that change
let count = 0;
count++;

// Bad - var (function-scoped, hoisted)
var count = 0;
```

### Use Default Parameters

```javascript
// Good - default parameters
function greet(name = 'Guest') {
  return `Hello, ${name}`;
}

// Bad - manual default
function greet(name) {
  name = name || 'Guest';
  return `Hello, ${name}`;
}
```

### Use Rest/Spread

```javascript
// Good - rest parameters
function sum(...numbers) {
  return numbers.reduce((a, b) => a + b, 0);
}

// Good - spread operator
const arr1 = [1, 2, 3];
const arr2 = [...arr1, 4, 5, 6];

const obj1 = { a: 1, b: 2 };
const obj2 = { ...obj1, c: 3 };

// Bad - arguments object
function sum() {
  return Array.from(arguments).reduce((a, b) => a + b, 0);
}
```

---

## Consistency

### Be Consistent

Choose a style and stick to it.

```javascript
// Pick ONE style for your project:

// Style A - single quotes, semicolons, 2 spaces
const name = 'John';
const age = 30;

function greet() {
  return 'Hello';
}

// Style B - double quotes, no semicolons, 4 spaces
const name = "John"
const age = 30

function greet() {
    return "Hello"
}
```

### Use Linting Tools

Configure ESLint or similar tools.

```javascript
// .eslintrc.json
{
  "extends": "eslint:recommended",
  "rules": {
    "indent": ["error", 2],
    "quotes": ["error", "single"],
    "semi": ["error", "always"],
    "no-unused-vars": "error",
    "no-console": "warn"
  }
}
```

### Use Prettier

Auto-format code with Prettier.

```javascript
// .prettierrc
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

---

## Key Takeaways

- **Naming**: camelCase for variables/functions, PascalCase for classes, SCREAMING_SNAKE_CASE for constants
- **Indentation**: 2 or 4 spaces consistently
- **Spacing**: Around operators, between blocks
- **Braces**: Always use braces, K&R style
- **Quotes**: Single or double consistently
- **Semicolons**: Use them or don't, but be consistent
- **Modern syntax**: const/let, arrow functions, destructuring, template literals
- **Tools**: Use ESLint and Prettier for consistency
- **Consistency**: Most important - pick a style and stick to it
- Choose a style guide (Airbnb, Google, Standard)
- Configure linting and formatting tools
- Run formatters before committing code
