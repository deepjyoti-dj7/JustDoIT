# Selecting Elements

DOM selection methods to find and access elements in the document.

---

## getElementById()

Selects a single element by its `id` attribute. Returns the element or `null`.

```javascript
const header = document.getElementById('header');

console.log(header);  // <div id="header">...</div>

// Returns null if not found
const missing = document.getElementById('nonexistent');
console.log(missing);  // null
```

### Usage Notes

```javascript
// ID must be unique in the document
const element = document.getElementById('myId');

// Can access properties
console.log(element.textContent);
console.log(element.className);

// Can modify directly
element.style.color = 'red';
```

---

## getElementsByClassName()

Selects all elements with a given class name. Returns an **HTMLCollection** (live).

```javascript
const buttons = document.getElementsByClassName('btn');

console.log(buttons.length);  // Number of elements
console.log(buttons[0]);      // First button

// HTMLCollection is live - updates automatically
const container = document.getElementById('container');
console.log(container.getElementsByClassName('item').length);  // 3

const newItem = document.createElement('div');
newItem.className = 'item';
container.appendChild(newItem);

console.log(container.getElementsByClassName('item').length);  // 4 (updated!)
```

### Multiple Classes

```javascript
// Finds elements with ALL specified classes
const special = document.getElementsByClassName('btn primary');

// Iterate over results
Array.from(buttons).forEach(button => {
  button.style.backgroundColor = 'blue';
});
```

---

## getElementsByTagName()

Selects all elements with a given tag name. Returns an **HTMLCollection** (live).

```javascript
const paragraphs = document.getElementsByTagName('p');
const divs = document.getElementsByTagName('div');

console.log(paragraphs.length);  // Number of <p> elements

// Get all elements
const allElements = document.getElementsByTagName('*');
console.log(allElements.length);
```

### Iterate and Modify

```javascript
const headings = document.getElementsByTagName('h2');

for (let i = 0; i < headings.length; i++) {
  headings[i].style.color = 'navy';
}

// Or use Array methods
Array.from(headings).forEach(h => {
  h.style.fontWeight = 'bold';
});
```

---

## querySelector()

Selects the **first** element matching a CSS selector. Returns the element or `null`.

```javascript
// By ID
const header = document.querySelector('#header');

// By class
const button = document.querySelector('.btn');

// By tag
const paragraph = document.querySelector('p');

// By attribute
const input = document.querySelector('[type="text"]');

// Complex selector
const firstItem = document.querySelector('.list > li:first-child');
```

### Advanced Selectors

```javascript
// Descendant selector
const link = document.querySelector('nav a');

// Child selector
const directChild = document.querySelector('ul > li');

// Attribute selector
const email = document.querySelector('input[type="email"]');

// Pseudo-class
const checked = document.querySelector('input:checked');

// Combined
const activeButton = document.querySelector('.container .btn.active');
```

### Practical Examples

```javascript
// Select first paragraph in article
const firstPara = document.querySelector('article p');

// Select active tab
const activeTab = document.querySelector('.tab.active');

// Select first checkbox that's checked
const checkedBox = document.querySelector('input[type="checkbox"]:checked');

// Select element with data attribute
const item = document.querySelector('[data-id="123"]');
```

---

## querySelectorAll()

Selects **all** elements matching a CSS selector. Returns a **NodeList** (static).

```javascript
const allButtons = document.querySelectorAll('.btn');

console.log(allButtons.length);  // Number of buttons
console.log(allButtons[0]);      // First button

// NodeList is NOT live
const list = document.querySelectorAll('.item');
console.log(list.length);  // 3

document.body.appendChild(createNewItem());
console.log(list.length);  // Still 3 (not updated)
```

### Iteration

```javascript
const items = document.querySelectorAll('.item');

// forEach (available on NodeList)
items.forEach(item => {
  item.style.border = '1px solid black';
});

// for...of
for (const item of items) {
  console.log(item.textContent);
}

// Convert to array for more methods
const itemsArray = Array.from(items);
const texts = itemsArray.map(item => item.textContent);
```

### Complex Selections

```javascript
// Multiple selectors (comma-separated)
const elements = document.querySelectorAll('h1, h2, h3');

// Attribute selectors
const externalLinks = document.querySelectorAll('a[target="_blank"]');

// Pseudo-classes
const evenRows = document.querySelectorAll('tr:nth-child(even)');

// Data attributes
const products = document.querySelectorAll('[data-category="electronics"]');
```

---

## Comparison: HTMLCollection vs NodeList

### HTMLCollection (Live)

```javascript
const divs = document.getElementsByTagName('div');  // HTMLCollection

console.log(divs.length);  // 5

// Add new div
const newDiv = document.createElement('div');
document.body.appendChild(newDiv);

console.log(divs.length);  // 6 (automatically updated!)
```

### NodeList (Static)

```javascript
const divs = document.querySelectorAll('div');  // NodeList

console.log(divs.length);  // 5

// Add new div
const newDiv = document.createElement('div');
document.body.appendChild(newDiv);

console.log(divs.length);  // 5 (unchanged)
```

### Feature Comparison

```javascript
// HTMLCollection - no forEach
const htmlColl = document.getElementsByClassName('item');
// htmlColl.forEach(...)  // Error!

// Must convert to array
Array.from(htmlColl).forEach(item => { /* ... */ });

// NodeList - has forEach
const nodeList = document.querySelectorAll('.item');
nodeList.forEach(item => { /* ... */ });  // Works!
```

---

## Scoped Selection

### Select Within Element

```javascript
const container = document.querySelector('.container');

// Select only within container
const buttons = container.querySelectorAll('.btn');
const firstPara = container.querySelector('p');

// Equivalent to:
// document.querySelectorAll('.container .btn');
```

### Practical Example

```javascript
function highlightSection(sectionId) {
  const section = document.getElementById(sectionId);
  
  if (!section) return;
  
  // Select only paragraphs in this section
  const paragraphs = section.querySelectorAll('p');
  
  paragraphs.forEach(p => {
    p.style.backgroundColor = 'yellow';
  });
}

highlightSection('intro');
```

---

## Closest() - Reverse Selection

Finds the closest ancestor matching a selector.

```javascript
const button = document.querySelector('.submit-btn');

// Find closest form
const form = button.closest('form');

// Find closest div with class
const container = button.closest('.container');

// Check if element is inside specific parent
if (button.closest('.modal')) {
  console.log('Button is inside a modal');
}
```

### Event Delegation Use Case

```javascript
document.querySelector('.list').addEventListener('click', (e) => {
  const listItem = e.target.closest('li');
  
  if (listItem) {
    console.log('Clicked item:', listItem.textContent);
  }
});
```

---

## Matches() - Check Selector

Tests if an element matches a CSS selector.

```javascript
const element = document.querySelector('.btn');

console.log(element.matches('.btn'));        // true
console.log(element.matches('.primary'));    // true/false
console.log(element.matches('button'));      // true if <button>

// Useful in event handlers
document.addEventListener('click', (e) => {
  if (e.target.matches('.btn')) {
    console.log('Button clicked');
  }
});
```

---

## Modern Selection Patterns

### Null-Safe Selection

```javascript
// Safe access with optional chaining
const text = document.querySelector('.missing')?.textContent ?? 'Default';

// Traditional way
const element = document.querySelector('.missing');
const text = element ? element.textContent : 'Default';
```

### Destructuring

```javascript
// Get multiple elements
const [first, second, ...rest] = document.querySelectorAll('.item');

console.log(first);   // First item
console.log(second);  // Second item
console.log(rest);    // Array of remaining items
```

### Helper Functions

```javascript
// Shorthand selectors
const $ = (selector) => document.querySelector(selector);
const $$ = (selector) => document.querySelectorAll(selector);

const header = $('#header');
const buttons = $$('.btn');

// Select with context
const $ctx = (selector, context = document) => {
  return context.querySelector(selector);
};

const container = $('#container');
const button = $ctx('.btn', container);
```

---

## Performance Considerations

### Cache Selections

```javascript
// Bad - queries DOM every iteration
for (let i = 0; i < 100; i++) {
  document.querySelector('.container').appendChild(element);
}

// Good - cache the selection
const container = document.querySelector('.container');
for (let i = 0; i < 100; i++) {
  container.appendChild(element);
}
```

### Specific vs Generic

```javascript
// Slower - searches entire document
const buttons = document.querySelectorAll('.btn');

// Faster - narrows search scope
const container = document.getElementById('container');
const buttons = container.querySelectorAll('.btn');
```

### ID vs Class vs Tag

```javascript
// Fastest
document.getElementById('myId');

// Medium speed
document.getElementsByClassName('myClass');
document.getElementsByTagName('div');

// Slower (more flexible)
document.querySelector('#myId');
document.querySelectorAll('.myClass');
```

---

## Best Practices

```javascript
// 1. Use getElementById for single unique elements
const header = document.getElementById('header');

// 2. Use querySelector for complex selections
const activeButton = document.querySelector('.btn.active');

// 3. Use querySelectorAll for multiple elements
const items = document.querySelectorAll('.list-item');

// 4. Cache selections when used multiple times
const form = document.querySelector('form');
form.addEventListener('submit', handleSubmit);
form.reset();

// 5. Scope selections when possible
const modal = document.querySelector('.modal');
const modalButtons = modal.querySelectorAll('.btn');

// 6. Use meaningful variable names
const submitButton = document.querySelector('.submit-btn');
const cancelButton = document.querySelector('.cancel-btn');
```

---

## Common Use Cases

### Form Elements

```javascript
const form = document.querySelector('form');
const emailInput = form.querySelector('[name="email"]');
const submitBtn = form.querySelector('[type="submit"]');
const checkboxes = form.querySelectorAll('[type="checkbox"]');
```

### Navigation

```javascript
const nav = document.querySelector('nav');
const links = nav.querySelectorAll('a');
const activeLink = nav.querySelector('.active');
```

### Lists

```javascript
const list = document.querySelector('.todo-list');
const items = list.querySelectorAll('li');
const completedItems = list.querySelectorAll('li.completed');
const firstItem = list.querySelector('li:first-child');
```

### Conditional Selection

```javascript
function getElement(selector) {
  const element = document.querySelector(selector);
  
  if (!element) {
    console.warn(`Element not found: ${selector}`);
    return null;
  }
  
  return element;
}

const header = getElement('#header');
if (header) {
  header.style.display = 'none';
}
```

---

## Key Takeaways

- **getElementById**: Fast, single element by ID
- **getElementsByClassName/TagName**: Live HTMLCollection
- **querySelector**: First match, CSS selectors
- **querySelectorAll**: All matches, static NodeList
- **closest**: Find ancestor matching selector
- **matches**: Check if element matches selector
- Cache selections for performance
- Scope selections to narrow search
- Use specific selectors over generic ones
- NodeList has forEach, HTMLCollection doesn't
