# Modifying Elements

Methods for changing element attributes, content, styles, and classes.

---

## textContent

Gets or sets the text content of an element and its descendants.

```javascript
const para = document.querySelector('p');

// Get text
console.log(para.textContent);  // 'Hello World'

// Set text
para.textContent = 'New text';

// Strips all HTML tags
para.textContent = '<strong>Bold</strong>';
console.log(para.innerHTML);  // '&lt;strong&gt;Bold&lt;/strong&gt;'
```

### vs innerText

```javascript
const div = document.querySelector('div');

// textContent - gets all text, including hidden
console.log(div.textContent);

// innerText - respects styling, excludes hidden elements
console.log(div.innerText);
```

---

## innerHTML

Gets or sets the HTML content of an element.

```javascript
const div = document.querySelector('div');

// Get HTML
console.log(div.innerHTML);  // '<p>Hello</p>'

// Set HTML
div.innerHTML = '<p>New <strong>HTML</strong></p>';

// Add to existing HTML
div.innerHTML += '<p>Another paragraph</p>';
```

### Security Warning

```javascript
// Dangerous - XSS vulnerability
const userInput = '<img src=x onerror=alert("XSS")>';
div.innerHTML = userInput;  // Script executes!

// Safe alternative
div.textContent = userInput;  // Displays as text
```

---

## outerHTML

Gets or sets the HTML including the element itself.

```javascript
const div = document.querySelector('div');

console.log(div.innerHTML);   // '<p>Content</p>'
console.log(div.outerHTML);   // '<div><p>Content</p></div>'

// Replace entire element
div.outerHTML = '<section>New section</section>';
```

---

## setAttribute()

Sets the value of an attribute.

```javascript
const link = document.querySelector('a');

link.setAttribute('href', 'https://example.com');
link.setAttribute('target', '_blank');
link.setAttribute('class', 'external-link');

// Custom attributes
link.setAttribute('data-id', '123');
```

### Direct Property Assignment

```javascript
// Most common attributes can be set directly
link.href = 'https://example.com';
link.target = '_blank';
link.className = 'external-link';  // Note: className, not class

// Custom data attributes
link.dataset.id = '123';  // Sets data-id="123"
```

---

## getAttribute()

Retrieves the value of an attribute.

```javascript
const link = document.querySelector('a');

console.log(link.getAttribute('href'));    // 'https://example.com'
console.log(link.getAttribute('target'));  // '_blank'
console.log(link.getAttribute('class'));   // 'external-link'

// Custom attributes
console.log(link.getAttribute('data-id')); // '123'

// Returns null if attribute doesn't exist
console.log(link.getAttribute('rel'));     // null
```

---

## removeAttribute()

Removes an attribute from an element.

```javascript
const button = document.querySelector('button');

button.removeAttribute('disabled');
button.removeAttribute('data-id');

// Check if attribute exists
if (button.hasAttribute('disabled')) {
  button.removeAttribute('disabled');
}
```

---

## hasAttribute()

Checks if an element has a specific attribute.

```javascript
const input = document.querySelector('input');

if (input.hasAttribute('required')) {
  console.log('This field is required');
}

if (!input.hasAttribute('disabled')) {
  input.value = 'New value';
}
```

---

## Data Attributes

Custom attributes prefixed with `data-`.

```javascript
const element = document.querySelector('.item');

// Set using setAttribute
element.setAttribute('data-id', '123');
element.setAttribute('data-category', 'electronics');

// Get using getAttribute
console.log(element.getAttribute('data-id'));  // '123'

// Use dataset property (more convenient)
element.dataset.id = '123';
element.dataset.category = 'electronics';

console.log(element.dataset.id);       // '123'
console.log(element.dataset.category); // 'electronics'
```

### Multi-word Data Attributes

```javascript
const element = document.querySelector('.item');

// Camel case converts to kebab-case
element.dataset.userId = '456';
// Creates: data-user-id="456"

element.dataset.itemCount = '10';
// Creates: data-item-count="10"

console.log(element.dataset.userId);    // '456'
console.log(element.getAttribute('data-user-id'));  // '456'
```

---

## Modifying Styles

### style Property

```javascript
const box = document.querySelector('.box');

// Set individual styles
box.style.color = 'red';
box.style.backgroundColor = 'yellow';
box.style.fontSize = '20px';
box.style.margin = '10px';

// Multi-word properties use camelCase
box.style.borderRadius = '5px';

// Get computed style
const color = box.style.color;  // Only returns inline styles

// Get actual computed style
const computed = window.getComputedStyle(box);
console.log(computed.color);           // 'rgb(255, 0, 0)'
console.log(computed.backgroundColor); // 'rgb(255, 255, 0)'
```

### cssText

```javascript
const element = document.querySelector('.element');

// Set multiple styles at once
element.style.cssText = 'color: red; background: yellow; padding: 10px;';

// Overwrites existing inline styles
element.style.cssText = 'font-size: 16px;';  // Previous styles gone
```

### Remove Inline Styles

```javascript
const element = document.querySelector('.element');

// Remove specific style
element.style.color = '';

// Remove all inline styles
element.removeAttribute('style');
```

---

## Class Manipulation

### className

```javascript
const element = document.querySelector('.box');

// Get classes
console.log(element.className);  // 'box active highlight'

// Set classes (replaces all)
element.className = 'new-class another-class';

// Add to existing classes
element.className += ' extra-class';
```

### classList (Modern & Preferred)

#### add()

```javascript
const element = document.querySelector('.box');

element.classList.add('active');
element.classList.add('highlight', 'special');  // Multiple classes
```

#### remove()

```javascript
element.classList.remove('active');
element.classList.remove('highlight', 'special');  // Multiple classes
```

#### toggle()

```javascript
// Add if absent, remove if present
element.classList.toggle('active');

// With second argument (force)
element.classList.toggle('active', true);   // Always add
element.classList.toggle('active', false);  // Always remove

// Practical use
button.addEventListener('click', () => {
  menu.classList.toggle('open');
});
```

#### contains()

```javascript
if (element.classList.contains('active')) {
  console.log('Element is active');
}

// Practical validation
if (!element.classList.contains('disabled')) {
  element.click();
}
```

#### replace()

```javascript
// Replace old class with new class
element.classList.replace('old-class', 'new-class');

// Returns true if successful, false if old class not found
const success = element.classList.replace('active', 'inactive');
```

---

## Value Property (Form Elements)

```javascript
const input = document.querySelector('input[type="text"]');

// Get value
console.log(input.value);

// Set value
input.value = 'New value';

// Clear value
input.value = '';

// For checkboxes/radio buttons
const checkbox = document.querySelector('input[type="checkbox"]');
console.log(checkbox.checked);  // true/false
checkbox.checked = true;
```

### Select Elements

```javascript
const select = document.querySelector('select');

// Get selected value
console.log(select.value);

// Set selected value
select.value = 'option2';

// Get selected option element
const selectedOption = select.options[select.selectedIndex];
console.log(selectedOption.textContent);
```

---

## Practical Examples

### Toggle Theme

```javascript
function toggleTheme() {
  const body = document.body;
  
  if (body.classList.contains('dark-theme')) {
    body.classList.remove('dark-theme');
    body.classList.add('light-theme');
  } else {
    body.classList.remove('light-theme');
    body.classList.add('dark-theme');
  }
  
  // Simpler with toggle
  body.classList.toggle('dark-theme');
  body.classList.toggle('light-theme');
}
```

### Form Validation

```javascript
function validateForm() {
  const input = document.querySelector('#email');
  const error = document.querySelector('.error-message');
  
  const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(input.value);
  
  if (isValid) {
    input.classList.remove('invalid');
    input.classList.add('valid');
    error.textContent = '';
  } else {
    input.classList.remove('valid');
    input.classList.add('invalid');
    error.textContent = 'Please enter a valid email';
  }
}
```

### Update Progress Bar

```javascript
function updateProgress(percentage) {
  const bar = document.querySelector('.progress-bar');
  const text = document.querySelector('.progress-text');
  
  bar.style.width = `${percentage}%`;
  text.textContent = `${percentage}%`;
  
  // Change color based on progress
  if (percentage < 30) {
    bar.style.backgroundColor = 'red';
  } else if (percentage < 70) {
    bar.style.backgroundColor = 'orange';
  } else {
    bar.style.backgroundColor = 'green';
  }
}

updateProgress(75);
```

### Dynamic Card Creation

```javascript
function createProductCard(product) {
  const card = document.createElement('div');
  card.className = 'product-card';
  card.dataset.id = product.id;
  
  const title = document.createElement('h3');
  title.textContent = product.name;
  
  const price = document.createElement('p');
  price.textContent = `$${product.price}`;
  price.className = 'price';
  
  const button = document.createElement('button');
  button.textContent = 'Add to Cart';
  button.className = 'btn btn-primary';
  
  if (product.inStock) {
    button.classList.add('available');
  } else {
    button.disabled = true;
    button.classList.add('out-of-stock');
    button.textContent = 'Out of Stock';
  }
  
  card.append(title, price, button);
  return card;
}

const product = {
  id: 1,
  name: 'Laptop',
  price: 999,
  inStock: true
};

const card = createProductCard(product);
document.body.appendChild(card);
```

### Accordion Component

```javascript
function setupAccordion() {
  const headers = document.querySelectorAll('.accordion-header');
  
  headers.forEach(header => {
    header.addEventListener('click', () => {
      const content = header.nextElementSibling;
      const isOpen = header.classList.contains('active');
      
      // Close all others
      document.querySelectorAll('.accordion-header').forEach(h => {
        h.classList.remove('active');
        h.nextElementSibling.style.maxHeight = null;
      });
      
      // Toggle current
      if (!isOpen) {
        header.classList.add('active');
        content.style.maxHeight = content.scrollHeight + 'px';
      }
    });
  });
}
```

### Table Row Highlighting

```javascript
function highlightTableRow(rowIndex) {
  const table = document.querySelector('table');
  const rows = table.querySelectorAll('tbody tr');
  
  rows.forEach((row, index) => {
    if (index === rowIndex) {
      row.classList.add('highlight');
      row.style.backgroundColor = 'yellow';
    } else {
      row.classList.remove('highlight');
      row.style.backgroundColor = '';
    }
  });
}
```

---

## Performance Considerations

### Batch Style Changes

```javascript
// Bad - multiple reflows
element.style.width = '100px';
element.style.height = '100px';
element.style.backgroundColor = 'red';

// Better - use cssText
element.style.cssText = 'width: 100px; height: 100px; background-color: red;';

// Best - use class
element.className = 'styled-box';
```

### Read Then Write

```javascript
// Bad - causes layout thrashing
for (let i = 0; i < elements.length; i++) {
  const width = elements[i].offsetWidth;  // Read
  elements[i].style.width = width + 10 + 'px';  // Write
}

// Good - batch reads, then writes
const widths = [];
for (let i = 0; i < elements.length; i++) {
  widths[i] = elements[i].offsetWidth;  // All reads first
}
for (let i = 0; i < elements.length; i++) {
  elements[i].style.width = widths[i] + 10 + 'px';  // Then all writes
}
```

---

## Best Practices

```javascript
// 1. Use textContent for text (safer than innerHTML)
element.textContent = userInput;

// 2. Use classList instead of className
element.classList.add('active');

// 3. Use dataset for custom data attributes
element.dataset.userId = '123';

// 4. Cache element references
const button = document.querySelector('.btn');
button.textContent = 'Click';
button.disabled = false;

// 5. Batch DOM modifications
const fragment = document.createDocumentFragment();
items.forEach(item => {
  const li = document.createElement('li');
  li.textContent = item;
  fragment.appendChild(li);
});
list.appendChild(fragment);

// 6. Use CSS classes for styling
element.classList.add('highlight');  // Better than inline styles
```

---

## Key Takeaways

- **textContent**: Safe for text (prevents XSS)
- **innerHTML**: Parses HTML (security risk with user input)
- **setAttribute/getAttribute**: Generic attribute access
- **classList**: Modern class manipulation (add, remove, toggle)
- **style**: Direct style access (inline styles only)
- **dataset**: Easy data attribute access
- **value**: Form input values
- Use `classList` over `className`
- Use `textContent` over `innerHTML` for text
- Batch style changes for performance
- Prefer CSS classes over inline styles
- Cache element references
- Validate and sanitize user input
